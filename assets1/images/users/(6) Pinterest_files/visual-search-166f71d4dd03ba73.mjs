(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[14865,90907,15276,34713],{405410:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardAttribution_pin",selections:[{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:[t,{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};i.hash="610a35d46510240eb58e262c1909310c",e.exports=i},327620:e=>{"use strict";var t,i,l,a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"BestPinCardBody_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"lastRepinDate",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"createdAt",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[i={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[l={alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:null,args:null,concreteType:"ParsedIngredientMetadata",kind:"LinkedField",name:"ingredients",plural:!0,selections:[i,{alias:null,args:null,kind:"ScalarField",name:"amt",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null},{args:null,kind:"FragmentSpread",name:"RecipeMetadata_recipe"}],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null}],storageKey:null},t,{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},{alias:null,args:null,concreteType:"Embed",kind:"LinkedField",name:"embed",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"src",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},l,{args:null,kind:"FragmentSpread",name:"usePinImageUrls_pin"},{args:null,kind:"FragmentSpread",name:"useNormalizePinData_pin"},{args:null,kind:"FragmentSpread",name:"BestPinCardAttribution_pin"}],type:"Pin",abstractKey:null};a.hash="833cd5d58bc1ac105444aa923e882675",e.exports=a},603239:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselEllipsis_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselEllipsis_pin2"}],type:"Pin",abstractKey:null};t.hash="a4b0b28d3f9f52a7e3d5874c94bfb63d",e.exports=t},822423:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselEllipsis_pin2",selections:[{args:null,kind:"FragmentSpread",name:"useLogSwipe_pin"},{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"}],type:"Pin",abstractKey:null};t.hash="3286ed8ff7f456e30ce44b879fb3e273",e.exports=t},992872:e=>{"use strict";var t,i={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"CarouselModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentCarouselDisplayOptions",kind:"LinkedField",name:"carouselDisplayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"navigationType",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null},{alias:null,args:null,concreteType:"StoryContentVisibleItemCount",kind:"LinkedField",name:"contentVisibleItemCount",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"mobile",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"web",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryTilesGridLayout",kind:"LinkedField",name:"gridLayout",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"cols",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"carouselFadeEnds",storageKey:null},{alias:null,args:null,concreteType:"StoryItemViewRepStyle",kind:"LinkedField",name:"itemViewRepStyle",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"exploreArticleRepStyle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"moreIdeasRepStyle",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null}],storageKey:null}],storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:[t={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"objects",plural:!0,selections:[t,{kind:"InlineFragment",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"ItemRep_pin"}],type:"Pin",abstractKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};i.hash="3a9249e363d91968cda37f88750020c1",e.exports=i},717246:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselSliders_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},{args:null,kind:"FragmentSpread",name:"CarouselSliders_pin2"}],type:"Pin",abstractKey:null};t.hash="3f223f30a28328f76287f1fcf8c84a2a",e.exports=t},671704:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CarouselSliders_pin2",selections:[{args:null,kind:"FragmentSpread",name:"useLogSwipe_pin"},{args:null,kind:"FragmentSpread",name:"usePinCarouselData_pin"},{args:null,kind:"FragmentSpread",name:"CarouselEllipsis_pin"}],type:"Pin",abstractKey:null};t.hash="d0973811f6c08057de3b9f34d83c8a63",e.exports=t},225785:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightCropperContainer_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin"}],type:"Pin",abstractKey:null};t.hash="17b1ebef1c9031212ecd7bd5be0e6151",e.exports=t},490644:e=>{"use strict";var t,i,l,a,n,r,s,o,d,u,c,p,m,h,g,_,y,v,f,x,S,b,w,P=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},o={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},c={alias:"imageOrig",args:d=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},m={alias:"image736x",args:p=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"736x")'},g={alias:"image564x",args:h=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"564x")'},y={alias:"image474x",args:_=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"474x")'},f={alias:"image236x",args:v=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:u,storageKey:'images(spec:"236x")'},b={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:S=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:"additionalImageOrig",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x=[n,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:u,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:h,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:p,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:_,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:v,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:x,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[n,{alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"FlashlightPagePinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[l,{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,n,r,s,o,c,m,g,y,f,b,w={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:S,storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"FlashlightPagePinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[l,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[a,n,r,s,o,c,m,g,y,f,b,w,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"2fbe7c612e0b9e55147a27059ea1cb52fb3420abce761a50d75549302dd620bd",metadata:{},name:"FlashlightPagePinQuery",operationKind:"query",text:null}});P.hash="3e072d3a492316c79a629968e8cd0a07",e.exports=P,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(P)},568189:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"},{args:null,kind:"FragmentSpread",name:"FlashlightResultGridContainer_pin"}],type:"Pin",abstractKey:null};t.hash="903db2b432ad0f02adcdca0d6515898d",e.exports=t},378605:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightResultGridContainer_pin",selections:[{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};t.hash="bcca3e8407135d3e3c7a0a8bacfabeff",e.exports=t},52892:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightSpotlightDots_pin2"}],type:"Pin",abstractKey:null};t.hash="52dc74b705cb9784c26894b2ba6ad97a",e.exports=t},220890:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"FlashlightSpotlightDots_pin2",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="29001cb3296c0c86c74dafcef958deb3",e.exports=t},612587:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"HeaderModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"style",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"user",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isVerifiedMerchant",storageKey:null},{alias:null,args:null,concreteType:"VerifiedIdentity",kind:"LinkedField",name:"verifiedIdentity",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"verified",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null}],storageKey:null},{alias:"storyTitle",args:null,concreteType:"StoryText",kind:"LinkedField",name:"title",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"format",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryText",kind:"LinkedField",name:"subtitle",plural:!1,selections:t,storageKey:null},{alias:"storyDescription",args:null,concreteType:"StoryText",kind:"LinkedField",name:"description",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"titleTextColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleTextColor",storageKey:null},{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryHeaderDisplay",kind:"LinkedField",name:"headerDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"expandedTextAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"textAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleAlignment",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"headerSize",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"titlePosition",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitleStyle",storageKey:null}],storageKey:null}],storageKey:null}],type:"Story",abstractKey:null};i.hash="4bee3a400f6e868da4c768b56562f0ea",e.exports=i},883597:e=>{"use strict";var t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"ItemRep_pin",selections:[{alias:"pinId",args:null,kind:"ScalarField",name:"id",storageKey:null},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};t.hash="e09face5ac4d794d890ecc87ca1a90a4",e.exports=t},43027:e=>{"use strict";var t,i,l,a,n,r,s,o,d,u,c,p,m,h,g,_,y,v,f,x,S,b,w,P,I=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},o={alias:"imageOrig",args:r=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"orig")'},u={alias:"image736x",args:d=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},p={alias:"image564x",args:c=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"564x")'},h={alias:"image474x",args:m=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},_={alias:"image236x",args:g=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'},y={alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},v={alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:[n,{alias:"imageOrig",args:r,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"orig")'},{alias:"image736x",args:d,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"736x")'},{alias:"image564x",args:c,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"564x")'},{alias:"image474x",args:m,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"474x")'},{alias:"image236x",args:g,concreteType:"Thumbnails",kind:"LinkedField",name:"images",plural:!1,selections:s,storageKey:'images(spec:"236x")'}],storageKey:null},S={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:x=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:"additionalImageOrig",args:r,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:f=[n,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:s,storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},{alias:"additionalImage564x",args:c,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:f,storageKey:'additionalImagesPerSpec(spec:"564x")'},{alias:"additionalImage736x",args:d,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:f,storageKey:'additionalImagesPerSpec(spec:"736x")'},{alias:"additionalImage474x",args:m,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:f,storageKey:'additionalImagesPerSpec(spec:"474x")'},{alias:"additionalImage236x",args:g,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:f,storageKey:'additionalImagesPerSpec(spec:"236x")'}],storageKey:null}],storageKey:null},b={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:x,storageKey:null},w={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},y,{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null}],storageKey:null},{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,a,n,o,u,p,h,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[y,v],storageKey:null},S,b,w],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"MobileFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,a,n,o,u,p,h,_,{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[y,v,P={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null},S,b,w,P],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"67eedd3e1834ee184411ff81c5eeea7cf9dc9ec53a5e099459966ce5369828ee",metadata:{},name:"MobileFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});I.hash="1647166e8b02809a5f8ccfca2dc5019a",e.exports=I,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(I)},781426:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MobileFlashlightPage_pin",selections:[{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"736x")'},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"UnifiedPinRep_pin"}],type:"Pin",abstractKey:null};t.hash="97621a830643ac50c2f15e7aa19a3b57",e.exports=t},468852:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsImageContent_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"FlashlightCropperContainer_pin"}],type:"Pin",abstractKey:null};t.hash="63b7c7cb48b269ec7bd096ebb0e37dfb",e.exports=t},482495:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsPageWithData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},{alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null}],storageKey:null},{args:null,kind:"FragmentSpread",name:"useGetInitialCropArea_pin"},{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsImageContent_pin"},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin"}],type:"Pin",abstractKey:null};t.hash="dcd02fa7b3bcd48f4e3b8376109da44f",e.exports=t},966498:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},{args:null,kind:"FragmentSpread",name:"RelatedProductsUnifiedFeed_pin2"}],type:"Pin",abstractKey:null};t.hash="2bba0a06c22c741f25c991c4f41b6563",e.exports=t},74319:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"RelatedProductsUnifiedFeed_pin2",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="d8c2e3749317d5d623dea00f7add8fc4",e.exports=t},282167:e=>{"use strict";var t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"StructuredFeedStoryModule_story",selections:[{alias:null,args:null,concreteType:"StoryAction",kind:"LinkedField",name:"action",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"location",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"containerType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"contentIds",storageKey:null},{alias:null,args:null,concreteType:"StoryDisplayOptions",kind:"LinkedField",name:"displayOptions",plural:!1,selections:[{alias:null,args:null,concreteType:"StoryContentDisplay",kind:"LinkedField",name:"contentDisplay",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"componentType",storageKey:null}],storageKey:null}],storageKey:null},{alias:"storyId",args:null,kind:"ScalarField",name:"id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyType",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"CarouselModule_story"},{args:null,kind:"FragmentSpread",name:"HeaderModule_story"}],type:"Story",abstractKey:null};t.hash="058a61f5e0b72dbde337960de273d6a5",e.exports=t},676684:e=>{"use strict";var t,i,l,a,n,r,s,o,d,u,c,p,m,h,g,_,y,v,f,x,S,b,w,P,I,T,k,E,j,A,F,C,R,D,O,L,N,Z,M,K,z,H,U,B,G,$,V,W,Y,q,X,Q,J,ee,et=(t=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],l={alias:null,args:null,kind:"ScalarField",name:"entityId",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"imageSignature",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},r={alias:null,args:null,kind:"ScalarField",name:"isEligibleForRelatedProducts",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},d={alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"repinCount",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"domain",storageKey:null},y={alias:null,args:null,concreteType:"PinJoin",kind:"LinkedField",name:"pinJoin",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"visualAnnotation",storageKey:null},{alias:null,args:null,concreteType:"AnnotationsWithLinks",kind:"LinkedField",name:"annotationsWithLinksArray",plural:!0,selections:[g={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:null}],storageKey:null},v={alias:null,args:null,concreteType:"StoryPinMetadataField",kind:"LinkedField",name:"metadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"pinTitle",storageKey:null}],storageKey:null},w=[f={alias:null,args:null,kind:"ScalarField",name:"username",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"fullName",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"imageMediumUrl",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"imageSmallUrl",storageKey:null}],P=[l,f,x,S,b],I={alias:null,args:null,kind:"ScalarField",name:"imageThumbnailUrl",storageKey:null},T={alias:null,args:null,kind:"ScalarField",name:"privacy",storageKey:null},C={alias:"imageOrig",args:k=[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:F=[E={alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null},_,j={alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"dominantColor",storageKey:null}],storageKey:'images(spec:"orig")'},D={alias:"image564x",args:R=[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:F,storageKey:'images(spec:"564x")'},L={alias:"image736x",args:O=[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:F,storageKey:'images(spec:"736x")'},Z={alias:"image474x",args:N=[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:F,storageKey:'images(spec:"474x")'},K={alias:"image236x",args:M=[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:F,storageKey:'images(spec:"236x")'},z={alias:null,args:null,concreteType:"StelaVisualObject",kind:"LinkedField",name:"visualObjects",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"detection",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"h",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStela",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"label",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelX",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"labelY",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"maxAnnotationNumDocuments",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"score",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"showOnCloseup",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"x",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"w",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"y",storageKey:null}],storageKey:null},H={alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"inStock",storageKey:null}],storageKey:null},B={alias:"additionalImageOrig",args:k,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U=[a,{alias:null,args:null,concreteType:"Thumbnails",kind:"LinkedField",name:"canonicalImage",plural:!1,selections:[A,_,E],storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"orig")'},Y={alias:null,args:null,kind:"ScalarField",name:"canonicalImages",storageKey:null},q={alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[n,o,{alias:null,args:null,concreteType:"RecipeMetadata",kind:"LinkedField",name:"recipe",plural:!1,selections:[g,{alias:null,args:null,concreteType:"CategorizedIngredientsMetadata",kind:"LinkedField",name:"categorizedIngredients",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fromAggregatedData",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"datePublished",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"MakeCardTutorialMetadata",kind:"LinkedField",name:"tutorial",plural:!1,selections:[g,j],storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[g,H,B,G={alias:"additionalImage564x",args:R,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"564x")'},$={alias:"additionalImage736x",args:O,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"736x")'},V={alias:"additionalImage474x",args:N,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"474x")'},W={alias:"additionalImage236x",args:M,concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:U,storageKey:'additionalImagesPerSpec(spec:"236x")'},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[a,Y],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},X={alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null},{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[g,H,B,G,$,V,W,{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:[{alias:null,args:null,concreteType:"AdditionalImages",kind:"LinkedField",name:"additionalImages",plural:!0,selections:[Y,a],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},J=[f,x,S,b,Q={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],ee=[l,f,x,S,b,Q],{fragment:{argumentDefinitions:t,kind:"Fragment",metadata:null,name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,a,n,r,s,o,d,u,c,p,m,h,y,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[v],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:w,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:w,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:P,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,I,g,T,_],storageKey:null},C,D,L,Z,K,z,q,X],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:t,kind:"Operation",name:"UnauthDesktopFlashlightPageFetchDataPinQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[l,a,n,r,s,o,d,u,c,p,m,h,y,{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[v,Q],storageKey:null},{alias:null,args:null,concreteType:"Domain",kind:"LinkedField",name:"linkDomain",plural:!1,selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"officialUser",plural:!1,selections:J,storageKey:null},Q],storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"closeupAttribution",plural:!1,selections:J,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"nativeCreator",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"pinner",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"originPinner",plural:!1,selections:ee,storageKey:null},{alias:null,args:null,concreteType:"Board",kind:"LinkedField",name:"board",plural:!1,selections:[l,I,g,T,_,Q],storageKey:null},C,D,L,Z,K,z,q,X,Q],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"5f09d38fcc19ea4defe9a2ced0ea73c23f12ec0bc0e6d4bd4f24974e35d6e8ea",metadata:{},name:"UnauthDesktopFlashlightPageFetchDataPinQuery",operationKind:"query",text:null}});et.hash="41066749b18be6f77425904cd44e3d69",e.exports=et,function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let t=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[t]=e}}}(et)},875666:e=>{"use strict";var t={argumentDefinitions:[{defaultValue:!1,kind:"LocalArgument",name:"skipUnauthFragment"}],kind:"Fragment",metadata:null,name:"UnifiedPinRep_pin",selections:[{args:[{kind:"Variable",name:"skipUnauthFragment",variableName:"skipUnauthFragment"}],kind:"FragmentSpread",name:"PinRep_pin"}],type:"Pin",abstractKey:null};t.hash="ef57e3f96ab6a0ba7ea79d9d2bb3c326",e.exports=t},161186:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetInitialCropArea_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetNormalizedPinImage_pin"}],type:"Pin",abstractKey:null};t.hash="120ad104e33b94ab10be1098dc10d74b",e.exports=t},469656:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useGetNormalizedPinImage_pin",selections:[{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"height",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"width",storageKey:null}],storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"736x")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"orig")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"474x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"236x")'}],type:"Pin",abstractKey:null};i.hash="3d7a6d04f923d00acfb2887f852aea16",e.exports=i},270643:e=>{"use strict";var t={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useLogSwipe_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"}],type:"Pin",abstractKey:null};t.hash="dbfca9820e0aa1302554a0137a270b16",e.exports=t},47737:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useNormalizePinData_pin",selections:[{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"closeupUnifiedTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"category",storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"link",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:t=[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,concreteType:"OfferSummary",kind:"LinkedField",name:"offerSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:t,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackedLink",storageKey:null}],type:"Pin",abstractKey:null};i.hash="01a93671cde480baa2cfd8b781589acd",e.exports=i},460863:e=>{"use strict";var t,i={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"usePinImageUrls_pin",selections:[{alias:"imageSpec_60x60",args:[{kind:"Literal",name:"spec",value:"60x60"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t=[{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null}],storageKey:'images(spec:"60x60")'},{alias:"imageSpec_136x136",args:[{kind:"Literal",name:"spec",value:"136x136"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"136x136")'},{alias:"imageSpec_170x",args:[{kind:"Literal",name:"spec",value:"170x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"170x")'},{alias:"imageSpec_236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"236x")'},{alias:"imageSpec_474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"474x")'},{alias:"imageSpec_564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"564x")'},{alias:"imageSpec_736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"736x")'},{alias:"imageSpec_600x315",args:[{kind:"Literal",name:"spec",value:"600x315"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"600x315")'},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:t,storageKey:'images(spec:"orig")'}],type:"Pin",abstractKey:null};i.hash="b7ea441f2c20a68b323088ebe3847835",e.exports=i},269458:(e,t,i)=>{(window.__PWS_LOADED_HANDLERS__=window.__PWS_LOADED_HANDLERS__||{})["www/pin/[id]/visual-search"]=function(){return i(434788).Z}},361259:(e,t,i)=>{"use strict";i.d(t,{$:()=>u,r:()=>c});var l=i(667294),a=i(425288),n=i(497529),r=i(780280),s=i(829407),o=i(785893);let{Provider:d,useHook:u}=(0,a.Z)("PinRep");function c({children:e}){let{isAuthenticated:t}=(0,r.B)(),[i,a]=(0,l.useState)(!0),[u,c]=(0,l.useState)(!1),p=(0,n.Z)(1000069);(0,s.Z)(()=>{let e=async()=>{var e,i,l,n;if(!t){a(!1);return}let r=await p.fetchAllExperiences();r&&r.payload&&(null===(e=r.payload.experiences)||void 0===e?void 0:null===(i=e[1000069])||void 0===i?void 0:i.experience_id)===500417&&null!==(l=r.payload.experiences)&&void 0!==l&&null!==(n=l[1000069])&&void 0!==n&&n.display_data.hide_footer?p.viewExperience(1000069,500417):a(!1),c(!0)};e()});let m=(0,l.useMemo)(()=>({hasSimplifiedPinGridExpLoaded:u,hidePinRepFooter:i}),[u,i]);return(0,o.jsx)(d,{value:m,children:e})}},187638:(e,t,i)=>{"use strict";function l(e){switch(e){case"flashlight":return"flashlight";case"stela":return"stela";case"stl":return"stl";default:return null}}function a({isShopTheLook:e,showFlashlightButton:t,showShopButton:i,showStelaDots:l}){return t&&!l?"flashlight":i?e?"stl":"stela":null}i.d(t,{W:()=>l,Z:()=>a})},813982:(e,t,i)=>{"use strict";i.d(t,{Z:()=>m});var l=i(667294),a=i(883119),n=i(890921),r=i(407043),s=i(356997),o=i(898781),d=i(829407),u=i(865607),c=i(143649),p=i(785893);function m({cropSource:e,filterOptions:t,filterType:i,handleFilterChange:m,viewParameter:h,viewType:g,title:_}){let{logContextEvent:y}=(0,r.v)(),v=(0,o.ZP)(),f=(0,n.Z)(),[x]=(0,l.useState)(""),[S,b]=(0,l.useState)(!0),w=f?14325:13469,P=()=>{y({event_type:13,component:w,view_type:g,view_parameter:h,aux_data:{commerce_data:JSON.stringify({source:(0,c.Z)({cropSource:e,viewType:g})}),filter_type:i}})};(0,d.Z)(()=>{P()});let I=l=>{var a,n;let r=t[l];y({event_type:101,component:w,view_type:g,view_parameter:h,aux_data:{commerce_data:JSON.stringify({source:(0,c.Z)({cropSource:e,viewType:g}),filter_value:null!==(a=null!==(n=r.string_value)&&void 0!==n?n:r.numeric_value)&&void 0!==a?a:r.search_type,select:!r.checked}),filter_type:i}}),m(l)};return(0,p.jsxs)(l.Fragment,{children:[(0,p.jsx)(a.xu,{marginBottom:2,children:(0,p.jsxs)(a.kC,{alignItems:"center",justifyContent:"between",children:[(0,p.jsx)(a.xv,{weight:"bold",children:_||v._('Sellers', 'ProductFilters.Domains.HeaderText', 'Header of product domain filter containing filter options')}),(0,p.jsx)(a.xu,{flex:"none",children:(0,p.jsx)(a.hU,{accessibilityLabel:v._('Domain filter', 'accessibility label for the icon button to open or close domain filter', 'accessibility label for the icon button to open or close domain filter'),icon:S?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{b(!S),y({event_type:101,component:w,element:f?13522:11547,view_type:g,view_parameter:h,aux_data:{commerce_data:JSON.stringify({filter:S?"collapsed":"expanded"}),filter_type:i}}),S||P()},size:"sm"})})]})}),S?(0,p.jsx)(l.Fragment,{children:t.map((e,t)=>e.label.toLowerCase().includes(x.toLowerCase())&&(0,p.jsx)(a.iP,{onTap:()=>I(t),children:(0,p.jsxs)(a.xu,{alignItems:"center","data-test-id":"multi-select-option",direction:"row",display:"flex",marginBottom:3,children:[(0,p.jsx)(a.xu,{marginEnd:3,children:(0,p.jsx)(s.qE,{name:e.label||"",size:"sm",src:e.image_url})}),(0,p.jsxs)(a.kC,{alignItems:"center",direction:"row",flex:"grow",children:[(0,p.jsx)(a.xv,{children:e.label}),e.is_verified_merchant&&(0,p.jsx)(a.xu,{marginStart:1,children:(0,p.jsx)(u.Z,{isVerifiedMerchant:!0,size:"xs"})})]}),(0,p.jsx)(a.xu,{"data-test-id":e.checked?"option-selected":void 0,margin:-2,marginBottom:-3,marginTop:-3,children:(0,p.jsx)(a.hU,{accessibilityLabel:v._('Domain Filter Option', 'Accessibility label for radio button of domain filter choices', 'Accessibility label for radio button of domain filter choices'),icon:e.checked?"check-circle":"circle-outline",iconColor:"darkGray",onClick:()=>I(t),size:"lg"})})]})},e.label))}):(0,p.jsx)(a.xu,{width:"80%",children:(0,p.jsx)(a.xv,{color:"subtle",size:"200",children:function(e=[],t){let i=e.filter(e=>e.checked),l=i.length,a=0===l?t._('All', 'text indicates that no domain filter is currently applied for filtering', 'text indicates that no domain filter is currently applied for filtering'):`(${l}) ${i.map(e=>e.label).join(", ")}`;return a}(t,v)})})]})}},914917:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var l=i(667294),a=i(883119),n=i(479216),r=i(529518),s=i(780280),o=i(785893);function d(e,t,i,l){let a=(0,r.c3)((0,r.$X)(e,!!t),i,!!t);return l&&(a=a.slice(0,-3)),a}function u({valueInMicroCurrency:e,requestContext:t,currencyCode:i,disableAutoFormatOnChange:s,hasFractionalCents:u,roundValue:c,onValueParsed:p,autoComplete:m,placeholder:h,errorMessage:g,id:_}){let y=i&&n.XD[i]||"",v="";if("number"==typeof e){let i=d(e,u,t.locale,c);v=`${y}${i}`}let[f,x]=(0,l.useState)(v);(0,l.useEffect)(()=>{if(!s&&null!=e&&""===f){let i=d(e,u,t.locale,c);x(i)}},[f,s,u,t,c,e]);let S=(e,i,l,a)=>{let n="";if(null==e)n="";else{let i=d(e,l,t.locale,a);n=`${y}${i}`}return n},b=()=>{let e;let i=(0,r.qq)(f,t.locale,!!u);e=""===f?null:Number.isNaN(i)?Number.MIN_VALUE:(0,r.y)(i,!!u);let l=S(e,f,!!u,c);x(l),p(e)};return(0,o.jsx)(a.nv,{autoComplete:m,errorMessage:g,id:_,onBlur:()=>{b()},onChange:({value:e})=>x(e),placeholder:h,size:"lg",value:f})}function c(e){return(0,o.jsx)(u,{...e,requestContext:(0,s.B)()})}var p=i(898781);function m({CustomMaxField:e,CustomMinField:t,handleMaxChange:i,handleMinChange:n,maxHeading:r,minHeading:s,max:d,min:u}){let c=(0,p.ZP)();return(0,o.jsxs)(l.Fragment,{children:[(0,o.jsxs)(a.kC,{direction:"row",children:[(0,o.jsx)(a.sg,{span:7,children:(0,o.jsx)(a.xv,{size:"200",children:null!=s?s:c._('Min', 'rangeFilter.min', 'Minimum Range')})}),(0,o.jsx)(a.sg,{span:5,children:(0,o.jsx)(a.xv,{size:"200",children:null!=r?r:c._('Max', 'rangeFilter.max', 'Maximum Range')})})]}),(0,o.jsxs)(a.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"center",marginTop:2,children:[(0,o.jsx)(a.sg,{span:5,children:t?(0,o.jsx)(t,{value:u}):(0,o.jsx)(a.Ki,{autoComplete:"off",id:"min",onChange:({value:e})=>{n&&n(e)},size:"lg",value:u})}),(0,o.jsx)(a.sg,{span:2,children:(0,o.jsx)(a.xv,{align:"center",color:"subtle",size:"200",children:c._('to', 'Min to Max', 'Min to Max')})}),(0,o.jsx)(a.sg,{span:5,children:e?(0,o.jsx)(e,{value:d}):(0,o.jsx)(a.Ki,{autoComplete:"off",id:"max",onChange:({value:e})=>{i&&i(e)},size:"lg",value:d})})]})]})}var h=i(890921),g=i(407043),_=i(829407),y=i(143649);function v({cropSource:e,currencyCode:t,defaultMaxPrice:i,defaultMinPrice:r,disableAutoFormatOnChange:s,filterType:d,handleMaxPriceChange:u,handleMinPriceChange:v,maxPrice:f,minPrice:x,viewParameter:S,viewType:b,title:w}){let{logContextEvent:P}=(0,g.v)(),I=(0,p.ZP)(),T=(0,h.Z)(),k=n.XD[t]||"",E=Math.ceil(i),j=Math.floor(r),[A,F]=(0,l.useState)(!0),C=T?14324:13468,R=()=>{P({event_type:13,component:C,view_type:b,view_parameter:S,aux_data:{commerce_data:JSON.stringify({source:(0,y.Z)({cropSource:e,viewType:b})}),filter_type:d}})};(0,_.Z)(()=>{R()});let D=-1===x&&-1===f;return(0,o.jsxs)(l.Fragment,{children:[(0,o.jsxs)(a.kC,{alignItems:"center",justifyContent:"between",children:[(0,o.jsx)(a.xu,{"data-test-id":"price-filter-label",children:(0,o.jsx)(a.xv,{weight:"bold",children:w||I._('Price', 'Header of product price filter', 'Header of product price filter')})}),(0,o.jsx)(a.xu,{flex:"none",children:(0,o.jsx)(a.hU,{accessibilityLabel:I._('Price filter', 'accessibility label for the icon button to open or close price filter', 'accessibility label for the icon button to open or close price filter'),icon:A?"arrow-up":"arrow-down",iconColor:"darkGray",onClick:()=>{F(!A),P({event_type:101,component:C,element:T?13522:11547,view_type:b,view_parameter:S,aux_data:{commerce_data:JSON.stringify({filter:A?"collapsed":"expanded"}),filter_type:d}}),A||R()},size:"sm"})})]}),A?(0,o.jsx)(a.xu,{paddingY:4,children:(0,o.jsx)(m,{CustomMaxField:({value:e})=>(0,o.jsx)(a.xu,{"data-test-id":"max-price-filter",children:(0,o.jsx)(c,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:s,id:"max_price",onValueParsed:e=>{u((e||0)/1e6)},placeholder:`${k}${E}`,roundValue:!0,valueInMicroCurrency:D?null:e})}),CustomMinField:({value:e})=>(0,o.jsx)(a.xu,{"data-test-id":"min-price-filter",children:(0,o.jsx)(c,{autoComplete:"off",currencyCode:t,disableAutoFormatOnChange:s,id:"min_price",onValueParsed:e=>{v((e||0)/1e6)},placeholder:`${k}${j}`,roundValue:!0,valueInMicroCurrency:D?null:e})}),max:-1===f?1e6*E:1e6*f,maxHeading:I._('Max', 'Maximum Price', 'Maximum Price'),min:-1===x?1e6*j:1e6*x,minHeading:I._('Min', 'Minimum Price', 'Minimum Price')})}):(0,o.jsx)(a.xv,{color:"subtle",size:"200",children:-1===f&&-1===x?I._('All', 'text indicates that no price filter is currently applied for filtering', 'text indicates that no price filter is currently applied for filtering'):-1===f?`${k}${x}  ${k}${E}+`:-1===x?`${k}${j}  ${k}${f}`:`${k}${x}  ${k}${f}`})]})}},36022:(e,t,i)=>{"use strict";i.d(t,{$:()=>l,v:()=>a});let l=50,a={APPLIED:"applied",CLEARED:"cleared",MODIFIED:"modified",SUBMITTED:"submitted",FAILED:"failed"}},890921:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(773285),a=i(19121);function n(){let{isAuth:e,country:t}=(0,a.Z)(),{checkExperiment:i}=(0,l.F)();if(!e)return!1;let{anyEnabled:n}=i("web_search_unified_content_filters_international");return"US"===t||n}},180549:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var l=i(616550),a=i(883119),n=i(407043),r=i(558068),s=i(898781),o=i(785893);function d({arrowType:e,pinId:t,viewParameter:i,viewType:d}){let u=(0,s.ZP)(),c=(0,l.k6)(),{previous:p}=(0,r.Hv)(),{logContextEvent:m}=(0,n.v)();return(0,o.jsx)(a.xu,{"data-test-id":"go-back-button",children:(0,o.jsx)(a.hU,{accessibilityLabel:u._('Go back', 'Accessible icon for close button', 'Accessible icon for close button'),icon:null!=e?e:"directional-arrow-left",iconColor:"darkGray",onClick:()=>{if(m({event_type:101,view_type:d,element:34,view_parameter:i}),0===p.length){c.replace(`/pin/${t}/`);return}c.goBack()}})})}},363957:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(826067);function a(e){let t=(0,l.mB)(e.search),i=parseInt(t.x,10),a=parseInt(t.y,10),n=parseInt(t.w,10),r=parseInt(t.h,10),s=!function(...e){return e.every(Number.isInteger)}(i,a,n,r)?null:{x:i,y:a,w:n,h:r};return s}},862670:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var l,a=i(667294);i(167912);var n=i(485019),r=i(916117),s=i(223008),o=i(483205);let d=void 0!==l?l:l=i(161186);function u({pinKey:e}){let{data:t}=(0,r.u)(d,e),{getNormalizedPinImage:i}=(0,s.Z)({pinKey:t,maxWidth:o.RZ}),{width:l,height:u}=i(),c=(0,a.useCallback)(({initialCropArea:e})=>e||{x:n.S,y:n.S,w:l-2*n.S,h:u-2*n.S},[u,l]);return{getInitialCropArea:c}}},175644:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var l=i(667294),a=i(883119),n=i(407043),r=i(444445),s=i(745312),o=i(96939),d=i(8742),u=i(785893);function c({action:e,component:t,dangerouslySetActionUrl:i,element:c,contextLogData:p,id:m,objects:h,pwtTrackImageLoad:g,surface:_,viewType:y,viewParameter:v}){let{logContextEvent:f}=(0,n.v)(),x=null!=e&&e.url&&e.text?l=>(0,u.jsx)(o.Z,{coverImages:l.images,height:r.yF,onClick:()=>f({event_type:101,view_type:y,view_parameter:v,component:t,element:c,aux_data:{story_id:m,...p}}),text:e.text,url:null!=i?i:e.url,width:r.yF},"actionBubble"):null,{containerRef:S,itemsToRender:b,actionItem:w}=(0,s.n)({items:h,itemWidth:r.yF,itemGap:r.oX,actionItemType:x?"one":void 0});return(0,l.useEffect)(()=>{b.length>0&&g&&g()},[b,g]),(0,u.jsxs)(s.Z,{containerRef:S,itemGap:r.oX,children:[b.map((e,i)=>(0,u.jsx)(a.xu,{"data-grid-item":"true",flex:"none",width:r.yF,children:(0,u.jsx)(d.ZP,{authDesktopSurface:null!=_?_:"ShoppingDynamicHeightGrid",auxData:p,componentType:t,duploQueryRef:null,pin:e,pinId:e.id,pinImageCrop:{height:r.yF,width:r.yF},slotIndex:i,viewParameter:v,viewType:y})},e.id)),w&&(null==x?void 0:x(w))]})}},175892:(e,t,i)=>{"use strict";i.d(t,{Z:()=>K});var l=i(616550),a=i(883119),n=i(407043),r=i(704115),s=i(829407),o=i(667294),d=i(898781),u=i(390598),c=i(214494),p=i(186656),m=i(121151),h=i(499128),g=i(897243),_=i(349700),y=i(784590),v=i(343341),f=i(19121),x=i(487392),S=i(785352),b=i(833991),w=i(977558),P=i(35066),I=i(970023),T=i(785893);let k=new a.H3([new a.Ry(b.HW),new a.Ry(w.fe)]);function E({onFileUpload:e}){let t=(0,d.ZP)(),[i,l]=(0,o.useState)(!1),n=(0,o.useRef)(null),r=t._('Upload from computer', 'ProductGroupDetailsModal.uploadFromComputer', 'Dropdown label to upload image file from your computer');return(0,T.jsxs)(a.kC,{justifyContent:"center",children:[(0,T.jsx)(a.hU,{accessibilityExpanded:i,accessibilityHaspopup:!0,accessibilityLabel:t._('Upload product group cover image menu', 'ProductGroupDetailsModal.productGroupCoverImageA11y', 'Accessibility text for upload menu'),bgColor:"lightGray",icon:"edit",iconColor:"darkGray",onClick:()=>l(e=>!e),ref:n,size:"lg"}),i&&(0,T.jsx)(a.Lt,{anchor:n.current,id:"product-group-image-dropdown",onDismiss:()=>l(!1),disableMobileUI:!0,children:(0,T.jsx)(a.Lt.Item,{onSelect:()=>{l(!1),e()},option:{value:r,label:r}})})]})}function j({image:e,onFileUpload:t,onError:i}){let l=(0,d.ZP)(),n=l._('Product Group Cover Image', 'ProductGroupDetailsModal.productGroupCoverImageAlt', 'Alt text for product group cover image');return(0,T.jsxs)(a.xu,{position:"relative",children:[(0,T.jsx)(a.xu,{height:316,width:316,rounding:5,overflow:"hidden",children:(0,T.jsx)(a.Ee,{alt:n,color:"#EFEFEF",fit:"cover",naturalHeight:1,naturalWidth:1,src:e,onError:i})}),(0,T.jsx)(a.xu,{position:"absolute",top:!0,right:!0,padding:4,children:(0,T.jsx)(E,{onFileUpload:t})})]})}function A({onDismiss:e,onSubmit:t,productGroup:i}){var l,r,s;let{logContextEvent:u}=(0,n.v)(),b=(0,d.ZP)(),w=b._('Edit product group display', 'ProductGroupDetailsModal.heading', 'Modal title'),E=(0,f.Z)(),A=E.id||"",F=`/v3/business/users/${A}/storefront/product_group_image/`,[C,R]=(0,o.useState)(""),[D,O]=(0,o.useState)(""),[L,N]=(0,o.useState)(),[Z,M]=(0,o.useState)(),[K,z]=(0,o.useState)(!1),[H,U]=(0,o.useState)(0),[B]=(0,o.useState)(new Date().getTime()),G=i.groupType!==I.yh,{merchantId:$,advertiserId:V}=(0,x.Z)(),{showOneToast:W}=(0,v.F9)(),{updateStorefrontLastUpdated:Y}=(0,P.S)(),q=(0,S.I)({advertiserId:V,merchantId:$,productGroupsIds:[i.entityId],uniq:B},!1,!0),X=(0,y.Z)({name:"ApiResource",options:{url:F,data:{product_group_ids:[i.entityId]},uniq:B},noCache:!0}),Q=(0,o.useRef)(),J=Number(i.entityId),ee=null===(l=q.data)||void 0===l?void 0:l.find(e=>e.id===J),et=q.isLoaded&&X.isLoaded,ei=ee&&(C!==ee.name||D!==(ee.description||"")||!!L),el=ee&&C!==ee.name,ea=ee&&D!==(ee.description||""),en=et&&(((null===(r=X.data)||void 0===r?void 0:r[i.entityId])||{})[0]||{}),er=en?(0,I.cB)((0,g.b)(en)):null,es=(null===(s=i.previewPins)||void 0===s?void 0:s[0])||{},eo=es.imageSignature,ed=es.images&&(0,I.cB)(es.images),eu=Z||[er,ed].filter(e=>!!e)[H];(0,o.useEffect)(()=>{ee&&(R(ee.name||""),O(ee.description||""))},[ee]),(0,o.useEffect)(()=>{u({event_type:9854,component:13998})},[u]);let ec=()=>{e(),u({event_type:9856,component:13998})},ep=b._('Save', 'ProductGroupDetailsModal.SaveBtn', 'Button to save product group details changes'),em=b._('Cancel', 'ProductGroupDetailsModal.CancelBtn', 'Button to cancel product group details changes');return(0,T.jsx)(a.mh,{zIndex:k,children:(0,T.jsx)(m.ZP,{accessibilityModalLabel:w,align:"center",heading:w,onDismiss:ec,footer:et?(0,T.jsxs)(a.kC,{alignItems:"start",children:[(0,T.jsx)(a.xu,{width:"50%",children:(0,T.jsx)(a.xv,{size:"300",children:(0,_.nk)(b._('To edit items in this product group, visit {{catalogsLink}}', 'ProductGroupDetailsModal.coverImage', 'heading for cover image form'),{catalogsLink:(0,T.jsx)(a.rU,{href:"/product-catalogs",display:"inlineBlock",target:"blank",underline:"hover",children:(0,T.jsx)(a.xv,{weight:"bold",inline:!0,children:b._('Pinterest Catalogs', 'ProductGroupDetailsModal.catalogsLink', 'link for catalogs')})},"product-catalogs-link")})})}),(0,T.jsx)(a.xu,{width:"50%",children:(0,T.jsxs)(a.kC,{gap:{row:2,column:0},alignItems:"center",justifyContent:"end",children:[(0,T.jsx)(a.zx,{color:"gray",text:em,onClick:ec}),(0,T.jsx)(a.zx,{color:"red",text:ep,onClick:()=>{let l=er?L:L||eo,a=[],n=[];l&&(a.push((0,p.Z)({url:F,method:"PUT",data:{image_signatures:[l],product_group_id:i.entityId}})),n.push("cover_image")),(el||ea)&&(a.push(c.Z.create("ProductGroupsResource",{name:C,description:D,productGroupId:Number(i.entityId),filters:null==ee?void 0:ee.filter_v2}).callUpdate()),el&&n.push("name"),ea&&n.push("description")),u({event_type:9857,component:13998,aux_data:{product_group_modal_changes:n.join(",")}}),e(),Promise.all(a).then(()=>{t(),Y(new Date().getTime()),W(({hideToast:e})=>(0,T.jsx)("div",{className:"ProductGroupSavedToast",children:(0,T.jsx)(h.ZP,{duration:I.QE,onHide:e,text:b._('Product group saved', 'MerchantStorefront.ProductGroupDetailsModal.pgSaved', 'toast text')})}))})},disabled:!ei})]})})]},"product-group-details-footer"):(0,T.jsx)(o.Fragment,{}),size:G?"md":"sm",children:(0,T.jsx)(a.xu,{paddingX:8,marginBottom:2,children:et?(0,T.jsxs)(a.kC,{justifyContent:"center",children:[(0,T.jsxs)(a.xu,{width:320,children:[(0,T.jsx)(a.xu,{marginBottom:4,children:(0,T.jsx)(a.xv,{size:"300",weight:"bold",children:b._('Cover image', 'ProductGroupDetailsModal.coverImage', 'heading for cover image form')})}),(0,T.jsx)("input",{accept:"image/*","data-test-id":"cover-image",id:"product-group-image-upload",onChange:e=>{if(e.target instanceof HTMLInputElement){let t=e.target.files[0],i=new FileReader;t&&i.readAsDataURL(t),i.addEventListener("load",()=>{z(!0),u({event_type:9855,component:13998}),(0,p.Z)({url:F,method:"POST",data:{image_base64:i.result}}).then(e=>{var t;N(null===(t=e.resource_response.data)||void 0===t?void 0:t.image_signature),z(!1),"string"==typeof i.result&&M(i.result)})},!1)}},ref:Q,style:{display:"none"},type:"file"}),K&&(0,T.jsx)(a.xu,{height:316,width:316,rounding:5,color:"secondary",justifyContent:"center",direction:"column",display:"flex",children:(0,T.jsx)(a.$j,{accessibilityLabel:b._('Uploading product group cover image', 'ProductGroupDetailsModal.uploadingCoverImage', 'spinner accessibility label'),show:!0})}),!K&&eu&&(0,T.jsx)(j,{image:eu,onFileUpload:()=>{var e;null===(e=Q.current)||void 0===e||e.click()},onError:()=>U(H+1)})]}),G&&(0,T.jsxs)(a.xu,{width:320,marginStart:4,children:[(0,T.jsx)(a.xu,{marginBottom:4,children:(0,T.jsx)(a.xv,{size:"300",weight:"bold",children:b._('Title', 'ProductGroupDetailsModal.name', 'heading for product group name input')})}),(0,T.jsx)(a.nv,{id:"name",onChange:({value:e})=>R(e.slice(0,255)),size:"lg",type:"text",value:C}),(0,T.jsxs)(a.xu,{marginTop:2,marginBottom:4,height:30,children:[C&&(0,T.jsx)(a.xv,{size:"100",color:"subtle",children:b._('Changing your product group\'s name in your shop will also change its name in Catalogs', 'ProductGroupDetailsModal.pgName', 'subheading for name form')}),!C&&(0,T.jsx)(a.xv,{size:"100",color:"error",children:b._('This field can\'t be blank!', 'ProductGroupDetailsModal.nameEmptyError', 'error message for an empty name input')})]}),(0,T.jsx)(a.xu,{marginBottom:4,children:(0,T.jsx)(a.xv,{size:"300",weight:"bold",children:b._('Description', 'ProductGroupDetailsModal.description', 'heading for description form')})}),(0,T.jsx)(a.xu,{height:178,children:(0,T.jsx)(a.Kx,{id:"description",onChange:({value:e})=>O(e.slice(0,155)),placeholder:b._('Tell shoppers on Pinterest more about this product group', 'ProductGroupDetailsModal.descriptionPlaceholder', 'textarea placeholder for product group description'),value:D,rows:7})})]})]}):(0,T.jsx)(a.$j,{accessibilityLabel:b._('Loading product group details', 'ProductGroupDetailsModal.loadingSpinner', 'spinner accessibility label'),show:!0})})})})}let F=()=>{},C=({url:e,onClick:t,i18n:i})=>(0,T.jsx)(a.ZP,{accessibilityLabel:i._('Shop button', 'ProductGroupV2.shopButton.accessibilityLabel', 'Shop button for product group rep v2'),size:"lg",text:i._('Shop', 'ProductGroupV2.shopButton.text', 'Shop button text for product group rep v2'),color:"white",href:e,onClick:t}),R=({i18n:e})=>(0,T.jsx)(a.zx,{accessibilityLabel:e._('Shop button', 'ProductGroupV2.shopButton.accessibilityLabel', 'Shop button for product group rep v2'),size:"lg",text:e._('Shop', 'ProductGroupV2.shopButton.text', 'Shop button text for product group rep v2'),color:"white"});function D({onClick:e,productGroup:t,showControls:i,url:l}){var n,r;let s=(0,d.ZP)(),c=s._('Edit product group display', 'ProductGroupV2.editTooltip', 'Tooltip text for edit product group button'),[p,m]=(s._('Remove product group from shop', 'ProductGroupV2.removeTooltip', 'Tooltip text for remove product group button'),(0,o.useState)(!1)),[h,g]=(0,o.useState)(!1),_=!!(l&&e),{WIDTH:y,HEIGHT:v}=u.PRODUCT_GROUP_COVER_IMAGE_DIMENSIONS,f=y-64;return(0,T.jsxs)(a.xu,{position:"relative",onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1)},children:[(0,T.jsxs)(a.xu,{position:"relative",children:[(0,T.jsxs)(a.zd,{width:y,height:v,rounding:8,children:[(0,T.jsx)(u.Z,{productGroup:{coverImages:t.coverImages,groupType:t.groupType,previewPins:null===(n=t.previewPins)||void 0===n?void 0:n.map(e=>({imageSignature:e.imageSignature,images:e.images}))}}),(0,T.jsx)(a.xu,{position:"absolute",width:y,height:v,top:!0,dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)"}}})]}),(0,T.jsx)(a.xu,{position:"absolute",color:"selected",opacity:h?.5:0,width:y,height:v,rounding:8,top:!0})]}),i&&h&&(0,T.jsxs)(a.xu,{position:"absolute",top:!0,right:!0,padding:8,display:"flex",children:[(0,T.jsx)(a.xu,{marginEnd:0,children:(0,T.jsx)(a.u,{text:c,idealDirection:"down",children:(0,T.jsx)(a.hU,{accessibilityLabel:c,bgColor:"lightGray",icon:"edit",iconColor:"darkGray",onClick:({event:e})=>{e.stopPropagation(),e.preventDefault(),m(!0)},size:"xl"})})}),!1]}),(0,T.jsxs)(a.xu,{position:"absolute",bottom:!0,left:!0,padding:8,children:[(0,T.jsx)(a.xu,{marginBottom:5,maxWidth:f,children:(0,T.jsx)(a.X6,{size:"600",color:"inverse",lineClamp:2,children:t.name})}),h&&(0,T.jsx)(a.xu,{marginBottom:5,maxWidth:f,children:(0,T.jsx)(a.xv,{size:"300",color:"inverse",children:t.description})}),!_&&(0,T.jsx)(R,{i18n:s}),_&&(0,T.jsx)(C,{url:null!=l?l:"",onClick:null!=e?e:F,i18n:s})]}),i&&p&&(0,T.jsx)(A,{onDismiss:()=>m(!1),onSubmit:()=>m(!1),productGroup:{entityId:t.entityId,groupType:t.groupType,previewPins:null===(r=t.previewPins)||void 0===r?void 0:r.map(e=>({imageSignature:e.imageSignature,images:e.images}))}})]})}var O=i(717615),L=i(231947),N=i(151645),Z=i(436395),M=i(316674);function K({productGroup:e,slotIndex:t}){let{logContextEvent:i}=(0,n.v)(),{data:o}=(0,Z.Z)(),{search:d}=(0,l.TH)(),{pin:u}=(0,r.Z)(d),c=u?"pdp":"profile",p=null==o?void 0:o.username,m=function(){let{ownProfile:e}=function(){let{data:e}=(0,Z.Z)(),t=(0,f.Z)(),i=(0,N.Z)({user:e,viewer:t}),l=(0,O.Z)(),a=(0,L.q6)(t,null==e?void 0:e.id,l);return{isORBACProfileManager:a,ownProfile:i}}();return e}();if((0,s.Z)(()=>{var t;M.Z.StructuredFeed.ProductGroups.viewProductGroup({productGroupId:e.entityId,source:c,groupType:null!==(t=e.groupType)&&void 0!==t?t:"",componentType:13698},i)}),!p)return null;let h=`/${p}/_shop/${e.entityId}/`;return(0,T.jsx)(a.Tg,{href:h,onTap:()=>{var l;M.Z.StructuredFeed.ProductGroups.tapProductGroup({productGroupId:e.entityId,source:c,groupType:null!==(l=e.groupType)&&void 0!==l?l:"",componentType:13698,index:t},i)},children:(0,T.jsx)(D,{productGroup:e,showControls:m})})}},288562:(e,t,i)=>{"use strict";i.d(t,{M:()=>v,Z:()=>f});var l=i(667294),a=i(883119),n=i(180549),r=i(898781),s=i(349700),o=i(773285),d=i(994912),u=i(427806),c=i(785893);function p({title:e,variant:t}){let i=(0,r.ZP)(),{checkExperiment:n}=(0,o.F)(),{anyEnabled:p}=n("web_unified_visual_feed"),m={default:(0,s.nk)(i._('Shop {{ category }}', 'relatedProducts.stela.header', 'header for related products stela feed'),{category:(e||"").toLowerCase()}).join("").trim(),"unified-feed":(0,s.nk)(i._('{{ category }}', 'unifiedHeader.stela.header', 'header for related products stela feed'),{category:(0,d.Z)(e||"")}).join("").trim(),"closeup-shop":"","unified-feed-no-label":"","closeup-shop-idea-pin":i._('Shop similar items', 'relatedProducts.header', 'header for related products stela feed'),"related-products":"",flashlight:e,"shop-module":""},h={"closeup-shop":i._('Shop similar items', 'relatedProducts.header', 'header for related products stela feed'),"unified-feed":"","unified-feed-no-label":"","related-products":i._('More to shop', 'relatedProducts.header', 'header for related products feed'),"closeup-shop-idea-pin":i._('Shop similar items', 'relatedProducts.header', 'header for related products stela feed'),flashlight:"","shop-module":i._('Shop the look', 'shopTheLook.header', 'header for related products shop the look feed')},g=e?m[["flashlight","unified-feed","closeup-shop-idea-pin","shop-module"].includes(t)?t:"default"]:h[t];return(0,c.jsx)(l.Fragment,{children:g?(0,c.jsx)(a.X6,{accessibilityLevel:1,size:p&&"flashlight"!==t?"500":"400",children:g}):(0,c.jsx)(u.Z,{text:i._('Related products page', 'relatedProducts.unifiedFeed.accessibilityhiddenheading', 'accessibility label for related products page')})})}var m=i(407043),h=i(124580),g=i(780280),_=i(167234);function y({buttonText:e,handleDrawerClose:t,isDrawerOpen:i,onClick:l,largeSize:n=!1,reversed:s=!1,invertWhenDrawerIsOpen:o=!1,hasProductFiltersApplied:d=!1}){let u=(0,r.ZP)(),p=o&&i,m=(0,c.jsx)(a.JO,{accessibilityLabel:"",icon:"filter",color:p?"light":"dark"},"filterIcon"),h=e&&(0,c.jsx)(a.xv,{align:"center",color:p?"inverse":"default",weight:"bold",children:e},e);return(0,c.jsx)(a.iP,{onTap:()=>{i?t():l()},rounding:"pill",accessibilityLabel:u._('Filter', 'productsFilterButton', 'Button to filter products results'),children:(0,c.jsxs)(a.xu,{position:"relative",children:[(0,c.jsx)(a.xu,{display:"flex",justifyContent:"center",alignContent:"center",color:p?"dark":"secondary",rounding:"pill",minHeight:40,paddingX:4,dangerouslySetInlineStyle:n?{__style:{padding:"18px"}}:void 0,children:(0,c.jsx)(a.kC,{gap:{row:2,column:0},alignItems:"center",children:s?[h,m]:[m,h]})}),d&&(0,c.jsx)(a.xu,{alignItems:"center",color:"selected",dangerouslySetInlineStyle:{__style:{border:"2px solid white"}},display:"flex",height:14,justifyContent:"center",minWidth:14,position:"absolute",rounding:"pill",top:!0,right:!0})]})})}let v=60;function f({filtersText:e,handleDrawerClose:t,handleDrawerOpen:i,isDrawerOpen:r,isProductOnlyFeed:s,pinId:o,showFilter:d,title:u,variant:f,viewParameter:x,viewType:S}){let{logContextEvent:b}=(0,m.v)(),{isRTL:w}=(0,g.B)(),P=(0,l.useRef)(null);(0,l.useEffect)(()=>(d&&b({event_type:120,view_type:S,component:13467,element:11735,view_parameter:x}),P.current&&h.Z.addObstruction("top",P.current),()=>{P.current&&h.Z.removeObstruction("top",P.current)}),[d]);let I=()=>{b({event_type:101,view_type:S,component:13467,element:11735,view_parameter:x}),i&&i()};return(0,c.jsx)(_.Z,{position:"fixed",style:{width:"100%",zIndex:3,backgroundColor:"#ffffff"},children:(0,c.jsxs)(a.xu,{ref:P,alignItems:"center",color:"default","data-test-id":"related-products-header",display:"flex",height:v,justifyContent:"center",paddingY:4,position:"absolute",top:!0,width:"100%",children:[(0,c.jsx)(a.xu,{left:!w,marginStart:5,position:"absolute",right:w,children:(0,c.jsx)(n.Z,{arrowType:s?"directional-arrow-left":"cancel",pinId:o,viewParameter:x,viewType:S})}),(0,c.jsx)(p,{title:u,variant:f}),d&&"boolean"==typeof r&&I&&e&&t&&(0,c.jsx)(a.xu,{"data-test-id":"filter-button",left:w,marginEnd:12,position:"absolute",right:!w,children:(0,c.jsx)(y,{buttonText:e,handleDrawerClose:t,isDrawerOpen:r,onClick:I})})]})})}},377651:(e,t,i)=>{"use strict";i.d(t,{l:()=>ee,Z:()=>ei});var l,a,n=i(667294);i(167912);var r=i(616550),s=i(883119),o=i(187638),d=i(862670),u=i(865686),c=i(288562),p=i(352870),m=i(916117),h=i(276602),g=i(297852),_=i(785893);let y=void 0!==l?l:l=i(468852);function v({cropArea:e,description:t,surfaceType:i,height:l,imageSignature:a,imageUrl:n,pinKey:o,requestParams:d,trafficSource:u,viewParameter:c,width:v}){let f=(0,r.k6)(),x=(0,h.E)(),{data:S}=(0,m.u)(y,o);return(0,_.jsx)(s.xu,{"data-test-id":"flashlight-enabled-image",height:l,overflow:"hidden",rounding:4,width:v,children:(0,_.jsxs)(s.zd,{height:l,width:v,children:[(0,_.jsx)(s.Ee,{alt:t,naturalHeight:l,naturalWidth:v,onLoad:()=>{x&&x.markConstraintComplete("visualSearchMainPinImageRender")},src:n}),(0,_.jsx)(p.Z,{customCropper:({origCrop:e,cropSource:t,title:l})=>{let a=window.location.pathname+window.location.search,n=(0,g.Z)({cropArea:e,cropSource:t,isProductPage:!1,pinId:S.entityId,requestParams:d,surfaceType:i,title:l,trafficSource:u});n!==a&&f.replace(n)},imageSignature:a,imageSize:{h:l,w:v},initialCropArea:e,pinKey:S,showAnimation:!1,viewParameter:c})]})})}var f=i(407373),x=i(83053),S=i(647945),b=i(407043),w=i(223008),P=i(773285),I=i(42447),T=i(780280),k=i(483205),E=i(700380),j=i(430323),A=i(826067),F=i(280446),C=i(829407),R=i(307603),D=i(255164),O=i(975540),L=i(94047),N=i(985057),Z=i(873476),M=i(697335),K=i(12755),z=i(36022),H=i(813982),U=i(914917),B=i(898781),G=i(143649);function $({categoryFilters:e,cropSource:t,handleCategoryChange:i,viewParameter:l,viewType:a}){let{logContextEvent:r}=(0,b.v)(),o=(0,B.ZP)(),[d,u]=(0,n.useState)(!0);return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsxs)(s.kC,{alignItems:"center",justifyContent:"between",children:[(0,_.jsx)(s.xv,{weight:"bold",children:o._('Product category', 'filter.category.header', 'Header of product category filter containing filter options')}),(0,_.jsx)(s.xu,{flex:"none",children:(0,_.jsx)(s.hU,{icon:d?"arrow-up":"arrow-down",iconColor:"darkGray",accessibilityLabel:o._('Product category', 'filter.category.button', 'accessibility label for the icon button to open or close domain filter'),onClick:()=>{u(!d),r({event_type:101,component:13535,element:11547,view_type:a,view_parameter:l,aux_data:{commerce_data:JSON.stringify({filter:d?"collapsed":"expanded"})}}),d||r({event_type:13,component:13535,view_type:a,view_parameter:l,aux_data:{commerce_data:JSON.stringify({source:(0,G.Z)({cropSource:t,viewType:a})})}})},size:"sm"})})]}),d?(0,_.jsx)(n.Fragment,{children:e.slice(0,5).map((e,t)=>(0,_.jsxs)(s.xu,{alignItems:"center",marginBottom:3,display:"flex",direction:"row",children:[(0,_.jsx)(s.xu,{flex:"grow",children:(0,_.jsx)(s.xv,{children:e.label.charAt(0).toUpperCase()+e.label.slice(1)})}),(0,_.jsx)(s.xu,{children:(0,_.jsx)(s.hU,{icon:e.checked?"check-circle":"circle-outline",accessibilityLabel:o._('Category Filter Option', 'filter.category.option', 'Accessibility label for radio button of category filter choices'),onClick:()=>i(t),size:"sm",iconColor:"darkGray"})})]},e.label))}):(0,_.jsx)(s.xu,{width:"80%",children:(0,_.jsx)(s.xv,{size:"200",color:"subtle",children:function(e=[],t){let i=e.filter(e=>e.checked),l=i.length,a=0===l?t._('All', 'filter.category.applied', 'text indicates that no categories filter is currently applied for filtering'):`(${l}) ${i.map(e=>e.label).join(", ")}`;return a}(e,o)})})]})}var V=i(144226);function W(e,t){return e.filter(e=>e.checked).map(e=>e[t]).join(",")}function Y(e){return e.map(e=>({...e,checked:!1}))}function q({listOfAvailableFiltersFromAPI:e,appliedFilterValues:t,key:i,component:l,viewType:a,viewParameter:r}){let{logContextEvent:s}=(0,b.v)(),[o,d]=(0,n.useState)([]),[u,c]=(0,n.useState)(""),[p,m]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{if(e){let l=Y(e),a=t?function(e,t,i){if(e){let l=decodeURI(e).split(",");return t.map(e=>l.includes(e[i])?{...e,checked:!0}:e)}return t}(t,l,i):l;d(a);let n=W(a,i);c(n)}},[e,t,i]),{filters:o,setFilters:d,submittedFilters:u,submitFilters:function(e){e!==u&&s({event_type:7472,component:l,view_type:a,view_parameter:r}),c(e),m(!1)},isFilterChanged:p,clearFilters:()=>Y(o),getSelected:e=>W(e,i),handleFilterChange:function({index:e,pinId:t,auxCommerceData:n}){let c=!o[e].checked,p=[...o.slice(0,e),{...o[e],checked:c},...o.slice(e+1)];d(p),m(u!==W(p,i)),s({event_type:101,component:l,element:11548,view_type:a,view_parameter:r,aux_data:{pin_id:t,commerce_data:JSON.stringify({[i]:o[e][i],select:c,...n})}})}}}function X({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:l},a){let n=a._('Filters', 'Filter icon button to open drawer containing price filter and domain filters on related products feed', 'Filter icon button to open drawer containing price filter and domain filters on related products feed'),r=function({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:l}){let a=t?t.split(",").length:0,n=e?e.split(",").length:0;return(l||i?1:0)+a+n}({categoryFilters:e,domainFilters:t,minPrice:i,maxPrice:l}),s=r>0?` (${r})`:"";return`${n}${s}`}function Q({categoryFilters:e,cropSource:t,domainFilters:i,drawerHeight:l,handleFilterChange:a,onSubmit:r,pinId:o,priceFilters:d,submittedFilters:u,updateButtonText:c,width:p,viewParameter:m,viewType:h}){let{logContextEvent:g}=(0,b.v)(),y=(0,B.ZP)();(0,C.Z)(()=>{g({event_type:13,component:13467,view_type:h,view_parameter:m,aux_data:{commerce_data:JSON.stringify({source:(0,G.Z)({cropSource:t,viewType:h})})}})});let{category:v,domain:f,max:x,min:S}=u||{},{filters:w,setFilters:P,submittedFilters:I,submitFilters:T,isFilterChanged:k,clearFilters:E,getSelected:j,handleFilterChange:A}=q({listOfAvailableFiltersFromAPI:i,appliedFilterValues:f,key:"domain",component:13469,viewType:h,viewParameter:m}),{filters:F,setFilters:R,submittedFilters:D,submitFilters:O,isFilterChanged:L,clearFilters:N,getSelected:Z,handleFilterChange:M}=q({listOfAvailableFiltersFromAPI:e,appliedFilterValues:v,key:"label",component:13535,viewType:h,viewParameter:m}),[K,W]=(0,n.useState)(d),[Y,Q]=(0,n.useState)(-1),[J,ee]=(0,n.useState)(-1),[et,ei]=(0,n.useState)(-1),[el,ea]=(0,n.useState)(-1),[en,er]=(0,n.useState)(!1);(0,n.useEffect)(()=>{!d||x&&S||W(d),S&&ee(parseInt(S,10)),x&&Q(parseInt(x,10))},[d,x,S]);let{max_value:es,min_value:eo,currency_type:ed}=K||{},eu=e=>t=>{let i,l;let a=0>(t||0)?0:t;a&&g({event_type:7472,component:13468,view_type:h,view_parameter:m});let n=!1;"max"===e?(i=a||es,-1===(l=J)&&(l=eo),l>i&&(l=Math.max(i-z.$,0))):(l=a||0,-1===(i=Y)&&(i=es),i<l&&(i=l+z.$)),er(n=n||el!==l||et!==i),ee(l),Q(i)};(0,n.useEffect)(()=>{c&&c(X({categoryFilters:D,domainFilters:I,maxPrice:-1===Y?void 0:Y,minPrice:-1===J?void 0:J},y))},[y,Y,J,K,D,I,c]);let ec=({categoryParam:e,domainParam:t,maxPrice:i,minPrice:l})=>{a({categoryParam:e,domainParam:t,maxPrice:-1!==i?i:void 0,minPrice:-1!==l?l:void 0}),ei(i),ea(l),er(!1),(et!==i||el!==l)&&g({event_type:7472,component:13468,view_type:h,view_parameter:m}),T(t),O(e);let n=-1!==l,s=-1!==i,o=""!==t,d=""!==e,u=n?l.toString():"",p=s?i.toString():"",_=o?encodeURI(t):"",v=d?encodeURI(e):"";r&&r({category:v,domain:_,max:p,min:u}),c&&c(X({categoryFilters:e,domainFilters:t,maxPrice:-1===i?void 0:i,minPrice:-1===l?void 0:l},y))};return(0,_.jsxs)(n.Fragment,{children:[(0,_.jsxs)(s.xu,{display:"flex",direction:"column",overflow:"scroll",height:l-50-70,width:"100%",paddingX:1,paddingY:1,children:[(0,_.jsxs)(s.xu,{alignItems:"center",display:"flex",justifyContent:"between",marginBottom:3,children:[(0,_.jsx)(s.xv,{weight:"bold",children:y._('Filter', 'shopping.filter.header', 'Header for the types of filters')}),(0,_.jsx)(s.zx,{onClick:()=>{Q(-1),ee(-1),P(E()),R(N()),ec({categoryParam:"",domainParam:"",maxPrice:-1,minPrice:-1}),g({event_type:101,component:13467,element:11545,view_type:h,view_parameter:m})},size:"md",text:y._('Clear all', 'filter.clear.button', 'Button to clear all set filters on product group filters')})]}),!!K&&(0,_.jsx)(V.Z,{children:(0,_.jsx)(U.Z,{cropSource:t,currencyCode:ed,defaultMaxPrice:es,defaultMinPrice:eo,disableAutoFormatOnChange:!0,handleMaxPriceChange:eu("max"),handleMinPriceChange:eu("min"),maxPrice:Y,minPrice:J,viewParameter:m,viewType:h})}),!!F&&F.length>0&&4!==t&&(0,_.jsx)(V.Z,{children:(0,_.jsx)($,{cropSource:t,categoryFilters:F,handleCategoryChange:e=>{M({index:e,pinId:o})},viewParameter:m,viewType:h})}),!!w&&w.length>0&&(0,_.jsx)(V.Z,{children:(0,_.jsx)(H.Z,{cropSource:t,filterOptions:w,handleFilterChange:e=>{A({index:e,pinId:o,auxCommerceData:{source:(0,G.Z)({cropSource:t,viewType:h})}})},viewParameter:m,viewType:h})})]}),(0,_.jsx)(s.xu,{color:"default",display:"flex",justifyContent:"center",position:"fixed",width:p,children:(0,_.jsx)(s.xu,{display:"flex",direction:"row",paddingY:2,dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}},children:(0,_.jsx)(s.xu,{marginStart:2,children:(0,_.jsx)(s.sg,{span:6,children:(0,_.jsx)(s.zx,{size:"md",text:y._('Confirm', 'Button to submit all selected filter options', 'Button to submit all selected filter options'),type:"submit",disabled:!(k||L||en),color:"red",onClick:()=>{let e=j(w),t=Z(F);ec({categoryParam:t,domainParam:e,maxPrice:Y,minPrice:J}),g({event_type:101,component:13467,element:11546,view_type:h,view_parameter:m})}})})})})})]})}function J({categoryFilters:e,cropSource:t,domainFilters:i,isDrawerOpen:l,handleFilterChange:a,handleSubmit:r,pinId:o,priceFilters:d,submittedFilters:u,topOffset:c=0,updateButtonText:p,viewParameter:m=3455,viewType:h}){let g=(0,M.t)(),y=g+c,[v,f]=(0,n.useState)(0),x=()=>{f(window.innerHeight-g)};return(0,n.useEffect)(()=>(x(),window.addEventListener("resize",x),()=>{window.removeEventListener("resize",x)}),[]),(0,_.jsx)(s.xu,{color:"default",zIndex:new s.Ry(2),height:v,width:K.pG,paddingX:K.VF,position:"fixed",left:!0,dangerouslySetInlineStyle:{__style:{marginRight:l?0:-K.pG,visibility:l?"visible":"hidden",top:y}},children:(0,_.jsx)(Q,{categoryFilters:e,cropSource:t,domainFilters:i,drawerHeight:v,handleFilterChange:a,onSubmit:r,pinId:o,priceFilters:d,submittedFilters:u,width:K.pG-K.VF*K.vc*2,updateButtonText:p,viewParameter:m,viewType:h})})}let ee=65,et=void 0!==a?a:a=i(482495);function ei({pinKey:e}){let t=(0,r.k6)(),{logContextEvent:i}=(0,b.v)(),{checkExperiment:l}=(0,P.F)(),{isRTL:a}=(0,T.B)(),{data:p}=(0,m.u)(et,e),{id:h}=(0,r.UO)(),{pinId:y}=(0,F.Z)(h||""),z=(0,Z.Z)(),H=(0,r.TH)(),U=(0,A.mB)(H.search),{x:B,y:G,w:$,h:V,surfaceType:W,q:Y,rs:q,domain:X,full_feed_title:Q,category:ei,max:el,min:ea,requestParams:en}=U,er=(0,o.W)(W),es={category:ei,domain:X,min:ea,max:el},eo=(0,D.Z)(Number(U.cropSource)),ed=(0,N.Z)({x:B,y:G,w:$,h:V})?(0,R.Z)({x:B,y:G,w:$,h:V},!0):void 0,[eu,ec]=(0,n.useState)(ed),[ep,em]=(0,n.useState)(0),eh=(0,n.useCallback)(()=>H.pathname.includes("/products/"),[H]),[eg,e_]=(0,n.useState)(eh()),[ey,ev]=(0,n.useState)(void 0),[ef,ex]=(0,n.useState)(null),eS=(0,n.useRef)(null),[eb,ew]=(0,n.useState)(parseInt(ea,10)||null),[eP,eI]=(0,n.useState)(parseInt(el,10)||null),[eT,ek]=(0,n.useState)(X?decodeURI(X):null),[eE,ej]=(0,n.useState)(ei?decodeURI(ei):null),[eA,eF]=(0,n.useState)(!1),[eC,eR]=(0,n.useState)(""),eD=(0,n.useCallback)(()=>eF(!0),[]),eO=(0,n.useCallback)(()=>eF(!1),[]),{anyEnabled:eL}=l("web_unified_visual_feed"),{visualSearchFlashlightUnifiedResource:eN,visualSearchFlashlightUnifiedResource:{data:eZ},filters:eM,filters:{category_filters:eK,domain_filters:ez,price_filters:eH}={},searchId:eU,setSearchId:eB}=(0,S.Z)({resourceOptions:ey}),{description:eG,imageSignature:e$,isEligibleForRelatedProducts:eV}=p,eW=({minPrice:e,maxPrice:t,domainParam:i,categoryParam:l})=>{ew(e),eI(t),ek(i),ej(l)},eY=0,eq="",eX=eo||5,eQ=eg?"shopping":"flashlight";(0,n.useEffect)(()=>{let e=eh();e!==eg&&e_(e)},[eh,e_,eg]),(0,n.useEffect)(()=>{ef!==decodeURIComponent(Q)&&ex(Q?decodeURIComponent(Q):null)},[ex,ef,Q]);let{getInitialCropArea:eJ}=(0,d.Z)({pinKey:p});(0,C.Z)(()=>{if(!eu&&p){let e=eJ({initialCropArea:null}),i=(0,g.Z)({cropArea:e,cropSource:eX,isProductPage:eg,pinId:y,requestParams:en,searchQuery:Y,surfaceType:er,title:ef,trafficSource:q});t.replace(i)}}),(0,n.useEffect)(()=>(eS&&eS.current&&eq===y&&(eS.current.scrollTop=eY),()=>{eS&&eS.current&&(eY=eS.current.scrollTop,eq=y)}),[eS]),(0,n.useEffect)(()=>{((null==eu?void 0:eu.x)!==(null==ed?void 0:ed.x)||(null==eu?void 0:eu.y)!==(null==ed?void 0:ed.y)||(null==eu?void 0:eu.w)!==(null==ed?void 0:ed.w)||(null==eu?void 0:eu.h)!==(null==ed?void 0:ed.h))&&(ec({x:(null==ed?void 0:ed.x)||0,y:(null==ed?void 0:ed.y)||0,w:(null==ed?void 0:ed.w)||1,h:(null==ed?void 0:ed.h)||1}),eB(""))},[null==eu?void 0:eu.h,null==eu?void 0:eu.w,null==eu?void 0:eu.x,null==eu?void 0:eu.y,null==ed?void 0:ed.h,null==ed?void 0:ed.w,null==ed?void 0:ed.x,null==ed?void 0:ed.y,eB]);let e0=(0,E.Z)(()=>{window&&em(window.innerWidth)},100);(0,n.useEffect)(()=>{window&&em(window.innerWidth)},[]),(0,n.useEffect)(()=>(window&&window.addEventListener("resize",e0),()=>{window&&window.removeEventListener("resize",e0)}),[e0]);let e1=(p.visualObjects||[]).some(e=>e.isStela),e2="stl"===er,e4=eL&&!eg&&!e2,{getNormalizedPinImage:e6}=(0,w.Z)({pinKey:p,maxWidth:k.RZ});(0,n.useEffect)(()=>{if(p.entityId){let{width:e,height:t}=e6(),i=eJ({initialCropArea:eu});ev({categories:eE,crop:(0,O.Z)({cropArea:i,scaledWidth:e,scaledHeight:t}),crop_source:eX,domains:eT,entry_source:eQ,entrypoint:z,field_set_key:"shopping_grid_item",image_signature:p.imageSignature||void 0,is_shopping:eL?eg:e1,pin_id:p.entityId,price_max:eP,price_min:eb,request_params:en,source:q})}},[eE,eX,eT,eQ,z,eJ,e6,e1,eL,eu,eg,eP,eb,p.entityId,p.imageSignature,en,q]);let e3=eV||eg?427:72,e8=eX&&4===eX?3462:3455;if((0,C.Z)(()=>{p&&!eL&&i({event_type:13,view_type:e3,view_parameter:e8,view_data:{pin_id:y},aux_data:{commerce_data:JSON.stringify({entrypoint:eQ,pin_is_stela:e1})}})}),!p)return null;let{width:e7,height:e5,url:e9}=e6(),te=eJ({initialCropArea:eu}),tt=e7+20,ti=({category:e,domain:i,min:l,max:a})=>{t.replace({pathname:`/pin/${y}/visual-search/${eg?"products/":""}`,query:{...te,cropSource:eX,entrySource:eQ,rs:q,category:e,domain:i,min:l,max:a},search:(0,L.Z)({cropArea:te,cropSource:eX,requestParams:en,surfaceType:er,title:ef,trafficSource:q})})},tl=eg?ep:ep-tt,ta=(0,f.Z)(eM),tn=!eL||eL&&eg,tr=!eg;return(0,_.jsx)(I.Z,{constraints:["shoppingModuleRender","visualSearchMainPinImageRender"],measureGridVisuallyComplete:!0,surface:"visual_search",children:(0,_.jsx)(j.Z,{objectId:eU,view:e3,children:(0,_.jsxs)(s.xu,{"data-test-id":"related-products",children:[(0,_.jsx)(c.Z,{filtersText:eC,handleDrawerClose:eO,handleDrawerOpen:eD,isDrawerOpen:eA,isProductOnlyFeed:eg,pinId:y,showFilter:!e4&&ta,title:tn?ef:"",variant:function({hasLabel:e,isEligibleForRelatedProducts:t,isProductOnlyFeed:i,isShopEntryPoint:l,isUnifiedFeed:a}){return l?"shop-module":!e&&a?"unified-feed-no-label":i||t&&!a?"closeup-shop":t&&a?"unified-feed":"related-products"}({hasLabel:!!ef,isEligibleForRelatedProducts:eV,isProductOnlyFeed:eg,isShopEntryPoint:e2,isUnifiedFeed:eL}),viewParameter:e8,viewType:e3}),(0,_.jsx)(s.xu,{marginTop:2,children:(0,_.jsx)(M.c,{children:e=>(0,_.jsxs)(s.xu,{alignItems:"stretch",direction:"row",display:"flex",justifyContent:"start",marginTop:12,children:[ta&&(0,_.jsx)(J,{categoryFilters:eK,cropSource:eX,domainFilters:ez,handleFilterChange:eW,handleSubmit:ti,isDrawerOpen:eA,pinId:y,priceFilters:eH,submittedFilters:es,topOffset:c.M,updateButtonText:e=>{eR(e)},viewParameter:e8,viewType:e3}),tr&&(0,_.jsx)(s.xu,{ref:eS,bottom:!0,dangerouslySetInlineStyle:{__style:{top:e+ee+32,marginBottom:10,left:!a&&eA?K.pG:0,right:a?0:void 0}},height:"inherit",marginStart:!a&&eA?0:12,overflow:"auto",position:"fixed",width:tt,children:(0,_.jsx)(v,{cropArea:te,cropSource:eX,description:null!=eG?eG:"",height:e5,imageSignature:e$||"",imageUrl:e9,pinKey:p,requestParams:en,searchQuery:Y,surfaceType:er,trafficSource:q,viewParameter:e8,viewType:e3,width:e7})}),(0,_.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:(0,u.Z)({cropperWidth:tt,top:ee-16,isFilterOpened:eA,isProductOnlyFeed:eg,isRTL:a})},position:"relative",width:eA?tl-K.pG:tl,children:eZ&&(0,_.jsx)(x.Z,{isFilterOpened:eA,isProductOnlyFeed:eg,pinKey:p,surfaceType:er,viewParameter:e8,viewType:e3,visualSearchFlashlightUnifiedResource:eN})})]})})})]})})})}},83053:(e,t,i)=>{"use strict";i.d(t,{Z:()=>T});var l,a,n=i(667294);i(167912);var r=i(616550),s=i(883119),o=i(175644),d=i(785893);function u({title:e}){return(0,d.jsx)(s.xu,{dangerouslySetInlineStyle:{__style:{marginLeft:55}},"data-test-id":"unified-feed-subheader",display:"flex",justifyContent:"center",children:(0,d.jsx)(s.X6,{accessibilityLevel:2,size:"400",children:e})})}var c=i(773285),p=i(276602),m=i(861411);let h={flashlight:72,stela:427,stl:427};function g({pinId:e,surfaceType:t,visualSearchFlashlightUnifiedResource:i}){let l=(0,r.TH)(),{checkExperiment:a}=(0,c.F)(),g=(0,p.E)(),{data:_}=i,y=(null==_?void 0:_.results)||[],v=`/pin/${e}/visual-search/products/${l.search}`,f=t?h[t]:72,x=()=>{g&&g.markConstraintComplete("shoppingModuleRender")};return(0,d.jsx)(n.Fragment,{children:y.filter(e=>"story"===e.type).map((e,t)=>{if("story"===e.type){let{action:i,id:l,objects:n,story_type:r,title:c}=e;switch(r){case"unified_visual_feed_product_upsell":let p=c.format||"",h=a("web_product_pin_rep_redesign").anyEnabled;return(0,d.jsx)(m.qS,{auxData:{story_type:r},component:14339,loggingId:l,objectIdStr:l,slotIndex:t,viewParameter:3462,viewType:f,children:({impressionTrackerRef:e})=>(0,d.jsxs)(s.xu,{ref:e,children:[p&&(0,d.jsx)(u,{title:p}),(0,d.jsx)(s.xu,{"data-test-id":"unified-feed-stela-story",marginBottom:12,marginTop:4,children:(0,d.jsx)(o.Z,{action:i,component:14339,contextLogData:{story_type:r},dangerouslySetActionUrl:v,element:179,id:l,objects:n,pwtTrackImageLoad:x,surface:h?"ShoppingModule":void 0,viewParameter:3462,viewType:f})})]})},l);case"unified_visual_feed_organic_header":return(0,d.jsx)(m.qS,{auxData:{story_type:r},component:14339,loggingId:l,objectIdStr:l,slotIndex:t,viewParameter:3462,viewType:f,children:({impressionTrackerRef:t})=>(0,d.jsx)(s.xu,{ref:t,marginBottom:4,children:(0,d.jsx)(u,{title:e.title.format||""})})},l)}}return null})})}var _=i(407043),y=i(898781),v=i(700380),f=i(8742);function x({commerceData:e,isFilterOpened:t,isProductFeed:i,searchId:l,viewParameter:a,viewType:r,visualSearchFlashlightUnifiedResource:o}){let u=(0,y.ZP)(),{logContextEvent:c}=(0,_.v)(),[p,m]=(0,n.useState)(),[h,g]=(0,n.useState)(!1),x=(0,n.useRef)(null),S=(0,n.useRef)(null),b=(0,v.Z)(()=>{x.current&&m(x.current.getBoundingClientRect().y)},100);(0,n.useEffect)(()=>{var e;null===(e=S.current)||void 0===e||e.handleResize()},[t]),(0,n.useEffect)(()=>{if(!h)return window.addEventListener("scroll",b),()=>window.removeEventListener("scroll",b)}),(0,n.useEffect)(()=>{var e,t;let i=(null===(e=window)||void 0===e?void 0:e.innerHeight)||(null===(t=document.body)||void 0===t?void 0:t.clientHeight);!h&&p<i&&(g(!0),c({event_type:110,view_type:r,view_parameter:a}))},[p,c,h,g,r,a]);let{data:w,isFetching:P,fetchMore:I}=o,T=((null==w?void 0:w.results)||[]).filter(e=>"pin"===e.type);return(0,d.jsxs)(s.xu,{"data-test-id":"visual-search-feed",children:[(0,d.jsx)(s.xu,{ref:x,marginTop:2,children:(0,d.jsx)(s.Rk,{ref:S,items:T||[],loadItems:I,minCols:1,renderItem:({data:t,itemIdx:n})=>"pin"===t.type?(0,d.jsx)(f.ZP,{authDesktopSurface:i?"ShoppingDynamicHeightGrid":"SearchItem",auxData:{commerce_data:e},componentType:0,duploQueryRef:null,pin:t,pinId:t.id,slotIndex:n,viewData:{search_identifier:l},viewParameter:a,viewType:r}):null,scrollContainer:()=>window})}),(0,d.jsx)(s.kC,{alignItems:"stretch",justifyContent:"center",width:"100%",children:(0,d.jsx)(s.$j,{accessibilityLabel:u._('Loading visual search results', 'visualSearch.spinner.label', 'Accessibility label for spinner when loading the visual search results'),show:P})})]})}var S=i(916117),b=i(357998),w=i(829407),P=i(999018);let I=void 0!==l?l:l=i(966498);function T({isFilterOpened:e,isProductOnlyFeed:t,pinKey:l,surfaceType:r,viewParameter:s,viewType:o,visualSearchFlashlightUnifiedResource:u}){let{data:c}=(0,S.u)(I,l),{childDataKey__DEPRECATED:p}=(0,b.Q)(void 0!==a?a:a=i(74319),c,{useLegacyAdapter:e=>({})}),{logContextEvent:m}=(0,_.v)(),h="stl"===r,y=h||t,{data:v}=u,f=null==v?void 0:v.search_identifier,T={is_product_only_feed:y},k=(0,P.Z)(p);(0,w.Z)(()=>{m({event_type:13,view_type:o,view_parameter:s,aux_data:k({default:T})})});let{entityId:E}=c;return(0,d.jsxs)(n.Fragment,{children:[!h&&(0,d.jsx)(g,{pinId:E,surfaceType:r,visualSearchFlashlightUnifiedResource:u}),(0,d.jsx)(x,{commerceData:T,isFilterOpened:e,isProductFeed:y,searchId:f,viewParameter:s,viewType:o,visualSearchFlashlightUnifiedResource:u})]})}},407373:(e,t,i)=>{"use strict";function l(e){let{category_filters:t,domain_filters:i,price_filters:l}=e||{};return!!t||!!i||!!l}i.d(t,{Z:()=>l})},647945:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(667294),a=i(407373),n=i(784590);function r({resourceOptions:e,setFlashlightSearchId:t}){let[i,r]=(0,l.useState)(),[s,o]=(0,l.useState)(""),[d,u]=(0,l.useState)(),c=(0,n.Z)(e?{name:"VisualSearchFlashlightUnifiedResource",options:e}:null);return(0,l.useEffect)(()=>{let{data:e}=c,i=null==e?void 0:e.search_identifier;i&&(t?t(i):o(i)),r(e)},[t,c]),(0,l.useEffect)(()=>{let{data:e}=c,t=null==e?void 0:e.search_identifier,l=null==i?void 0:i.search_identifier;!e||t&&l&&t===l||(0,a.Z)(i)||!(0,a.Z)(e)||u({category_filters:e.category_filters,domain_filters:e.domain_filters,price_filters:e.price_filters})},[d,i,c]),{visualSearchFlashlightUnifiedResource:c,filters:d,searchId:s,setSearchId:o}}},865686:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(12755);function a({cropperWidth:e,top:t,isRTL:i,isFilterOpened:a,isFlashlightPage:n,isProductOnlyFeed:r}){let s=r?0:e+40,o=e+16,d={top:t,overflow:"auto"};return i?{...d,marginRight:n?o:s}:{...d,marginLeft:n?o:a?s+l.pG:s}}},362810:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var l=i(667294),a=i(883119),n=i(785893);function r({isTopRow:e,image:t}){var i,l,r;return(0,n.jsxs)(a.zd,{height:e?217:168,wash:!0,width:e?236:117,children:[(0,n.jsx)(a.Ee,{alt:t.alt||"",fit:"cover",naturalHeight:null!==(i=t.height)&&void 0!==i?i:1,naturalWidth:null!==(l=t.width)&&void 0!==l?l:1,src:null!==(r=t.url)&&void 0!==r?r:""}),!!t.price&&(0,n.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(255, 255, 255, 0.8)",borderRadius:"18px",color:"#111",fontSize:"10px",fontWeight:"600",lineHeight:"24px",padding:"06px"}},"data-test-id":"shopping-upsell-price",height:24,left:!0,margin:1,paddingX:2,paddingY:1,position:"absolute",top:!0,children:t.price})]})}var s=i(407043),o=i(356997),d=i(564194),u=i(310227),c=i(149230),p=i(841509),m=i(525199);let h={container:{borderRadius:`${u.Oc}px ${u.Oc}px 25px 25px`,WebkitMaskImage:"-webkit-radial-gradient(white, black)"},content:{marginBottom:"2px"},visualOverlay:{backgroundColor:"rgba(0, 0, 0, .1)"}},g=({images:e,firstImageIndex:t})=>{let i=t+1,l=t+2;return(0,n.jsxs)(a.xu,{overflow:"hidden",rounding:4,children:[(0,n.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:h.content},children:e.at(t)?(0,n.jsx)(r,{image:e[t],isTopRow:!0}):null}),e.length>l?(0,n.jsxs)(a.kC,{alignItems:"stretch",justifyContent:"between",children:[(0,n.jsx)(r,{image:e[i]}),(0,n.jsx)(r,{image:e[l]})]}):null]})};function _({dangerouslySetActionUrl:e,query:t,story:i,slotIndex:r}){let u,_,y,v;let{logContextEvent:f}=(0,s.v)(),{action:x,id:S,objects:b,story_type:w,subtitle:P}=i,{text:I,url:T}=x||{},[k,E]=(0,l.useState)(!1),j=(0,l.useCallback)(()=>E(!0),[E]),A=(0,l.useCallback)(()=>E(!1),[E]),F=(b||[]).reduce((e,t)=>{var i,l,a,n,r,s,o,d,u;return"pin"!==t.type?e:[...e,{domain:t.domain,image:{alt:t.title||t.description,height:null===(i=t.images)||void 0===i?void 0:null===(l=i["474x"])||void 0===l?void 0:l.height,url:null===(a=t.images)||void 0===a?void 0:null===(n=a["474x"])||void 0===n?void 0:n.url,width:null===(r=t.images)||void 0===r?void 0:null===(s=r["474x"])||void 0===s?void 0:s.width,price:null===(o=((null===(d=t.rich_summary)||void 0===d?void 0:null===(u=d.products)||void 0===u?void 0:u[0])||{}).offer_summary)||void 0===o?void 0:o.price}}]},[]),C=(F[0]||{}).domain||void 0,R={story_type:w};if(["search_product_collage_story","shop_article_story"].includes(w)?(u=2,_=43,R={...R,story_id:S,entered_query:t}):"shop_brand_story"===w||"shop_brand_affinity_story"===w?(u=1,_=92,C&&(R={...R,commerce_data:JSON.stringify({domain:C})})):["stela_in_flashlight_card","stela_in_flashlight_onecol"].includes(w)?(u=72,_=3050):"related_domain_collage"===w?(u=72,_=3455):"related_products_collage"===w&&(u=1,_=3177),["related_domain_collage","shop_brand_story","shop_brand_affinity_story"].includes(w)&&x){let e=x.user;y=e&&(e.image_medium_url||e.image_large_url),v=e&&e.full_name}let D=e||T;if(!D)return null;let O=(0,c.Z)({url:D})?"nofollow":"none";return(0,n.jsx)(d.Z,{componentType:200,contextLogData:R||{},impressionType:"Story",loggingId:w,slotIndex:r,viewParameter:_,viewType:u,children:(0,n.jsx)(a.Tg,{href:D,onTap:()=>f({event_type:101,element:372,component:200,view_type:u,view_parameter:_,aux_data:{story_type:w}}),rel:O,children:(0,n.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:h.container},onMouseEnter:j,onMouseLeave:A,overflow:"hidden",position:"relative",children:[(0,n.jsx)(g,{firstImageIndex:["related_domain_collage","related_products_collage"].includes(w)?1:0,images:F.map(({image:e})=>e)}),(0,n.jsx)(a.xu,{alignItems:"center",color:"secondary",display:"flex",justifyContent:"center",marginTop:2,paddingX:3,paddingY:P?4:2,rounding:"pill",children:(0,n.jsxs)(a.xu,{alignContent:"start",direction:"column",display:"flex",justifyContent:"center",margin:2,children:[P?(0,n.jsx)(a.xu,{marginBottom:1,children:(0,n.jsx)(a.xv,{align:"start",color:"subtle",children:P.format})}):null,(0,n.jsx)(a.xv,{align:"start",weight:"bold",children:I})]})}),v&&y&&(0,n.jsx)(a.xu,{margin:2,position:"absolute",right:!0,top:!0,children:(0,n.jsx)(o.qE,{name:v,outline:!0,size:"md",src:y})}),(0,n.jsx)(m.Z,{visibility:k?"visible":"none",children:(0,n.jsx)(p.Z,{additionalStyles:h.visualOverlay})})]})})})}},992061:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(883119),a=i(785893);function n({hovered:e,rounding:t}){return(0,a.jsx)(l.xu,{color:"transparentDarkGray",display:e?"block":"none",height:"100%",left:!0,opacity:.2,position:"fixed",rounding:t,top:!0,width:"100%",zIndex:new l.Ry(1)})}},27255:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l={AMP_TRACKING_DOMAIN:"amp.pinterest.com",BoardPrivacy:{SECRET:"secret",PUBLIC:"public",PROTECTED:"protected"},BoardType:{PROTECTED:"protected"},BulkAction:{MOVE:"bulkMove",COPY:"bulkCopy",CREATE_SECTION:"bulkCreateSection",DELETE:"bulkDelete"},MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION:500,MAX_CHARS_FOR_BOARD_TITLE:50,MAX_CHARS_FOR_FIRST_NAME:30,MAX_FETCH_NUM_FOLLOWERS_PER_PAGE:50,MAX_STORED_VISITED_PIN_PAGES:10,VIDEO_IFRAME_ID:"video-iframe"}},485019:(e,t,i)=>{"use strict";i.d(t,{S:()=>v,Z:()=>S});var l=i(667294),a=i(615071),n=i(883119),r=i(112690),s=i(785893);let o={nw:0,ne:90,se:180,sw:270},d={ne:[7,-7],se:[7,7],sw:[-7,7],nw:[-7,-7]},u={nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},c=(e,t,i,l)=>{if("rounded"!==l)return`translate(${t}, ${i}), rotate(${o[e]})`;{let[l,a]=d[e];return`translate(${t+l}, ${i+a}), rotate(${o[e]})`}};function p({corner:e,x:t,y:i,size:l,cornerStyle:a}){return(0,s.jsxs)("g",{style:{cursor:u[e]},transform:c(e,t,i,a),children:[(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:l,stroke:"none",width:l,x:0,y:0}),"rounded"===a?(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:"M16 0H24V8H16C11.5817 8 8 11.5817 8 16V24H0V16C0 7.16343 7.16345 0 16 0Z",fill:"#fff"}):(0,s.jsx)("path",{className:`v2cropperHandle ${e}`,d:`M ${l} 0 L 0 0 L 0 ${l}`,fill:"none",stroke:"#fff",strokeWidth:6})]})}let m={n:"ns-resize",s:"ns-resize",e:"ew-resize",w:"ew-resize"};function h({edge:e,x:t,y:i,w:l,h:a}){return(0,s.jsx)("rect",{className:`v2cropperHandle ${e}`,fill:"rgba(0,0,0,0)",height:a,stroke:"none",style:{cursor:m[e]},width:l,x:t,y:i})}function g({x:e,y:t,w:i,h:a}){let n="rounded";return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)(p,{corner:"nw",cornerStyle:n,size:20,x:e,y:t}),(0,s.jsx)(p,{corner:"ne",cornerStyle:n,size:20,x:e+i,y:t}),(0,s.jsx)(p,{corner:"sw",cornerStyle:n,size:20,x:e,y:t+a}),(0,s.jsx)(p,{corner:"se",cornerStyle:n,size:20,x:e+i,y:t+a}),(0,s.jsx)(h,{edge:"n",h:30,w:i-40,x:e+20,y:t-10}),(0,s.jsx)(h,{edge:"e",h:a-40,w:30,x:e+i-20,y:t+20}),(0,s.jsx)(h,{edge:"s",h:30,w:i-40,x:e+20,y:t+a-10}),(0,s.jsx)(h,{edge:"w",h:a-40,w:30,x:e-20,y:t+20})]})}var _=i(391254);function y(e,t,i){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var l=i.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let v=16,f=`
.preview-crop-area-enter {
  opacity: 0;
}

.preview-crop-area-enter-active {
  opacity: 1;
  transition: opacity 300ms;
}

.preview-crop-area-exit {
  opacity: 1;
}

.preview-crop-area-exit-active {
  opacity: 0;
  transition: opacity 300ms;
}

.preview-crop-area-exit-done {
  opacity: 0;
}
`;class x extends l.Component{constructor(...e){super(...e),y(this,"state",{cropArea:!!this.props.initialCropArea&&function({initialCropArea:e,imageSize:t}){let{x:i,y:l,w:a,h:n}=e,{h:r,w:s}=t;if(!r||!s)return e;let o=i,d=l,u=a,c=n;return o<v&&(o=v,u-=v-i),o+u>s-v&&(u-=o+u-s+v),d<v&&(d=v,c-=v-l),d+c>r-v&&(c-=d+c-r+v),{x:o,y:d,w:u,h:c}}({initialCropArea:this.props.initialCropArea,imageSize:this.props.imageSize})||{h:0,w:0,x:0,y:0},cropChangeType:null}),y(this,"cropResizeDirection",null),y(this,"_cropperOverlay",(0,l.createRef)()),y(this,"_checkCropHandleValid",(e,t)=>{let{cropArea:{h:i,w:l,x:a,y:n}}=this.state;switch(this.cropResizeDirection){case"ne":e<a&&t>n+i?this.cropResizeDirection="sw":e<a?this.cropResizeDirection="nw":t>n+i&&(this.cropResizeDirection="se");break;case"nw":e>a+l&&t>n+i?this.cropResizeDirection="se":e>a+l?this.cropResizeDirection="ne":t>n+i&&(this.cropResizeDirection="sw");break;case"se":e<a&&t<n?this.cropResizeDirection="nw":e<a?this.cropResizeDirection="sw":t<n&&(this.cropResizeDirection="ne");break;case"sw":e>a+l&&t<n?this.cropResizeDirection="ne":e>a+l?this.cropResizeDirection="se":t<n&&(this.cropResizeDirection="nw");break;case"n":t>n+i&&(this.cropResizeDirection="s");break;case"s":t<n&&(this.cropResizeDirection="n");break;case"e":e<a&&(this.cropResizeDirection="w");break;case"w":e>a+l&&(this.cropResizeDirection="e")}}),y(this,"handleOnMouseDown",e=>{var t;e.preventDefault(),e.stopPropagation();let{clientX:i,clientY:l}=e,{target:a}=e,n=i-this._cropperOverlayCoor.x,r=l-this._cropperOverlayCoor.y,s=a.classList?Array.from(a.classList):a instanceof Element&&(null===(t=a.getAttribute("class"))||void 0===t?void 0:t.split(" "))||[];s.includes("v2cropperHandle")?(this.setState({cropChangeType:"resize"}),s.includes("ne")&&(this.cropResizeDirection="ne"),s.includes("nw")&&(this.cropResizeDirection="nw"),s.includes("se")&&(this.cropResizeDirection="se"),s.includes("sw")&&(this.cropResizeDirection="sw"),s.includes("n")&&(this.cropResizeDirection="n"),s.includes("s")&&(this.cropResizeDirection="s"),s.includes("e")&&(this.cropResizeDirection="e"),s.includes("w")&&(this.cropResizeDirection="w")):s.includes("v2cropSection")?(this.setState({cropChangeType:"move"}),this.cropChangeStartCoor={x:n,y:r}):s.includes("v2shadowMask")&&(this.cropChangeStartCoor={x:n,y:r},this.setState({cropArea:{h:0,w:0,x:n,y:r},cropChangeType:"select"}))}),y(this,"handleOnMouseMove",e=>{var t,i,l,a,n,r;let{cropArea:{h:s,w:o,x:d,y:u},cropChangeType:c}=this.state,{imageSize:p}=this.props,{clientX:m,clientY:h}=e,g=m-this._cropperOverlayCoor.x,_=h-this._cropperOverlayCoor.y;if("resize"===c){let e=Math.max(Math.min(g,(null!==(t=p.w)&&void 0!==t?t:1)-v),v),l=Math.max(Math.min(_,(null!==(i=p.h)&&void 0!==i?i:1)-v),v);switch(this._checkCropHandleValid(e,l),this.cropResizeDirection){case"ne":{let t=Math.max(s+(u-l),48),i=Math.max(e-d,48);this.setState({cropArea:{h:t,w:i,x:d,y:t<=48?u:l}});break}case"nw":{let t=Math.max(o+(d-e),48),i=Math.max(s+(u-l),48);this.setState({cropArea:{h:i,w:t,x:48===t?d:e,y:48===i?u:l}});break}case"se":{let t=Math.max(l-u,48),i=Math.max(e-d,48);this.setState({cropArea:{h:t,w:i,x:d,y:u}});break}case"sw":{let t=Math.max(l-u,48),i=Math.max(o+(d-e),48);this.setState({cropArea:{h:t,w:i,x:48===i?d:e,y:u}});break}case"n":{let e=Math.max(u-l+s,48);this.setState({cropArea:{h:e,w:o,x:d,y:48===e?u:l}});break}case"s":{let e=Math.max(l-u,48);this.setState({cropArea:{h:e,w:o,x:d,y:u}});break}case"e":{let t=Math.max(e-d,48);this.setState({cropArea:{h:s,w:t,x:d,y:u}});break}case"w":{let t=Math.max(o-e+d,48);this.setState({cropArea:{h:s,w:t,x:48===t?d:e,y:u}})}}}else if("move"===c){let e=g-this.cropChangeStartCoor.x,t=_-this.cropChangeStartCoor.y,i=Math.max(Math.min(d+e,(null!==(l=p.w)&&void 0!==l?l:1)-o-v),v),n=Math.max(Math.min(u+t,(null!==(a=p.h)&&void 0!==a?a:1)-s-v),v);this.cropChangeStartCoor={x:g,y:_},this.setState({cropArea:{h:s,w:o,x:i,y:n}})}else if("select"===c){let e=Math.max(Math.min(g,null!==(n=p.w)&&void 0!==n?n:1),0),t=Math.max(Math.min(_,null!==(r=p.h)&&void 0!==r?r:1),0),i=e-this.cropChangeStartCoor.x,l=t-this.cropChangeStartCoor.y;this.setState({cropArea:{h:Math.abs(l),w:Math.abs(i),x:Math.min(this.cropChangeStartCoor.x,e),y:Math.min(this.cropChangeStartCoor.y,t)}})}}),y(this,"handleOnMouseUp",()=>{let{cropChangeType:e}=this.state;("resize"===e||"move"===e||"select"===e)&&this.handleCrop(),this.cropResizeDirection=null})}componentDidMount(){let{body:e}=document,t=this._cropperOverlay.current;if(t&&e){if(t){let e=t.getBoundingClientRect();this._cropperOverlayCoor={x:e.left,y:e.top}}window.addEventListener("mouseup",this.handleOnMouseUp),e.addEventListener("mousemove",this.handleOnMouseMove),t.addEventListener("mousedown",this.handleOnMouseDown)}}componentWillUnmount(){let{body:e}=document,t=this._cropperOverlay.current;t&&e&&(window.removeEventListener("mouseup",this.handleOnMouseUp),e.removeEventListener("mousemove",this.handleOnMouseMove),t.removeEventListener("mousedown",this.handleOnMouseDown))}handleCrop(){var e,t,i,l,a,n,r,s;let{imageSize:o,onChange:d,viewParameter:u,logContextEvent:c}=this.props,{cropChangeType:p,cropArea:m}=this.state;if(0===m.w&&0===m.h)this.setState({cropChangeType:null}),d({origCrop:{h:(null!==(e=o.h)&&void 0!==e?e:1)-2*v,w:(null!==(t=o.w)&&void 0!==t?t:1)-2*v,x:v,y:v}});else{let e,t;this.setState({cropChangeType:null});let h=Math.max(Math.min(m.x,(null!==(i=o.w)&&void 0!==i?i:1)-48-v),v),g=Math.max(Math.min(m.y,(null!==(l=o.h)&&void 0!==l?l:1)-48-v),v);switch(e=m.h<48?48:g+m.h>(null!==(a=o.h)&&void 0!==a?a:1)-v?(null!==(r=o.h)&&void 0!==r?r:1)-g-v:m.h,t=m.w<48?48:h+m.w>(null!==(n=o.w)&&void 0!==n?n:1)-v?(null!==(s=o.w)&&void 0!==s?s:1)-h-v:m.w,p){case"move":c({event_type:7603,view_type:72,view_parameter:u});break;case"resize":c({event_type:7604,view_type:72,view_parameter:u})}d({origCrop:{h:e,w:t,x:h,y:g}})}}render(){let{children:e,previewCropArea:t,showPreviewArea:i}=this.props,{cropArea:{h:l,w:r,x:o,y:d},cropChangeType:u}=this.state;return(0,s.jsxs)(n.xu,{ref:this._cropperOverlay,dangerouslySetInlineStyle:{__style:{cursor:"crosshair"}},"data-test-id":"visual-search-cropper",height:"100%",left:!0,position:"absolute",top:!0,width:"100%",children:[(0,s.jsx)(_.Z,{unsafeCSS:f}),(0,s.jsxs)("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},children:[(0,s.jsx)("defs",{children:(0,s.jsxs)("mask",{id:"Mask",children:[(0,s.jsx)("rect",{fill:"#fff",height:"100%",rx:"0",ry:"0",width:"100%",x:"0",y:"0"}),(0,s.jsx)("rect",{height:l,id:"hole",rx:0,ry:0,width:r,x:o,y:d},`${o}${d}`),(0,s.jsx)(a.Z,{classNames:"preview-crop-area",in:i&&!u,mountOnEnter:!0,timeout:300,unmountOnExit:!0,children:(0,s.jsx)("rect",{height:t.h,id:"preview",rx:4,ry:4,width:t.w,x:t.x,y:t.y},`${t.x}${t.y}`)})]})}),(0,s.jsx)("rect",{className:"v2shadowMask",height:"100%",mask:"url(#Mask)",style:{fill:"rgba(0,0,0,0.5)"},width:"100%",x:"0",y:"0"}),(0,s.jsx)("use",{className:"v2cropSection",fill:"rgba(0,0,0,0)",href:"#hole",stroke:"#fff",strokeWidth:"2",style:{cursor:"move"}}),"select"!==u&&(0,s.jsx)(g,{h:l,w:r,x:o,y:d})]}),e]})}}function S(e){let t=(0,r.Z)();return(0,s.jsx)(x,{logContextEvent:t,...e})}},403368:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var l=i(667294),a=i(883119),n=i(898781),r=i(785893);function s(e,t,i){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var l=i.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class o extends l.Component{constructor(...e){super(...e),s(this,"state",{isHovering:!1}),s(this,"handleMouseEnter",e=>{this.setState({isHovering:!0}),this.props.onMouseEnter&&this.props.onMouseEnter(e)}),s(this,"handleMouseLeave",e=>{this.setState({isHovering:!1}),this.props.onMouseLeave&&this.props.onMouseLeave(e)})}render(){let{forwardedRef:e,icon:t,onClick:i,onMouseDown:l,onMouseUp:n,selected:s,style:o,text:d,x:u,y:c,zIndex:p,backdropDiameter:m=32,dotDiameter:h=16}=this.props,{isHovering:g}=this.state,_=g?m+4:m;return(0,r.jsx)("div",{ref:e,"aria-label":this.props.i18n._('Search this item', 'flashlight.dot.a11ylabel', 'accessibility label for flashlight dot'),"data-test-id":"flashlight-dot",onClick:i,onKeyPress:i,onMouseDown:l,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave,onMouseUp:n,role:"button",style:{zIndex:p,position:"absolute",top:c-_/2,left:u-_/2,outline:"none"},tabIndex:"0",children:(0,r.jsxs)(a.xu,{alignItems:"center",borderStyle:"none",color:"default",dangerouslySetInlineStyle:{__style:{boxShadow:s?"0 0 0 3px #e60023":"none",borderRadius:h,top:(_-h)/2,left:(_-h)/2,...o}},"data-test-id":"flashlight-dot-style",display:"flex",height:h,justifyContent:"center",padding:0,position:"absolute",width:h,children:[!!d&&(0,r.jsx)(a.xv,{align:"center",color:"default",inline:!0,size:"100",weight:"bold",children:d}),t&&(0,r.jsx)(a.JO,{accessibilityLabel:this.props.i18n._('Tag anchor', 'accessibility label for an anchor for an object in a pin', 'accessibility label for an anchor for an object in a pin'),color:"error",icon:t,inline:!0,size:h/2})]})})}}let d=(0,l.forwardRef)((e,t)=>{let i=(0,n.ZP)();return(0,r.jsx)(o,{...e,forwardedRef:t,i18n:i})})},352870:(e,t,i)=>{"use strict";i.d(t,{Z:()=>I});var l,a,n,r=i(667294);i(167912);var s=i(616550),o=i(485019),d=i(112690),u=i(403368),c=i(829407),p=i(785893);function m({showAnimation:e,auxData:t,index:i,isStela:l,onClick:a,onHover:n,onUnhover:r,spotlightCenter:s,viewParameter:o,viewType:m}){let h=(0,d.Z)(),g=l?1221:1260;(0,c.Z)(()=>{h({event_type:120,element:g,aux_data:t,view_parameter:o,view_type:m})});let _=parseFloat((.1*(i+1)).toFixed(2)),y={animation:e?`spotlightDotPop 0.6s ease-out ${_}s both`:"none"};return(0,p.jsx)(u.Z,{onClick:e=>{e&&(e.stopPropagation(),e.preventDefault()),h({aux_data:t,element:g,event_type:101,view_parameter:o,view_type:m}),a(i)},onMouseEnter:e=>{e&&(e.stopPropagation(),e.preventDefault()),n(i)},onMouseLeave:e=>{e&&(e.stopPropagation(),e.preventDefault()),r()},style:y,x:s.x,y:s.y})}var h=i(916117),g=i(357998),_=i(391254),y=i(999018),v=i(599611);let f=`
@keyframes spotlightDotPop {
  0% {
    transform: scale(0);
  }

  100% {
    transform: scale(1);
  }
}`,x=void 0!==l?l:l=i(52892),S=({showAnimation:e,pinKey:t,imageSignature:l,imageSize:n,currentSpotlightIdx:s,handleSpotlightClick:o,handleSpotlightHover:d,handleSpotlightUnhover:u,viewParameter:c,viewType:S})=>{var b;let{data:w}=(0,h.u)(x,t),{childDataKey__DEPRECATED:P}=(0,g.Q)(void 0!==a?a:a=i(220890),w,{useLegacyAdapter:e=>({})}),I=(0,y.Z)(P),T=(null!==(b=w.visualObjects)&&void 0!==b?b:[]).filter(e=>e.isStela)||[];return(0,p.jsxs)(r.Fragment,{children:[(0,p.jsx)(_.Z,{unsafeCSS:f}),T.map((t,i)=>{var a,r;if(i===s)return null;let{x:h,y:g,w:_,h:y}=t,f=(0,v.Z)({cropArea:{x:h,y:g,w:_,h:y},scaledWidth:null!==(a=n.w)&&void 0!==a?a:0,scaledHeight:null!==(r=n.h)&&void 0!==r?r:0}),x={x:f.x+f.w/2,y:f.y+f.h/2},b={...I({override:{entrypoint:"flashlight"}}),pin_id:w.entityId,image_signature:l,visual_objects:JSON.stringify([{x:t.x,y:t.y,w:t.w,h:t.h}])},P=`${x.x}${x.y}`;return(0,p.jsx)(m,{auxData:b,index:i,isStela:!!t.isStela,onClick:o,onHover:d,onUnhover:u,showAnimation:e,spotlightCenter:x,viewParameter:c,viewType:S},P)})]})};var b=i(94047),w=i(297852);let P=void 0!==n?n:n=i(225785);function I({customCropper:e,imageSize:t,imageSignature:i,initialCropArea:l,pinKey:a,showAnimation:n,trafficSource:d,viewParameter:u,viewType:c}){let{data:m}=(0,h.u)(P,a),g=(0,s.k6)(),[_,y]=(0,r.useState)(!1),[f,x]=(0,r.useState)({w:0,h:0,x:0,y:0}),[I,T]=(0,r.useState)(0),k=(0,r.useMemo)(()=>{var e;return(null!==(e=m.visualObjects)&&void 0!==e?e:[]).filter(e=>e.isStela)||[]},[m.visualObjects]);(0,r.useEffect)(()=>{let e=k.findIndex(e=>{var i,a;let{x:n,y:r,w:s,h:o}=e;return function(e,t,i){let l=Object.keys(e).reduce((i,l)=>i+Math.abs(e[l]-t[l]),0);return l<=4}(l,(0,v.Z)({cropArea:{x:n,y:r,w:s,h:o},scaledWidth:null!==(i=t.w)&&void 0!==i?i:0,scaledHeight:null!==(a=t.h)&&void 0!==a?a:0}),0)});T(e)},[t,l,k]);let E=({origCrop:e,cropSource:t,trafficSource:i,title:l})=>{let{entityId:a}=m,n=window.location.pathname+window.location.search,r=(0,w.Z)({cropArea:e,cropSource:null!=t?t:6,isProductPage:!1,pinId:a,title:l,trafficSource:i,surfaceType:"flashlight"});r!==n&&(g.replace(r),g.replace({pathname:`/pin/${a}/visual-search/`,search:(0,b.Z)({cropArea:e,cropSource:null!=t?t:6,title:l,trafficSource:i,surfaceType:"flashlight"}),state:{internalNavigation:!0}}))},j=k&&!!k.length;return(0,p.jsx)(o.Z,{imageSize:t,initialCropArea:l,onChange:null!=e?e:E,previewCropArea:f,showPreviewArea:!1,viewParameter:u,children:j&&(0,p.jsx)(S,{currentSpotlightIdx:I,handleSpotlightClick:i=>{var l,a;let n=k[i],{x:r,y:s,w:o,h:u}=n,c=(0,v.Z)({cropArea:{x:r,y:s,w:o,h:u},scaledWidth:null!==(l=t.w)&&void 0!==l?l:0,scaledHeight:null!==(a=t.h)&&void 0!==a?a:0}),p={origCrop:c,cropSource:n.isStela?4:1,trafficSource:d,title:n.title||""};e?e(p):E(p)},handleSpotlightHover:e=>{if(e!==I){var i,l;y(!0);let{x:a,y:n,w:r,h:s}=k[e];x((0,v.Z)({cropArea:{x:a,y:n,w:r,h:s},scaledWidth:null!==(i=t.w)&&void 0!==i?i:0,scaledHeight:null!==(l=t.h)&&void 0!==l?l:0}))}},handleSpotlightUnhover:()=>{y(!1)},imageSignature:i,imageSize:t,pinKey:m,showAnimation:n,viewParameter:u,viewType:c})},JSON.stringify(l))}},310227:(e,t,i)=>{"use strict";i.d(t,{Dv:()=>n,Ml:()=>r,Oc:()=>l,mv:()=>a});let l=16,a=4,n={SAVED:"rgba(0, 0, 0, 0.33)",VISUAL:"rgba(0, 0, 0, 0.1)",LEGO_WASH:"rgba(0, 0, 0, 0.4)"},r=120},483205:(e,t,i)=>{"use strict";i.d(t,{I6:()=>a,Nv:()=>l,RZ:()=>n,ZG:()=>o,b9:()=>s,s0:()=>r});let l=44,a=24,n=446,r=.05,s=36,o=20},754320:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var l=i(667294),a=i(883119),n=i(407043),r=i(643010),s=i(444445),o=i(898781),d=i(905031),u=i(50286),c=i(785893);let p=({contentIds:e,previewImageSrc:t,url:i,buttonText:p,imageWidth:m,isInMobileCarousel:h,slideWidth:g,shape:_="square",storyId:y,storyType:v,view:f,viewParameter:x,component:S,element:b})=>{let w="square"===_?4:"circle",P=null!=m?m:s.yF,I=(0,d.Z)()?s.tG:P,T=(0,u.HG)(),k=(0,r.vs)(),{logContextEvent:E}=(0,n.v)(),j=(0,o.ZP)(),A=(0,l.useMemo)(()=>!Number.isNaN(f)&&!Number.isNaN(x)&&!Number.isNaN(S)&&!Number.isNaN(b),[f,x,S,b]),F="lg";return h&&g&&(F=g>150?"lg":g>135&&g<=150?"md":"sm"),(0,l.useEffect)(()=>{A&&E({event_type:120,view_type:f,view_parameter:x,component:S,element:b,aux_data:{content_ids:e,story_id:y,story_type:v}})},[e,E,f,x,S,b,A,y,v]),(0,c.jsx)(a.xu,{"data-test-id":"sf-action-item-rep",children:(0,c.jsx)(a.xu,{color:"secondary",height:h?g:I,overflow:"hidden",rounding:w,width:h?g:I,children:(0,c.jsx)(a.zd,{height:"100%",rounding:w,wash:!0,width:"100%",children:(0,c.jsx)(a.Ee,{alt:j._('Action Item Rep Preview Image', 'actionItemRep.image', 'alt text for a preview image image in action item'),color:"#fff",fit:"cover",naturalHeight:50,naturalWidth:50,src:t,children:(0,c.jsx)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0,0,0,0.3)"}},display:"flex",height:"100%",justifyContent:"center",left:!0,top:!0,width:"100%",children:(0,c.jsx)(a.ZP,{color:k?"gray":"white",href:i,onClick:()=>{A&&E({event_type:T?101:102,view_type:f,view_parameter:x,component:S,element:b,aux_data:{content_ids:e,story_id:y,story_type:v}})},size:F,text:p})})})})})})}},701865:(e,t,i)=>{"use strict";i.d(t,{Z:()=>j});var l=i(667294),a=i(616550),n=i(883119),r=i(407043),s=i(366428),o=i(992061),d=i(444445),u=i(898781),c=i(608760),p=i(215292),m=i(785893);function h({item:e={},imagePlaceholderColor:t=c.hK,onTap:i}){var a,r;let s=(0,u.ZP)(),h=null==e?void 0:null===(a=e.cover_images)||void 0===a?void 0:a[0],g=null==h?void 0:h["236x"];return(0,m.jsx)(n.iP,{onTap:i,children:(0,m.jsxs)(l.Fragment,{children:[(0,m.jsx)(p.q,{children:({hovered:e,onMouseEnter:i,onMouseLeave:l})=>(0,m.jsx)(n.xu,{"data-test-id":"category-bubble",marginBottom:2,onMouseEnter:i,onMouseLeave:l,children:(0,m.jsxs)(n.zd,{height:d.yF,rounding:"circle",wash:!0,width:d.yF,children:[(0,m.jsx)(o.Z,{hovered:e,rounding:"circle"}),(0,m.jsx)(n.Ee,{alt:s._('Image previewing contents of an item', 'itemRep.userRep.previewImage', 'alt text for an image previewing the contents of an item'),color:t,fit:"cover",naturalHeight:d.yF,naturalWidth:d.yF,src:(null==g?void 0:g.url)||""})]})})}),(null==e?void 0:null===(r=e.title)||void 0===r?void 0:r.format)&&(0,m.jsx)(n.xu,{width:d.yF,children:(0,m.jsx)(n.xv,{align:"center",weight:"bold",children:e.title.format})})]})})}var g=i(752802),_=i(57427),y=i(327651),v=i(641968),f=i(50286);let x=["170x","192x","200x","236x"];var S=i(668916);let b="pill";var w=i(642345),P=i(48125),I=i(429091),T=i(180910);let k=()=>{},E={2:h,3:function({item:e={},onTap:t}){let i=(0,u.ZP)(),l=null==e?void 0:e.identifier_icon_type,{icon:a,text:r}=function(e,t){switch(e){case 2:return{icon:"workflow-status-all",text:t._('Categories', 'NavigationBubble.NavigationIcon.utils', 'Categories navigation button text')};case 3:return{icon:"shopping-bag",text:t._('Stores', 'ExploreArticleRep.NavigationBubble.utils', 'Stores navigation button text')};case 4:return{icon:"terms",text:t._('Your items', 'ExploreArticleRep.NavigationBubble.utils', 'Your items navigation button text')};default:return{icon:null}}}(l,i);return(0,m.jsx)(n.iP,{onTap:t,rounding:a?5:b,tapStyle:"compress",children:(0,m.jsx)(p.q,{children:({active:t,hovered:i,onMouseEnter:l,onMouseLeave:s,onFocus:u,onBlur:c})=>{var p,h,g;return(0,m.jsxs)(n.xu,{"data-test-id":"navigation-bubble",onBlur:c,onFocus:u,onMouseEnter:l,onMouseLeave:s,rounding:5,children:[a&&(0,m.jsxs)(n.zd,{height:85,rounding:5,wash:!0,width:85,children:[(0,m.jsx)(o.Z,{hovered:i}),(0,m.jsx)(n.xu,{alignItems:"center",color:"secondary",display:"flex",height:"100%",justifyContent:"center",padding:2,width:"100%",children:(0,m.jsx)(n.JO,{accessibilityLabel:r||"",color:"default",icon:a,size:32})})]}),r&&(0,m.jsx)(n.xu,{marginTop:2,width:85,children:(0,m.jsx)(n.xv,{align:"center",weight:"bold",children:r})}),!a&&!r&&(null==e?void 0:null===(p=e.title)||void 0===p?void 0:p.format)&&(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:null===(h=e.aux_fields)||void 0===h?void 0:h.button_background_color}},rounding:b,children:(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:t&&"rgba(0, 0, 0, 0.15)"||i&&"rgba(0, 0, 0, 0.06)"||void 0}},padding:4,rounding:b,children:(0,m.jsx)(n.xv,{align:"center",color:(null===(g=e.aux_fields)||void 0===g?void 0:g.button_text_color)==="#ffffff"?"inverse":"default",weight:"normal",children:(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap",textOverflow:"ellipsis"}},maxWidth:d.yF-16,overflow:"hidden",children:e.title.format})})})})]})}})})},1:function({item:e={},onTap:t}){var i;let l=(0,u.ZP)(),a=null==e?void 0:null===(i=e.cover_images)||void 0===i?void 0:i[0],r=null==a?void 0:a["236x"];return(0,m.jsx)(n.iP,{onTap:t,rounding:3,tapStyle:"compress",children:(0,m.jsx)(p.q,{children:({hovered:t,onMouseEnter:i,onMouseLeave:a})=>{var s;return(0,m.jsx)(n.xu,{"data-test-id":"search-bubble",onMouseEnter:i,onMouseLeave:a,rounding:3,children:(0,m.jsxs)(n.zd,{height:150,rounding:3,wash:!0,width:300,children:[(0,m.jsx)(o.Z,{hovered:t}),(0,m.jsx)(n.Ee,{alt:l._('Image previewing contents of an item', 'itemRep.userRep.previewImage', 'alt text for an image previewing the contents of an item'),fit:"cover",naturalHeight:150,naturalWidth:300,role:"presentation",src:(null==r?void 0:r.url)||"",children:(0,m.jsx)(n.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:150,justifyContent:"center",padding:3,position:"absolute",top:!0,width:300,children:(null==e?void 0:null===(s=e.title)||void 0===s?void 0:s.format)&&(0,m.jsx)(n.X6,{color:"inverse",size:"400",children:e.title.format})})})]})})}})})},4:function({item:e,onTap:t,slotIndex:i}){let{action:l,aux_fields:a,cover_images:r,dominant_colors:s,title:o}=e;if(!o||!r||!l)return null;let d=r.length<=0?[{}]:r.slice(0,2);return(0,m.jsx)(n.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,m.jsxs)(n.xu,{alignItems:"center","data-test-id":"style-bubble",display:"flex",height:258,justifyContent:"center",overflow:"hidden",position:"relative",rounding:4,width:I.u,children:[(0,m.jsx)(n.kC,{children:d.map((e,t)=>{var l,a,r;return(0,m.jsx)(n.zd,{height:258,wash:!0,width:I.u/d.length,children:(0,m.jsx)(n.Ee,{alt:"",color:(s||[])[t],fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:(null===(l=e["474x"])||void 0===l?void 0:l.url)||(null===(a=e["736x"])||void 0===a?void 0:a.url)||(null===(r=e["236x"])||void 0===r?void 0:r.url)||""})},`styleCarousel_bubble${i}_pin${t}`)})}),(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:null==a?void 0:a.button_background_color}},paddingX:4,paddingY:3,position:"absolute",rounding:"pill",children:(0,m.jsx)(n.xv,{align:"center",weight:"bold",children:(0,m.jsx)("span",{style:{color:null==a?void 0:a.button_text_color,margin:"0"},children:o.format})})})]})})},13:({item:e={},onTap:t})=>{var i,l,a,r;let s=(0,u.ZP)(),o=(0,f.HG)(),c=null===(i=e.action)||void 0===i?void 0:i.url;if(!c)return null;let p=e.curator||{},h=p.full_name||"",S=p.username||"",b=p.image_medium_url||"",w=(null===(l=p.verified_identity)||void 0===l?void 0:l.verified)||!1,P=p.is_verified_merchant||!1,[I={},T={}]=e.cover_images||[],k=(null===(a=(0,g.Z)({images:I,resolutionPreferences:x}))||void 0===a?void 0:a.url)||"",E=(null===(r=(0,g.Z)({images:T,resolutionPreferences:x}))||void 0===r?void 0:r.url)||"",j=o?d.yF:d.tG;return(0,m.jsxs)(n.xu,{"data-test-id":"default-brand-article",width:j,children:[(0,m.jsx)(n.Tg,{accessibilityLabel:"",href:c,onTap:t,rounding:3,children:(0,m.jsxs)(n.xu,{height:157,children:[(0,m.jsx)(n.zd,{height:157,rounding:4,wash:!0,width:j,children:k&&E&&(0,m.jsxs)(n.kC,{children:[(0,m.jsx)(_.Z,{height:157,src:k,width:j/2}),(0,m.jsx)(n.xu,{color:"default",width:1}),(0,m.jsx)(_.Z,{height:157,src:E,width:j/2})]})}),(0,m.jsx)(n.xu,{display:"flex",justifyContent:"center",marginTop:-8,children:(0,m.jsx)(y.Z,{color:"gray",fullName:h||S,size:64,src:b||""})})]})}),(0,m.jsx)(n.xu,{height:40}),h&&(0,m.jsx)(v.Z,{isDomainVerified:w,isVerifiedMerchant:P,name:h}),(0,m.jsx)(n.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:2,width:"100%",children:(0,m.jsx)(n.ZP,{accessibilityLabel:s._('Navigate to a feed of products from this brand', 'StructuredFeed.ItemReps.ExploreArticleRep.DefaultBrandArticle.linkAccessibilityLabel', 'Accessibility label on a brand article that leads to a feed of products from that brand'),href:c,size:"lg",text:s._('Shop', 'StructuredFeed.ItemReps.ExploreArticleRep.DefaultBrandArticle.ButtonText', 'Text on a button under a brand article that leads to a feed of products from that brand')})})]})},19:function({item:e,onTap:t}){let i=(0,f.HG)(),{action:l,cover_images:a,dominant_colors:r,title:s,subtitle:o}=e,d=null==s?void 0:s.format;if(!d||!a||!l)return null;let u=i?200:150,c=i?T.KW:T.hk,p=i?T.d:T.Gd,h=(null==o?void 0:o.format)||"",_=a.slice(0,3);return(0,m.jsx)(n.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,m.jsxs)(n.xu,{"data-test-id":"triple-preview-display-card",rounding:4,width:p,children:[(0,m.jsx)(n.zd,{height:u,rounding:4,wash:!0,width:p,children:(0,m.jsx)(n.kC,{alignItems:"stretch",justifyContent:"start",children:_.map((e,t)=>{var i;let l=(null===(i=(0,g.Z)({images:e,resolutionPreferences:["200x","236x","400x"]}))||void 0===i?void 0:i.url)||"";return(0,m.jsx)(n.xu,{height:u,width:c,children:(0,m.jsx)(n.Ee,{alt:"",color:(r||[])[t],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:l})},l)})})}),(0,m.jsxs)(n.xu,{marginTop:4,children:[(0,m.jsx)(n.kC,{justifyContent:"center",children:(0,m.jsx)(n.xv,{align:"center",size:"400",weight:"bold",children:d})}),h&&(0,m.jsx)(n.xu,{display:"flex",justifyContent:"center",marginTop:1,children:(0,m.jsx)(n.xv,{align:"center",color:"subtle",size:i?"200":"100",children:h})})]})]})})},20:function({item:e,onTap:t}){let i=(0,f.HG)(),{action:l,cover_images:a,aux_fields:r,title:s,subtitle:o,dominant_colors:d=[]}=e,u=(null==s?void 0:s.format)||"",{background_color:c}=r||{};if(!u||!a||!l||!c)return null;let p=i?P.m:P.d,h=i?186:160,_=i?126:108,y=i?137:118,v=i?92:80,x=(null==o?void 0:o.format)||"",S=a.slice(0,3).map(e=>{var t;return(null===(t=(0,g.Z)({images:e,resolutionPreferences:["200x","236x","400x"]}))||void 0===t?void 0:t.url)||""}),b=(0,w.zI)(c)?"light":"dark";return(0,m.jsx)(n.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:c}},"data-test-id":"stacked-collage-display-card",height:p,overflow:"hidden",rounding:4,width:p,children:(0,m.jsxs)(n.xu,{height:p,padding:2,position:"relative",children:[(0,m.jsxs)(n.xu,{marginBottom:3,marginTop:4,children:[(0,m.jsx)(n.kC,{justifyContent:"center",children:(0,m.jsx)(n.xv,{align:"center",color:b,lineClamp:1,size:"400",weight:"bold",children:u})}),x&&(0,m.jsx)(n.xu,{display:"flex",justifyContent:"center",marginTop:1,children:(0,m.jsx)(n.xv,{align:"center",color:b,lineClamp:1,size:"100",children:null==o?void 0:o.format})})]}),(0,m.jsx)(n.xu,{bottom:!0,left:!0,position:"absolute",children:(0,m.jsx)(n.zd,{height:y,rounding:4,wash:!0,width:v,children:(0,m.jsx)(n.xu,{height:y,width:v,children:(0,m.jsx)(n.Ee,{alt:"",color:d[1],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:S[1]})})})}),(0,m.jsx)(n.xu,{bottom:!0,position:"absolute",right:!0,children:(0,m.jsx)(n.zd,{height:y,rounding:4,wash:!0,width:v,children:(0,m.jsx)(n.xu,{height:y,width:v,children:(0,m.jsx)(n.Ee,{alt:"",color:d[2],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:S[2]})})})}),(0,m.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{bottom:"-22px"}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,children:(0,m.jsx)(n.zd,{height:h,rounding:4,wash:!0,width:_,children:(0,m.jsx)(n.xu,{height:h,width:_,children:(0,m.jsx)(n.Ee,{alt:"",color:d[0],fit:"cover",naturalHeight:200,naturalWidth:200,role:"presentation",src:S[0]})})})})]})})})},21:function({item:e,onTap:t}){var i,l,a;let{cover_images:r,dominant_colors:s,title:o}=e;if(!o||!r)return null;let d=r[0];return(0,m.jsx)(n.iP,{onTap:t,rounding:4,tapStyle:"compress",children:(0,m.jsx)(n.xu,{borderStyle:"shadow",color:"default",height:189,overflow:"hidden",position:"relative",rounding:4,width:S.H,children:(0,m.jsx)(n.xu,{bottom:!0,left:!0,position:"absolute",right:!0,top:!0,children:(0,m.jsx)(n.Ee,{alt:"",color:(s||[])[0],fit:"cover",naturalHeight:1,naturalWidth:1,role:"presentation",src:(null===(i=d["474x"])||void 0===i?void 0:i.url)||(null===(l=d["736x"])||void 0===l?void 0:l.url)||(null===(a=d["236x"])||void 0===a?void 0:a.url)||"",children:(0,m.jsx)(n.xu,{alignItems:"end",dangerouslySetInlineStyle:{__style:{background:"linear-gradient(180deg, rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.4) 100%)"}},display:"flex",height:"100%",paddingX:3,paddingY:3,width:"100%",children:(0,m.jsx)(n.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",width:"100%",children:(0,m.jsx)(n.xv,{align:"start",color:"light",size:"300",weight:"bold",children:o.format})})})})})})})}};function j(e){var t,i;let{component:o,slotIndex:d,item:u,showExpandedHeader:c,story:p,view:g,viewParameter:_}=e,{display_options:y,story_type:v,id:f,content_ids:x}=p||{},{logContextEvent:S}=(0,r.v)(),b=(0,a.k6)(),w=null==u?void 0:u.id,P=(0,l.useMemo)(()=>({story_type:v,story_id:f,content_ids:x,article_id:w}),[w,x,f,v]),I=(0,s.Z)({componentType:o,contextLogData:P,impressionType:"Article",loggingId:w,objectIdStr:w,slotIndex:d,viewParameter:_,viewType:g}),T=c?null==y?void 0:null===(t=y.item_view_rep_style)||void 0===t?void 0:t.expanded_explore_article_rep_style:null==y?void 0:null===(i=y.item_view_rep_style)||void 0===i?void 0:i.explore_article_rep_style,{action:j}=u||{},{url:A=""}=j||{},F=Object.hasOwnProperty.call(E,T)?E[T]:h,C=c?k:()=>{b.push(A),S({event_type:101,component:o,view_type:g,view_parameter:_,aux_data:P})};return(0,m.jsx)(n.xu,{ref:I,children:(0,m.jsx)(F,{...e,onTap:C})})}},668916:(e,t,i)=>{"use strict";i.d(t,{H:()=>l});let l=252},48125:(e,t,i)=>{"use strict";i.d(t,{d:()=>l,m:()=>a});let l=216,a=258},429091:(e,t,i)=>{"use strict";i.d(t,{u:()=>l});let l=369},180910:(e,t,i)=>{"use strict";i.d(t,{Gd:()=>n,KW:()=>a,d:()=>r,hk:()=>l});let l=108,a=124,n=3*l,r=3*a},232921:(e,t,i)=>{"use strict";i.d(t,{lf:()=>a,wg:()=>n,xR:()=>l});let l=299,a=270,n=232},981228:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var l=i(667294),a=i(883119),n=i(407043),r=i(34518);let s=e=>e?r.a$:r.Ql;function o(e,t,i){return{backgroundColor:`rgba(${e.join(", ")}, ${s(i||t)})`,marginRight:t?"2px":"0px",marginLeft:t?"2px":"0px"}}var d=i(232921),u=i(785893);let c={MOBILE:{HEIGHT_PX:64,WIDTH_PX:48},SMALL:{HEIGHT_PX:72,WIDTH_PX:54},DEFAULT:{HEIGHT_PX:96,WIDTH_PX:72},LARGE:{HEIGHT_PX:130,WIDTH_PX:98}},p=(e,t,i)=>{let l;switch(i){case"MOBILE":l={0:{transform:"rotate(-15deg)",top:"6px",left:"16px"},1:{transform:"rotate(0deg)",top:"3px",left:"30px"},2:{transform:"rotate(15deg)",top:"6px",left:"44px"}};break;case"SMALL":l={0:{transform:t?"rotate(-22deg)":"rotate(-15deg)",top:"12px",left:"12px"},1:{transform:t?"rotate(1deg)":"rotate(0deg)",top:t?"6px":"10px",left:"26px"},2:{transform:t?"rotate(24deg)":"rotate(15deg)",top:"12px",left:"40px"}};break;case"LARGE":l={0:{transform:t?"rotate(-26deg)":"rotate(-15deg)",top:"50px",left:"44px"},1:{transform:t?"rotate(1deg)":"rotate(0deg)",top:t?"36px":"40px",left:"68px"},2:{transform:t?"rotate(26deg)":"rotate(15deg)",top:"56px",left:"98px"}};break;default:l={0:{transform:t?"rotate(-22deg)":"rotate(-15deg)",top:"20px",left:"64px"},1:{transform:t?"rotate(1deg)":"rotate(0deg)",top:t?"10px":"14px",left:"82px"},2:{transform:t?"rotate(24deg)":"rotate(15deg)",top:"20px",left:"100px"}}}let a=l[e];return a.border="1px solid #FFFFFF",a.transition="all 150ms ease-out",a};function m({fanOut:e,card:t,index:i,size:l}){let n;let r=c[l],{height:s=r.HEIGHT_PX,url:o,width:d=r.WIDTH_PX,colorRGB:m,opacity:h}=t;return o?n=(0,u.jsx)(a.Ee,{alt:o,fit:"cover",naturalHeight:s,naturalWidth:d,src:o}):m&&h&&(n=(0,u.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:`rgba(${m.join(", ")}, ${h})`}},height:r.HEIGHT_PX,width:r.WIDTH_PX})),(0,u.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:p(i,e,l)},position:"absolute",rounding:5,children:(0,u.jsx)(a.zd,{height:r.HEIGHT_PX,rounding:5,wash:!0,width:r.WIDTH_PX,children:n})})}function h(){return(0,u.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{backgroundColor:"rgba(0, 0, 0, 0.03)"}},left:!0,position:"absolute",right:!0,rounding:r.N3,top:!0})}var g=i(605706),_=i(50286);let y={1:function(e){var t;let{pinCards:i,isClicked:l,isHovered:n,item:s={},story:c}=e,p=(0,_.HG)(),y=(0,g.Z)(),v=c&&(null===(t=c.objects)||void 0===t?void 0:t.length),{board_name:f,header_text:x,top_image_dominant_color_rgb:S}=s,b=l?106:110,w=l?d.xR-4:d.xR;p||(b=90,w=1===v?"100%":y?d.wg:d.lf);let P=155;return p||(P=y?108:148),(0,u.jsxs)(a.xu,{dangerouslySetInlineStyle:{__style:o(S,l,n)},display:"flex",height:b,paddingY:2,position:"relative",rounding:r.N3,width:w,children:[(0,u.jsx)(h,{}),(0,u.jsx)(a.xu,{position:"relative",width:p?112:100,children:i.map((e,t)=>(0,u.jsx)(m,{card:e,fanOut:n||l,index:t,size:p?"SMALL":"MOBILE"},t))}),(0,u.jsxs)(a.xu,{direction:"column",display:"flex",justifyContent:"center",marginStart:p?2:3,width:P,children:[(0,u.jsx)(a.xv,{size:p?"200":"100",children:x}),(0,u.jsx)(a.xv,{lineClamp:2,size:"400",weight:"bold",children:f})]})]})},3:function(e){let{pinCards:t,isClicked:i,isHovered:l,item:n}=e,{board_name:s,top_image_dominant_color_rgb:d}=n;return(0,u.jsxs)(a.xu,{alignItems:"end",dangerouslySetInlineStyle:{__style:o(d,i,l)},display:"flex",height:i?165:169,justifyContent:"center",paddingX:4,paddingY:3,position:"relative",rounding:r.N3,width:i?232:236,children:[(0,u.jsx)(h,{}),t.map((e,t)=>(0,u.jsx)(m,{card:e,fanOut:l||i,index:t,size:"DEFAULT"},t)),(0,u.jsx)(a.xv,{align:"center",lineClamp:1,size:"200",weight:"bold",children:s})]})},4:function(e){var t;let{logContextEvent:i}=(0,n.v)(),{pinCards:l,isHovered:s,item:d,view:c,viewParameter:p}=e,{action:g,board_name:_,header_text:y,ideas_deep_link_url:v,top_image_dominant_color_rgb:f}=d,x=null!==(t=null==g?void 0:g.url)&&void 0!==t?t:v.concat("?ideas_referrer=25");return(0,u.jsxs)(a.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:o(f,!1,s)},direction:"column",display:"flex",justifyContent:"end",marginBottom:6,minHeight:377,paddingX:4,paddingY:8,position:"relative",rounding:r.N3,width:236,children:[l.map((e,t)=>(0,u.jsx)(m,{card:e,fanOut:s,index:t,size:"LARGE"},t)),(0,u.jsx)(a.xu,{height:168,width:"100%"}),(0,u.jsx)(h,{}),(0,u.jsxs)(a.kC,{alignItems:"stretch",direction:"column",height:"100%",justifyContent:"end",children:[(0,u.jsxs)(a.xu,{alignItems:"center",direction:"column",display:"flex",marginBottom:5,marginTop:5,children:[(0,u.jsx)(a.xu,{marginBottom:1,children:(0,u.jsx)(a.xv,{size:"200",weight:"bold",children:y})}),(0,u.jsx)(a.xv,{align:"center",size:"500",weight:"bold",children:_})]}),(0,u.jsx)(a.xu,{display:"flex",justifyContent:"center",marginTop:1,position:"relative",width:"100%",children:(0,u.jsx)(a.ZP,{color:"white",href:x,onClick:({event:e})=>{e.stopPropagation(),i({event_type:101,view_type:c,view_parameter:p,component:14268,element:13002,object_id_str:d.board_id})},size:"lg",text:"Explore"})})]})]})}},v=["100%","60%"];function f(e){var t,i;let{component:s,isInViewOrNext:o,item:{action:d,board_id:c,ideas_deep_link_url:p,images:m,image_dominant_color_rgb:h},slotIndex:g,story:f={},view:x,viewParameter:S}=e,{logContextEvent:b}=(0,n.v)(),w=(0,_.ZP)(),{display_options:P,objects:I}=f,T=null==I?void 0:I.length,[k,E]=(0,l.useState)(!1),[j,A]=(0,l.useState)(!1),[F,C]=(0,l.useState)(!1);(0,l.useEffect)(()=>{if("desktop"===w){let e=setTimeout(()=>C(!0),700);return()=>{clearTimeout(e)}}},[w]);let R=[],D="desktop"!==w?r.mS:r.S$;(o||"desktop"!==w)&&(R=F?[...m[D]]:[m[D][0]]);let O=3-R.length;for(let e=0;e<O;e+=1)R.push({colorRGB:h,opacity:v[e]});R.reverse();let L=null==P?void 0:null===(t=P.item_view_rep_style)||void 0===t?void 0:t.more_ideas_rep_style,N=y[L],Z=s||r.kx[L],M=null!==(i=null==d?void 0:d.url)&&void 0!==i?i:p.concat("?ideas_referrer=25");return N&&(0,u.jsx)(a.Tg,{href:M,onMouseDown:()=>A(!0),onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),onTap:()=>b({event_type:101,view_type:x,view_parameter:S,component:Z,element:13002,object_id_str:c,aux_data:{index:g,total_object_count:T}}),children:(0,u.jsx)(N,{isClicked:j,isHovered:k,pinCards:R,...e})})}},34518:(e,t,i)=>{"use strict";i.d(t,{N3:()=>l,Ql:()=>a,S$:()=>r,a$:()=>n,kx:()=>o,mS:()=>s});let l=4,a=.35,n=.5,r="170x",s="136x136",o={1:14114,3:14074,4:14268}},988874:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var l=i(616550),a=i(883119),n=i(444445),r=i(91885),s=i(477802),o=i(826067),d=i(50286),u=i(8742),c=i(785893);let p=new Set(["shopping_module_closeup","product_pins","shopping_list","shop_tab_upsell"]),m=new Set(["product_tagged_shopping_module_upsell"]),h=e=>null!=e&&e.shop_source||p.has(null==e?void 0:e.story_type)?"ShoppingDynamicHeightGrid":"StoryFeedNonProduct";function g(e){var t,i,p;let{pins_display:g}=(0,o.mB)((0,l.TH)().search),{component:_,isInMobileCarousel:y,imageWidth:v,item:f,saveButtonOptions:x,slideWidth:S,slotIndex:b,story:w,surface:P,view:I,viewParameter:T}=e,k=null!=v?v:n.yF,E="desktop"===(0,d.ZP)(),j=E?k:n.tG;if(!f)return null;let{story_type:A,id:F,content_ids:C,display_options:R,user:D}=w||{},{pins_display:O}=(null==R?void 0:R.content_display)||{},{id:L,debug:N}=f,Z=![3,1].includes(null!=O?O:Number(g)),M={story_type:A,story_id:F,content_ids:C},K=P||h(w),z={auxData:M,componentType:null!==(t=null==w?void 0:null===(i=w.display_options)||void 0===i?void 0:null===(p=i.content_display)||void 0===p?void 0:p.component_type)&&void 0!==t?t:_,impressionData:M,pinId:L,slotIndex:b,viewData:{pin_id:L},viewParameter:T,viewType:I},H={authDesktopSurface:K,disableHover:!E,pin:f,pinImageCrop:Z?{height:j,width:j}:null,saveButtonOptions:x,pinOwner:m.has(A)&&D?D:null},U=(0,c.jsxs)(a.xu,{"data-test-id":r.Kb,children:[(0,c.jsx)(u.ZP,{...z,...H,duploDisablePinCardPadding:y,duploIsSquarePin:Z,duploQueryRef:null,trafficSource:"ShoppingDynamicHeightGrid"===K?"shop_feed":void 0}),N&&(0,c.jsx)(s.Wu,{data:N})]});return Z?(0,c.jsx)(a.xu,{flex:"none",width:y?S:j,children:U},L):U}},57427:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(883119),a=i(785893);function n({height:e,width:t,src:i}){return(0,a.jsx)(l.xu,{height:e,width:t,children:(0,a.jsx)(l.Ee,{alt:"",color:"lightGray",fit:"cover",naturalHeight:e,naturalWidth:t,role:"presentation",src:i})})}},456183:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y});var l=i(667294),a=i(616550),n=i(883119),r=i(407043),s=i(366428),o=i(444445),d=i(327651),u=i(641968),c=i(608760),p=i(785893);let m=.4*o.yF,h=.75*o.yF;var g=i(57427);let _={5:({item:e,imagePlaceholderColor:t=c.hK})=>{let{username:i,image_large_url:l,full_name:a,domain_verified:r=!1,is_verified_merchant:s=!1}=e;return(0,p.jsxs)(n.xu,{width:o.yF,children:[(0,p.jsx)(n.xu,{display:"flex",justifyContent:"center",marginBottom:2,children:(0,p.jsx)(d.Z,{color:t,fullName:a||i,size:120,src:l||""})}),a&&(0,p.jsx)(u.Z,{isDomainVerified:r,isVerifiedMerchant:s,name:a})]})},1:({item:e={},story:t,imagePlaceholderColor:i=c.hK})=>{var l,a,r;let{username:s,image_large_url:_,full_name:y,id:v,domain_verified:f=!1,is_verified_merchant:x=!1}=e,S=(null==t?void 0:null===(l=t.custom_properties)||void 0===l?void 0:null===(a=l.preview_image_map)||void 0===a?void 0:null===(r=a[v])||void 0===r?void 0:r[0])||"";return(0,p.jsxs)(n.xu,{height:o.yF,width:o.yF,children:[(0,p.jsx)(n.zd,{height:h,rounding:4,wash:!0,width:o.yF,children:(0,p.jsx)(g.Z,{height:o.yF,src:S,width:o.yF})}),(0,p.jsx)(n.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:-12,children:(0,p.jsx)(d.Z,{color:i,fullName:y||s,size:m,src:_||""})}),y&&(0,p.jsx)(u.Z,{isDomainVerified:f,isVerifiedMerchant:x,name:y})]})},2:({item:e={},story:t})=>{var i,l;let{username:a,image_large_url:r,full_name:s,id:c,domain_verified:_=!1,is_verified_merchant:y=!1}=e,[v="",f=""]=(null==t?void 0:null===(i=t.custom_properties)||void 0===i?void 0:null===(l=i.preview_image_map)||void 0===l?void 0:l[c])||[];return(0,p.jsxs)(n.xu,{width:o.yF,children:[(0,p.jsxs)(n.xu,{height:o.yF,children:[(0,p.jsx)(n.zd,{height:h,rounding:4,wash:!0,width:o.yF,children:(0,p.jsxs)(n.kC,{children:[(0,p.jsx)(g.Z,{height:o.yF,src:v,width:o.yF/2}),(0,p.jsx)(n.xu,{color:"default",width:2}),(0,p.jsx)(g.Z,{height:o.yF,src:f,width:o.yF/2})]})}),(0,p.jsx)(n.xu,{display:"flex",justifyContent:"center",marginBottom:2,marginTop:-12,children:(0,p.jsx)(d.Z,{color:"gray",fullName:s||a,size:m,src:r||""})})]}),s&&(0,p.jsx)(u.Z,{isDomainVerified:_,isVerifiedMerchant:y,name:s})]})}};function y(e){var t,i;let{logContextEvent:o}=(0,r.v)(),d=(0,a.k6)(),{story:u={},slotIndex:c,component:m,view:h,viewParameter:g,item:y}=e,v=(null===(t=u.display_options)||void 0===t?void 0:null===(i=t.item_view_rep_style)||void 0===i?void 0:i.user_rep_style)||5,f=_[v],x=(0,l.useMemo)(()=>({story_type:u.story_type,story_id:u.id,content_ids:u.content_ids,user_id:y.id}),[y,u]),S=(0,s.Z)({contextLogData:x,impressionType:"User",loggingId:y.id,objectIdStr:y.id,slotIndex:c,viewParameter:g,viewType:h});return f?(0,p.jsx)(n.iP,{ref:S,onTap:()=>{o({event_type:101,view_type:h,view_parameter:g,component:m,aux_data:x}),d.push(`/${y.username}`)},children:(0,p.jsx)(f,{...e})}):null}},327651:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var l=i(883119),a=i(992061),n=i(898781),r=i(349700),s=i(215292),o=i(785893);function d({color:e,fullName:t,size:i,src:d}){let u=(0,n.ZP)();return(0,o.jsx)(s.q,{children:({hovered:n,onMouseEnter:s,onMouseLeave:c})=>(0,o.jsx)(l.xu,{"data-test-id":"category-bubble",marginBottom:2,onMouseEnter:s,onMouseLeave:c,children:(0,o.jsxs)(l.zd,{height:i,rounding:"circle",wash:!0,width:i,children:[(0,o.jsx)(a.Z,{hovered:n,rounding:"circle"}),(0,o.jsx)(l.Ee,{alt:(0,r.nk)(u._('Logo of {{ fullName }}', 'itemRep.userRep.brandLogo', 'Alt text for the brand logo'),{fullName:t}).join(""),color:e,naturalHeight:i,naturalWidth:i,src:d})]})})})}},641968:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(883119),a=i(865607),n=i(785893);function r({name:e,isDomainVerified:t,isVerifiedMerchant:i}){return(0,n.jsxs)(l.kC,{alignContent:"center",alignItems:"stretch",gap:1,justifyContent:"center",children:[e&&(0,n.jsx)(l.xv,{inline:!0,weight:"bold",children:e}),(0,n.jsx)(a.Z,{hasVerifiedIdentity:t,isVerifiedMerchant:i,size:"sm"})]})}},87165:(e,t,i)=>{"use strict";i.d(t,{i:()=>s});var l=i(883119),a=i(444445),n=i(785893);function r(){return(0,n.jsx)(l.xu,{width:a.yF})}function s(e){return Array(e).fill().map((e,t)=>(0,n.jsx)(r,{},t))}},63404:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f,v:()=>g});var l,a=i(167912),n=i(240684),r=i(175892),s=i(897243),o=i(934494),d=i(701865),u=i(981228),c=i(988874),p=i(456183),m=i(785893);let h=(0,n.ZP)({resolved:{},chunkName:()=>"DefaultPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(97270),i.e(10966),i.e(18352),i.e(38135),i.e(39921)]).then(i.bind(i,369083)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>369083});function g(e){var t;return(null==e?void 0:e.type)==="pin"&&((null===(t=e.images)||void 0===t?void 0:t["236x"])||{}).url||null}let _=void 0!==l?l:l=i(883597);function y(e){var t,i,l;let{itemData:a,...n}=e,{slotIndex:o,view:g,item:_}=e,{pinId:y,pinGraphQLRef:v}=a;if(v)return y&&g?(0,m.jsx)(h,{duploQueryRef:v,pinId:y,slotIndex:o,viewType:g}):null;switch(null==_?void 0:_.type){case"pin":return(0,m.jsx)(c.Z,{...n});case"user":return(0,m.jsx)(p.Z,{...n});case"board_more_ideas_feed_upsell":return(0,m.jsx)(u.Z,{...n});case"explorearticle":return(0,m.jsx)(d.Z,{...n});case"productgroup":return(0,m.jsx)(r.Z,{productGroup:{coverImages:null===(t=_.cover_images)||void 0===t?void 0:t.map(e=>(0,s.b)(e)),description:_.description,entityId:null!==(i=_.id)&&void 0!==i?i:"",groupType:_.group_type,name:_.name,previewPins:null===(l=_.preview_pins)||void 0===l?void 0:l.map(e=>({imageSignature:e.image_signature,images:e.images&&(0,s.b)(e.images)}))},slotIndex:o});default:return null}}let v=(0,o.Z)({useGraphQLAdapter:e=>{let t=(0,a.useFragment)(_,e),{pinId:i}=t;return{pinId:i,pinGraphQLRef:t}},useLegacyAdapter:e=>e?{item:e,pinGraphQLRef:null}:null});function f({pinGraphQLRef:e,...t}){return(0,m.jsx)(v,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.item},children:({data:e})=>e&&(0,m.jsx)(y,{...t,itemData:e})})}},643897:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var l=i(883119),a=i(608760),n=i(785893);let r=new Map([["pin",4]]);function s({children:e,itemType:t}){return(0,n.jsx)(l.xu,{marginBottom:r.get(t)||a.mT,children:e})}},608760:(e,t,i)=>{"use strict";i.d(t,{g5:()=>r,hK:()=>a,mT:()=>n});var l=i(988874);let a="lightGray",n=8,r={itemRep:l.Z,shape:"square",getImage:()=>""}},563886:(e,t,i)=>{"use strict";i.d(t,{Z:()=>K});var l,a=i(667294),n=i(167912),r=i(883119),s=i(792182),o=i(934494),d=i(444445),u=i(898781),c=i(754320),p=i(668916),m=i(48125),h=i(429091),g=i(180910),_=i(34518),y=i(232921),v=i(63404),f=i(580326),x=i(848385),S=i(605706),b=i(782975),w=i(905031),P=i(50286),I=i(435497),T=i(239062),k=i(751191),E=i(455024),j=i(390598),A=i(785893);let F=new Set([3,4]),C=new Set([1]),R=({text:e,url:t})=>!!e&&!!t,D=e=>R(e)&&F.has(e.location),O=e=>R(e)&&C.has(e.location),L=void 0!==l?l:l=i(992872),N=({contentVisibleItemCount:e,customWidth:t,gutterWidth:i,isMoreIdeasListCard:l,isStyleBubble:a,isImageAndTitleRep:n,isStorefrontSpotlightCarousel:r,isSfModuleOnMobile:s,isSmallMobileScreen:o,isStackedCollageDisplayCard:u,isTriplePreviewDisplayCard:c,totalObjectCount:_,containerRef:v,deviceType:f,windowWidth:x})=>{let S=s?d.tG:d.yF,b="desktop"===f;if(c)return b?g.d:g.Gd;if(u)return b?m.m:m.d;if(l){if(b)return y.xR;if(1===_){var w;return(null===(w=v.current)||void 0===w?void 0:w.clientWidth)||0}return o?y.wg:y.lf}if(a)return h.u;if(n)return p.H;if(r)return j.PRODUCT_GROUP_COVER_IMAGE_DIMENSIONS.WIDTH;if(e){let l=b?d.oX:d.yt,a=null!=i?i:l,n="number"==typeof t?(0,d.Wv)({contentVisibleItemCount:e,gap:a,width:parseInt(t,10)}):d.yF,r=b?n:d.tG,s=Math.floor(e);return Math.min(Math.floor((x-s*a)/e),parseInt(r,10))}return S};function Z(e){var t,i,l,n,o,p,m,h,g,y,j,F,C,R,L,Z,M,K,z,H;let{addContentRight:U,componentFallback:B,dangerouslySetActionUrl:G,disableHeader:$,gutterWidth:V,initialSlotIndex:W=0,styleOverrides:Y,saveButtonOptions:q,storyData:X,surface:Q,view:J,viewParameter:ee,width:et}=e,{data:{contentIds:ei,displayOptions:el,objects:ea,action:en,storyId:er,storyTitle:es,storyType:eo},rawStoryData:ed,storyGraphqlRef:eu,__dataKeys:ec}=X,[ep,em]=(0,a.useState)(0),eh=(0,a.useRef)(null),eg=(0,w.Z)(),e_=(0,S.Z)(),ey=(0,P.ZP)(),ev="desktop"===ey,{width:ef=0}=(0,s.Z)()||{},ex=(0,u.ZP)();if(!ea)return null;let eS=null!==(t=null==el?void 0:null===(i=el.contentDisplay)||void 0===i?void 0:i.componentType)&&void 0!==t?t:B,eb=(null==el?void 0:el.carouselFadeEnds)===1,ew=ea.length,eP={carouselSlots:ea.map(e=>"graphql"===e.type?{title:void 0,id:void 0}:{title:e.data.title,id:e.data.id}),entityId:"",index:ep},{text:eI,url:eT,location:ek}=null!=en?en:{},eE=null!=G?G:eT,ej={backgroundColor:"default",hoverColor:"default",iconColor:"default",size:null!==(l=null==Y?void 0:Y.navigationFabSize)&&void 0!==l?l:void 0},eA={backgroundColor:"secondary",hoverColor:"secondary",iconColor:"subtle",size:32},eF=null==el?void 0:null===(n=el.itemViewRepStyle)||void 0===n?void 0:n.moreIdeasRepStyle,eC=_.kx[eF],eR=(null==el?void 0:null===(o=el.itemViewRepStyle)||void 0===o?void 0:o.exploreArticleRepStyle)===4,eD=(null==el?void 0:null===(p=el.itemViewRepStyle)||void 0===p?void 0:p.exploreArticleRepStyle)===21,eO=(null==el?void 0:null===(m=el.contentDisplay)||void 0===m?void 0:m.componentType)===13698,eL=(null==el?void 0:null===(h=el.itemViewRepStyle)||void 0===h?void 0:h.exploreArticleRepStyle)===19,eN=(null==el?void 0:null===(g=el.itemViewRepStyle)||void 0===g?void 0:g.exploreArticleRepStyle)===20,eZ=(null==el?void 0:null===(y=el.headerDisplay)||void 0===y?void 0:y.expandedTextAlignment)!==null,eM=ev?null==el?void 0:null===(j=el.contentDisplay)||void 0===j?void 0:null===(F=j.contentVisibleItemCount)||void 0===F?void 0:F.web:null==el?void 0:null===(C=el.contentDisplay)||void 0===C?void 0:null===(R=C.contentVisibleItemCount)||void 0===R?void 0:R.mobile,eK=N({containerRef:eh,contentVisibleItemCount:eM,customWidth:et,gutterWidth:V,isMoreIdeasListCard:1===eF,isStyleBubble:eR,isImageAndTitleRep:eD,isStorefrontSpotlightCarousel:eO,isSfModuleOnMobile:eg,isSmallMobileScreen:e_,totalObjectCount:ew,isStackedCollageDisplayCard:eN,isTriplePreviewDisplayCard:eL,deviceType:ey,windowWidth:ef}),ez=null==el?void 0:null===(L=el.contentDisplay)||void 0===L?void 0:null===(Z=L.carouselDisplayOptions)||void 0===Z?void 0:Z.navigationType,eH=ev&&0===ez,eU=null!=V?V:d.oX,eB=ev?eU:d.yt,eG=ea.filter(({data:e})=>!!e),e$=null==el?void 0:null===(M=el.contentDisplay)||void 0===M?void 0:null===(K=M.gridLayout)||void 0===K?void 0:K.cols,eV="number"==typeof e$?e$:-1,eW=eV*(ev?d.yF:d.tG)+(eV-1)*eB,eY=-1===eV||((null===(z=eh.current)||void 0===z?void 0:z.clientWidth)||0)<eW,eq=(0,E.tD)({slotWidth:eK,containerWidth:(null===(H=eh.current)||void 0===H?void 0:H.clientWidth)||0,gap:eB,numberOfSlides:eG.length,index:ep}),eX=et?eK:void 0;return(0,A.jsxs)(r.kC,{direction:"column",width:eY?void 0:eW,children:[es&&!$&&(0,A.jsx)(x.Z,{showExpanded:eZ,storyKey:ec.HeaderModule_story}),(0,A.jsxs)(r.xu,{ref:eh,marginBottom:eH?8:0,position:"relative",children:[eH&&(0,A.jsx)(T.default,{backNode:(0,A.jsx)(k.Z,{...ej,iconType:"back",showFab:!0}),carouselData:eP,carouselIndex:ep,componentType:eS,contextLogData:eF?{index:ep}:{},forwardNode:(0,A.jsx)(k.Z,{...ej,iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{em(e)},isShowingLastSlide:eq,pinKey:null,viewParameter:ee,viewType:J}),(0,A.jsxs)(I.Z,{componentType:eC,containerRef:eh,gap:eB,id:"structured-feed-carousel-module",impressionType:eF?"BoardMoreIdeasRep":"Pin",index:ep,shouldBeDragCarousel:!ev,slideWidth:eK,styleOverrides:Y,view:J,viewParameter:ee,children:[eG.map((e,t)=>{var i,l;if(t===eG.length-1&&en&&eI&&eE&&D(en)){let i="legacy"===e.type&&(0,v.v)(e.data)||"";return i&&(0,A.jsx)(c.Z,{buttonText:eI,component:eS,contentIds:null!=ei?ei:void 0,element:179,imageWidth:eX,isInMobileCarousel:!ev,previewImageSrc:i,slideWidth:eK,storyId:null!=er?er:"",storyType:eo,url:eE,view:J,viewParameter:ee},"graphql"===e.type?`${t}`:(0,b.Z)(e.data,t))}return(0,A.jsx)(v.Z,{imageWidth:eX,isInMobileCarousel:!ev,isInViewOrNext:(0,E.Iw)({slotWidth:eK,containerWidth:(null===(i=eh.current)||void 0===i?void 0:i.clientWidth)||0,gap:eB,numberOfSlides:eG.length,index:t,currentIndex:ep}),item:"legacy"===e.type?{...e.data,..."board_more_ideas_feed_upsell"===e.data.type?{header_text:ex._('More ideas for', 'moreIdeasBoardRepCarousel.carousel.headText', 'Header text for JBI Carousel on Homefeed')}:{}}:null,pinGraphQLRef:eu&&"graphql"===e.type&&(null===(l=e.data)||void 0===l?void 0:l.__typename)==="Pin"?e.data:null,saveButtonOptions:q,slideWidth:eK,slotIndex:W+t,story:null!=ed?ed:void 0,surface:Q,view:J,viewParameter:ee},"graphql"===e.type?`${t}`:(0,b.Z)(e.data,t))}),U]}),eb&&ep>0&&(0,A.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(90deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)"}},height:"100%",left:!0,position:"absolute",top:!0,width:80}),eb&&!eq&&(0,A.jsx)(r.xu,{dangerouslySetInlineStyle:{__style:{background:"linear-gradient(270deg, #FFFFFF 0%, rgba(255, 255, 255, 0) 100%)"}},height:"100%",position:"absolute",right:!0,top:!0,width:80})]}),ev&&1===ez&&(0,A.jsx)(r.xu,{marginBottom:8,marginTop:3,position:"relative",width:"100%",children:(0,A.jsx)(T.default,{addEllipsis:!0,alwaysShowNavigationArrows:!0,backNode:(0,A.jsx)(k.Z,{...eA,iconType:"back",showFab:!0}),carouselData:eP,carouselIndex:ep,componentType:eS,contextLogData:eF?{index:ep}:{},ellipsisVariant:"dark",forwardNode:(0,A.jsx)(k.Z,{...eA,iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{em(e)},isShowingLastSlide:eq,pinKey:null,sliderStyleOverride:{padding:"0px"},viewParameter:ee,viewType:J})}),en&&O(en)&&(0,A.jsx)(r.xu,{marginTop:4,children:(0,A.jsx)(f.Z,{location:ek,text:eI,url:eE})})]})}let M=(0,o.Z)({useGraphQLAdapter:e=>{var t;let i=(0,n.useFragment)(L,e);return{data:{...i,objects:null===(t=i.objects)||void 0===t?void 0:t.map(e=>({type:"graphql",data:e}))},rawStoryData:null,storyGraphqlRef:i,__dataKeys:{HeaderModule_story:{type:"graphqlRef",data:i}}}},useLegacyAdapter:e=>{var t,i,l;return e&&{data:{action:e.action&&{location:e.action.location,text:e.action.text,url:e.action.url},contentIds:e.content_ids,displayOptions:e.display_options&&{contentDisplay:e.display_options.content_display&&{gridLayout:e.display_options.content_display.grid_layout&&{cols:e.display_options.content_display.grid_layout.cols},componentType:e.display_options.content_display.component_type,contentVisibleItemCount:{mobile:null===(t=e.display_options.content_display.content_visible_item_count)||void 0===t?void 0:t.mobile,web:null===(i=e.display_options.content_display.content_visible_item_count)||void 0===i?void 0:i.web},carouselDisplayOptions:e.display_options.content_display.carousel_display_options&&{navigationType:e.display_options.content_display.carousel_display_options.navigation_type}},carouselFadeEnds:e.display_options.carousel_fade_ends,itemViewRepStyle:e.display_options.item_view_rep_style&&{exploreArticleRepStyle:e.display_options.item_view_rep_style.explore_article_rep_style,moreIdeasRepStyle:e.display_options.item_view_rep_style.more_ideas_rep_style},headerDisplay:e.display_options.header_display&&{expandedTextAlignment:e.display_options.header_display.expanded_text_alignment}},objects:null===(l=e.objects)||void 0===l?void 0:l.map(e=>({type:"legacy",data:e})),storyId:e.id,storyTitle:e.title?{__typename:"StoryText"}:null,storyType:e.story_type},rawStoryData:e,storyGraphqlRef:null,__dataKeys:{HeaderModule_story:{type:"deprecated",data:e}}}}});function K({storyGraphqlRef:e,...t}){return(0,A.jsx)(M,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.story},children:({data:e})=>e&&(0,A.jsx)(Z,{...t,storyData:e})})}},580326:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(883119),a=i(785893);function n({url:e,text:t,location:i}){return 1===i&&e&&t?(0,a.jsx)(l.kC,{alignItems:"center",justifyContent:"center",children:(0,a.jsx)(l.ZP,{href:e,text:t})}):null}},848385:(e,t,i)=>{"use strict";i.d(t,{Z:()=>x}),i(167912);var l,a=i(616550),n=i(883119),r=i(407043),s=i(356997),o=i(916117),d=i(898781),u=i(50286),c=i(865607),p=i(785893);let m={1:"start",2:"center"},h={1:"100",2:"300"},g={1:"400",4:"200",3:"500",2:"600"},_=new Set([2,4]),y=void 0!==l?l:l=i(612587);function v({showExpanded:e=!1,view:t,viewParameter:i,storyData:l}){var o,d,y,v;let x=(0,a.k6)(),{logContextEvent:S}=(0,r.v)(),b=(0,u.HG)(),{fullName:w,isVerifiedMerchant:P,verifiedIdentity:I,username:T,imageMediumUrl:k}=l.user||Object.freeze({}),E=w||(null===(o=l.storyTitle)||void 0===o?void 0:o.format),{url:j,text:A,location:F,style:C}=l.action||Object.freeze({}),R=j||T||"",D=l.displayOptions||Object.freeze({}),O=D.headerDisplay||Object.freeze({}),L=e?O.expandedTextAlignment:O.textAlignment,N=m[L||1],Z=m[O.subtitleAlignment||1],M=h[O.headerSize||1],K=O.headerSize&&g[O.headerSize]?g[O.headerSize]:g[1],z=1===O.subtitleStyle?K:"200",H=(e,t)=>null!=e?e:t,U=H(D.titleTextColor,"default"),B=null!=(v=D.titleTextColor)?v:"default",G=H(D.subtitleTextColor,"subtle"),$=1===O.titlePosition,V=!!(null!==(d=l.subtitle)&&void 0!==d&&d.format)&&(0,p.jsx)(n.X6,{align:Z,color:G,size:z,children:l.subtitle.format}),W=(0,p.jsx)(n.X6,{accessibilityLevel:2,align:N,color:U,size:K,children:E}),Y=()=>{var e;return S({component:null===(e=D.contentDisplay)||void 0===e?void 0:e.componentType,element:179,event_type:b?101:102,view_parameter:i,view_type:t})},q=e=>{Y();let t=e.replace(/^\/+/,"");x.push(`/${t}`)};return(0,p.jsx)(n.xu,{marginBottom:b?4:2,children:(0,p.jsxs)(n.kC,{direction:"column",gap:{row:0,column:2},children:[$&&V,(0,p.jsxs)(n.kC,{alignItems:"center",justifyContent:N,children:[T&&k&&(0,p.jsx)(s.qE,{name:T,size:"sm",src:k}),(0,p.jsxs)(n.xu,{alignItems:"baseline",display:"flex",flex:e?"grow":"shrink",justifyContent:N,marginStart:N===m[1]?2:0,children:[R?(0,p.jsx)(n.xu,{"data-test-id":"sf-header-heading",children:(0,p.jsx)(n.Tg,{href:R,onTap:({event:e})=>{e.stopPropagation(),q(R)},tapStyle:"compress",children:W})}):W,P&&(0,p.jsx)(n.xu,{marginStart:2,children:(0,p.jsx)(c.Z,{hasVerifiedIdentity:!!(null==I?void 0:I.verified),isVerifiedMerchant:P,size:"xs"})})]}),_.has(F)&&j&&(0,p.jsx)(n.xu,{"data-test-id":"sf-header-action-button",children:(0,p.jsx)(f,{headerTitle:E,onClick:Y,style:C,text:A,url:j})})]}),!$&&V,null!==(y=l.storyDescription)&&void 0!==y&&y.format?(0,p.jsx)(n.xv,{align:N,color:B,size:M,weight:"bold",children:l.storyDescription.format}):null]})})}function f({headerTitle:e,onClick:t,style:i,text:l,url:a}){let r=(0,d.ZP)();return 3!==i&&l?(0,p.jsx)(n.xu,{marginStart:6,children:(0,p.jsx)(n.ZP,{href:a,onClick:t,text:l})}):(0,p.jsx)(n.I_,{accessibilityLabel:e||r._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",href:a,icon:"arrow-forward",iconColor:"darkGray",onClick:t,size:"sm"})}function x({storyKey:e,...t}){let{data:i}=(0,o.u)(y,e);return(0,p.jsx)(v,{...t,storyData:i})}},217149:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Q});var l,a=i(167912),n=i(883119),r=i(934494),s=i(366428),o=i(563886),d=i(580326),u=i(444445),c=i(701865),p=i(988874),m=i(456183),h=i(608760),g=i(848385),_=i(785893);let y=()=>(0,_.jsx)(n.xu,{color:"secondary",height:u.yF,width:u.yF}),v={1:{itemRep:p.Z,deprecatedActionShape:"square",deprecatedGetActionImage:e=>{var t,i;return(null===(t=e.images)||void 0===t?void 0:null===(i=t.orig)||void 0===i?void 0:i.url)||""}},4:{itemRep:c.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>{var t,i;return(null===(t=e.images)||void 0===t?void 0:null===(i=t.orig)||void 0===i?void 0:i.url)||""}},2:{itemRep:m.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.image_large_url}};function f({componentFallback:e,showExpanded:t=!0,story:i,view:l,viewParameter:a}){var r,s,o,d,u;let c=(null===(r=i.display_options)||void 0===r?void 0:r.content_display)||{},p=c.model_type,m=v[p]||h.g5,f=m.itemRep||y,x=null!==(s=null===(o=i.display_options)||void 0===o?void 0:null===(d=o.content_display)||void 0===d?void 0:d.component_type)&&void 0!==s?s:e;return(0,_.jsx)(n.xu,{marginBottom:2,children:(0,_.jsxs)(n.kC,{alignItems:"stretch",direction:"column",justifyContent:"center",children:[i.title&&(0,_.jsx)(g.Z,{showExpanded:t,storyKey:{type:"deprecated",data:i}}),(0,_.jsx)(n.kC,{gap:2,justifyContent:"center",wrap:!0,children:null===(u=i.objects)||void 0===u?void 0:u.map(function(e,t){return(0,_.jsx)(f,{component:x,imagePlaceholderColor:"rgba(0, 0, 0, 0)",index:t,item:e,story:i,view:l,viewParameter:a},t)})})]})})}var x=i(667294),S=i(754320),b=i(87165),w=i(643897),P=i(905031),I=i(745312),T=i(50286);let k="rgba(0, 0, 0, 0)",E=()=>(0,_.jsx)(n.xu,{color:"secondary",height:u.yF,width:u.yF}),j={1:{itemRep:p.Z,deprecatedActionShape:"square",deprecatedGetActionImage:e=>{var t,i;return(null===(t=e.images)||void 0===t?void 0:null===(i=t.orig)||void 0===i?void 0:i.url)||""}},4:{itemRep:c.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>{var t,i;return(null===(t=e.images)||void 0===t?void 0:null===(i=t.orig)||void 0===i?void 0:i.url)||""}},2:{itemRep:m.Z,deprecatedActionShape:"circle",deprecatedGetActionImage:e=>e.image_large_url}};function A({componentFallback:e,dangerouslySetActionUrl:t,dangerouslySetContentVisibleItemCount:i,disableHeader:l,dynamicItemWidth:a,gutterWidth:r,initialSlotIndex:s=0,showExpanded:o,story:d,surface:c,view:p,viewParameter:m,width:y}){var v,f,A,F,C,R,D,O;let L=(0,T.HG)(),N=(null===(v=d.display_options)||void 0===v?void 0:v.content_display)||{},Z=N.model_type,M=j[Z]||h.g5,K=M.itemRep||E,{action:z}=d,H=t||(null===(f=d.action)||void 0===f?void 0:f.url)||"",U=null!==(A=null===(F=d.display_options)||void 0===F?void 0:null===(C=F.content_display)||void 0===C?void 0:C.component_type)&&void 0!==A?A:e,B=null===(R=N.grid_layout)||void 0===R?void 0:R.rows,G="number"==typeof B?B:1,$=null===(D=N.grid_layout)||void 0===D?void 0:D.cols,V="number"==typeof $?$:-1,W=-1===V,Y=null!=i?i:null===(O=N.content_visible_item_count)||void 0===O?void 0:O.web,q=Y&&y&&a?(0,u.Wv)({contentVisibleItemCount:Y,gap:null!=r?r:u.oX,width:parseInt(y,10)}):u.yF,{containerRef:X,itemsToRender:Q,actionItem:J}=(0,I.n)({items:d.objects||[],itemWidth:(0,P.Z)()?u.tG:q,itemGap:null!=r?r:u.oX,actionItemType:z?"one":void 0,numRows:G}),ee=J&&M.deprecatedGetActionImage?M.deprecatedGetActionImage(J):void 0,et=W?Q:d.objects||[],ei=et.map((e,t)=>(0,_.jsx)(w.Z,{itemType:"string"==typeof e.type?e.type:null,children:(0,_.jsx)(K,{component:U,imagePlaceholderColor:k,imageWidth:q,index:t,item:e,slotIndex:s+t,story:d,surface:c,view:p,viewParameter:m})},t)),el=!!H&&!!(null!=z&&z.text)&&ee&&(0,_.jsx)(S.Z,{buttonText:z.text,component:U,contentIds:d.content_ids,element:179,imageWidth:q,previewImageSrc:ee,shape:M.deprecatedActionShape,storyId:d.id,storyType:d.story_type,url:H,view:p,viewParameter:m});return(0,_.jsxs)(n.xu,{alignItems:"stretch",color:"default",direction:"column",display:"flex",justifyContent:"start",children:[d.title&&!l&&(0,_.jsx)(g.Z,{showExpanded:o,storyKey:{type:"deprecated",data:d}}),W?(0,_.jsxs)(I.Z,{containerRef:X,itemGap:null!=r?r:u.oX,numRows:G,rowAlignment:"center",children:[ei,el,G>1&&(0,b.i)(12)]}):(0,_.jsxs)(x.Fragment,{children:[Array(G).fill(null).map((e,t)=>(0,_.jsx)(n.kC,{alignItems:"stretch",gap:L?u.jC:u.D6,justifyContent:"start",wrap:V<=1,children:V>0&&Array(V).fill(null).map((e,i)=>ei[t*V+i])},et[t].id)),el]})]})}function F({componentFallback:e,showExpanded:t=!0,story:i,view:l,viewParameter:a}){var r,s,o,d;let c=(null===(r=i.display_options)||void 0===r?void 0:r.content_display)||{},p=c.model_type,m=j[p]||h.g5,y=m.itemRep||E,v=null!==(s=null===(o=i.display_options)||void 0===o?void 0:null===(d=o.content_display)||void 0===d?void 0:d.component_type)&&void 0!==s?s:e,f=(0,P.Z)()?u.tG:u.yF;return(0,_.jsxs)(n.kC,{alignItems:"stretch",direction:"column",justifyContent:"start",children:[i.title&&(0,_.jsx)(g.Z,{showExpanded:t,storyKey:{type:"deprecated",data:i}}),(0,_.jsx)(n.Rk,{columnWidth:f,gutterWidth:u.oX,items:i.objects||[],layout:"flexible",renderItem:({data:e,itemIdx:t})=>(0,_.jsx)(y,{component:v,imagePlaceholderColor:k,index:t,item:e,story:i,view:l,viewParameter:a},t)})]})}function C(e){var t,i;switch(null===(t=e.story.display_options)||void 0===t?void 0:null===(i=t.content_display)||void 0===i?void 0:i.pins_display){case 3:case 1:return(0,_.jsx)(F,{...e});default:return(0,_.jsx)(A,{...e})}}var R=i(792182),D=i(616550),O=i(407043),L=i(356997),N=i(898781),Z=i(477802);let M=({actionText:e,actionUrl:t,articleId:i,author:l,authorAvatar:a,component:r,contentIds:o,coverImage:d,debug:u,index:c,isFullWidth:p=!1,onImageLoad:m,storyId:h,storyType:g,subtitle:y,title:v,view:f,viewParameter:S,width:b,windowWidth:w})=>{let P=(0,N.ZP)(),I=(0,D.k6)(),{logContextEvent:T}=(0,O.v)(),[k,E]=(0,x.useState)(!1),j=(0,s.Z)({loggingId:i,objectIdStr:i,impressionType:"Article",contextLogData:{content_ids:o,story_id:h,story_type:g,article_id:i},slotIndex:c,viewParameter:S,viewType:f,componentType:r});return(0,_.jsx)(n.xu,{"data-test-id":"sf-hero",children:(0,_.jsxs)(n.xu,{ref:j,height:"auto",onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1),width:b,children:[(0,_.jsx)(n.iP,{onTap:()=>{T({event_type:101,view_type:f,view_parameter:S,component:r,aux_data:{article_id:i,content_ids:o,story_id:h,story_type:g}}),I.push(t)},children:(0,_.jsxs)(n.xu,{height:p?400:"35vw",maxHeight:500,overflow:"hidden",position:"relative",children:[(0,_.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.4s",transform:k?"scale(1.5)":"scale(1)"}},height:"100%",width:"100%",children:(0,_.jsx)(n.Ee,{alt:P._('Cover image of this shopping spotlight', 'hero.heroCoverImage', 'alt text for an image previewing the contents of a spotlight article'),color:"#fff",fit:"cover",naturalHeight:400,naturalWidth:400,onLoad:m,src:d,children:(0,_.jsx)(n.xu,{color:"transparentDarkGray",display:"block",height:"100%",opacity:.3,width:"100%"})})}),(0,_.jsx)(n.xu,{bottom:!0,marginBottom:p?12:0,padding:6,position:"absolute",width:"100%",children:(0,_.jsxs)(n.kC,{direction:"column",height:"100%",justifyContent:"end",children:[(0,_.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{transition:"transform 0.4s",transform:k?"translateY(-20px)":"translateY(20px)"}},children:(0,_.jsx)(n.X6,{color:"light",size:w<=822?"600":w<1e3?"400":w<1100?"500":"600",children:v})}),(0,_.jsxs)(n.xu,{dangerouslySetInlineStyle:{__style:{opacity:k?1:0,transition:k?"opacity 0.4s ease-in":"opacity 0.4s ease-out"}},display:"block",height:k?"auto":20,overflow:"hidden",children:[(0,_.jsx)(n.xv,{color:"inverse",children:y}),l&&(0,_.jsx)(n.xu,{marginTop:4,children:(0,_.jsxs)(n.kC,{alignItems:"center",direction:"row",children:[(0,_.jsx)(L.qE,{name:l,size:"md",src:a}),"\xa0",(0,_.jsx)(n.xv,{color:"inverse",children:l})]})})]}),(0,_.jsx)(n.xu,{marginTop:4,width:"74px",children:(0,_.jsx)(n.zx,{color:"white",onClick:()=>{I.push(t)},size:"lg",text:e})})]})})]})}),void 0!==u&&(0,_.jsx)(Z.ZP,{data:u})]})})};var K=i(435497),z=i(239062),H=i(751191);function U({onImageLoad:e,story:t,view:i,viewParameter:l,component:a,width:r}){var s;let[o,d]=(0,x.useState)(0),u=(0,x.useRef)(null),c=(null===(s=t.objects)||void 0===s?void 0:s.slice(0,3))||[];return(0,_.jsxs)(n.xu,{ref:u,alignItems:"end",display:"flex",height:400,justifyContent:"center",position:"relative",width:r,children:[(0,_.jsx)(K.Z,{containerRef:u,id:t.id,index:o,slideWidth:r,children:c.map((n,s)=>{var o,d,u,c,p;return(0,_.jsx)(M,{actionText:(null===(o=n.action)||void 0===o?void 0:o.text)||"",actionUrl:(null===(d=n.action)||void 0===d?void 0:d.url)||"",articleId:n.id,component:a,coverImage:n.cover_images&&(null===(u=n.cover_images[0].originals)||void 0===u?void 0:u.url)||"",debug:n.debug,index:s,isFullWidth:!0,onImageLoad:e,storyId:t.id,storyType:t.story_type,subtitle:(null===(c=n.subtitle)||void 0===c?void 0:c.format)||"",title:(null===(p=n.title)||void 0===p?void 0:p.format)||"",view:i,viewParameter:l,width:r,windowWidth:r},n.id)})}),(0,_.jsx)(n.xu,{display:"inlineBlock",height:"auto",paddingY:5,position:"absolute",width:"60%",children:(0,_.jsx)(z.default,{addEllipsis:!0,backNode:(0,_.jsx)(H.Z,{iconColor:"inverse",iconType:"back",showFab:!0}),carouselData:{index:o,entityId:"",carouselSlots:c.map(e=>({id:e.id,title:null}))},carouselIndex:o,forwardNode:(0,_.jsx)(H.Z,{iconColor:"inverse",iconType:"forward",showFab:!0}),handleCarouselSwipe:e=>{d(e)},pinKey:null})})]})}function B({component:e,onImageLoad:t,story:i,view:l,viewParameter:a,windowWidth:r}){var s;let o=(null===(s=i.objects)||void 0===s?void 0:s.slice(0,3))||[];return(0,_.jsxs)(x.Fragment,{children:[(0,_.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:o[0].dominant_colors[0]}},flex:"grow"}),o.map((n,s)=>{var o,d,u,c,p;return(0,_.jsx)(M,{actionText:(null===(o=n.action)||void 0===o?void 0:o.text)||"",actionUrl:(null===(d=n.action)||void 0===d?void 0:d.url)||"",articleId:n.id,component:e,coverImage:n.cover_images&&(null===(u=n.cover_images[0].originals)||void 0===u?void 0:u.url)||"",debug:n.debug,index:s,onImageLoad:t,storyId:i.id,storyType:i.story_type,subtitle:(null===(c=n.subtitle)||void 0===c?void 0:c.format)||"",title:(null===(p=n.title)||void 0===p?void 0:p.format)||"",view:l,viewParameter:a,width:500,windowWidth:r},n.id)}),(0,_.jsx)(n.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:o[2].dominant_colors[0]}},flex:"grow"})]})}function G({component:e,pwtSurfaceContext:t,story:i,view:l,viewParameter:a}){let{width:r}=(0,R.Z)()||{},s=()=>{t&&t.markConstraintComplete("RenderHeroImages")};return(0,_.jsx)(x.Fragment,{children:(0,_.jsx)(n.kC,{alignItems:"stretch",direction:"row",justifyContent:"start",width:r,children:3==(!r||r>822?3:1)?(0,_.jsx)(B,{component:e,onImageLoad:s,story:i,view:l,viewParameter:a,windowWidth:r}):(0,_.jsx)(U,{component:e,onImageLoad:s,story:i,view:l,viewParameter:a,width:r})})})}function $({story:e}){var t;let i=(0,D.k6)(),{user:l,custom_properties:a,action:r}=e||{},{full_name:s,username:o,image_medium_url:d}=l||{},c=s||(null===(t=e.title)||void 0===t?void 0:t.format)||"",{url:p,text:m}=r||{},{image:h}=a||{};if(!p||!m)return null;let g=(0,_.jsxs)(n.xu,{alignItems:"center",color:"transparentDarkGray",display:"flex",height:"100%",justifyContent:"center",padding:2,position:"relative",children:[o&&d&&(0,_.jsx)(n.xu,{left:!0,padding:2,position:"absolute",top:!0,children:(0,_.jsx)(L.qE,{name:o,size:"sm",src:d})}),c&&(0,_.jsx)(n.xv,{color:"inverse",weight:"bold",children:c})]});return(0,_.jsxs)(n.xu,{marginBottom:4,width:u.yF,children:[(0,_.jsx)(n.iP,{onTap:()=>i.push(p),children:(0,_.jsx)(n.zd,{height:u.yF,rounding:2,wash:!0,children:"string"==typeof h&&h?(0,_.jsx)(n.Ee,{alt:c,fit:"contain",naturalHeight:u.yF,naturalWidth:u.yF,src:h,children:g}):(0,_.jsx)(n.xu,{height:u.yF,width:u.yF,children:g})})}),(0,_.jsx)(n.xu,{marginTop:3,children:(0,_.jsx)(n.ZP,{fullWidth:!0,href:p,text:m})})]})}let V=new Set([101]),W="UNKNOWN_CONTAINER_TYPE",Y=void 0!==l?l:l=i(282167);function q(e){var t,i;let{componentFallback:l,initialSlotIndex:a,view:r,viewParameter:u,width:c,story:{data:{action:p,containerType:m,contentIds:h,displayOptions:y,storyId:v,storyType:x,trackingParams:S},forward:{dataKeys:b,rawStoryData:w,storyGraphqlRef:P}}}=e,I=null!==(t=null==y?void 0:null===(i=y.contentDisplay)||void 0===i?void 0:i.componentType)&&void 0!==t?t:l,T=(0,s.Z)({clientTrackingParams:S,componentType:I,contextLogData:{story_id:v,story_type:x,content_ids:h},impressionType:"Story",loggingId:v,slotIndex:a||0,viewParameter:u,viewType:r}),k={...e,component:I},E=(()=>{switch(m){case 90:return(0,_.jsx)(o.Z,{...k,story:w,storyGraphqlRef:P});case 88:let{story:e,...t}=k,i={...t,storyKey:b.HeaderModule_story};return(0,_.jsx)(g.Z,{...i});case 89:let{location:l,text:a,url:n}=p||{};return(0,_.jsx)(d.Z,{location:l,text:a,url:n});case 91:return!!w&&(0,_.jsx)(C,{...k,story:w});case 101:return!!w&&(0,_.jsx)(G,{...k,story:w});case 92:return!!w&&(0,_.jsx)($,{...k,story:w});case 131:return!!w&&(0,_.jsx)(f,{...k,story:w});default:return W}})();return E===W?null:(0,_.jsxs)(n.xu,{ref:T,width:V.has(m)?void 0:c,children:[E,(0,_.jsx)(n.xu,{})]})}let X=(0,r.Z)({useGraphQLAdapter:e=>{let t=(0,a.useFragment)(Y,e);return{data:t,forward:{rawStoryData:null,storyGraphqlRef:t,dataKeys:{HeaderModule_story:{type:"graphqlRef",data:t}}}}},useLegacyAdapter:e=>{var t;return e&&{data:{action:e.action&&{location:e.action.location,text:e.action.text,url:e.action.url},containerType:"number"==typeof e.container_type?e.container_type:void 0,contentIds:e.content_ids,displayOptions:e.display_options&&{contentDisplay:e.display_options.content_display&&{componentType:e.display_options.content_display.component_type}},storyId:null!==(t=e.id)&&void 0!==t?t:"",storyType:e.story_type,trackingParams:e.tracking_params},forward:{rawStoryData:e,storyGraphqlRef:null,dataKeys:{HeaderModule_story:{type:"deprecated",data:e}}}}}});function Q({storyGraphqlRef:e,...t}){return(0,_.jsx)(X,{input:e?{enabled:!0,data:e}:{enabled:!1,data:t.story},children:({data:e})=>e&&(0,_.jsx)(q,{...t,story:e})})}},605706:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(667294),a=i(50286);function n(){let[e,t]=(0,l.useState)(!1),i=(0,a.HG)();return(0,l.useEffect)(()=>{!i&&window.innerWidth<320&&t(!0)},[i,t]),e}},782975:(e,t,i)=>{"use strict";function l(e,t){var i;let l=`${e.type||""} ${t.toString()}`;switch(e.type){case"pin":return e.title||l;case"user":return e.username||l;case"explorearticle":return(null===(i=e.title)||void 0===i?void 0:i.format)||l;case"story":return e.id||l;default:return l}}i.d(t,{Z:()=>l})},905031:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(792182),a=i(444445);function n(){let{width:e}=(0,l.Z)()||{width:0};return e<2*a.yF+a.$H}},501338:(e,t,i)=>{"use strict";i.d(t,{Pw:()=>l,SB:()=>a,ZP:()=>r,x9:()=>n});let l=80,a=56,n=e=>"phone"===e?a:l;function r(e,t){return t?0:n(e)}},619937:(e,t,i)=>{"use strict";i.d(t,{$N:()=>h,Cu:()=>_,GY:()=>d,MZ:()=>r,NR:()=>c,Vn:()=>u,bC:()=>g,fm:()=>l,kM:()=>n,q6:()=>a,qp:()=>o,uV:()=>p,ug:()=>m,xL:()=>s});let l={DOWNLOAD_TEMPLATE:"DOWNLOAD_TEMPLATE",UPLOAD_TEMPLATE:"UPLOAD_TEMPLATE",HISTORY:"HISTORY",RESOURCES:"RESOURCES"},a={GENERAL:"GENERAL",CAMPAIGNS:"CAMPAIGNS",AD_GROUPS:"AD_GROUPS",ADS:"ADS",KEYWORDS:"KEYWORDS",PRODUCT_GROUPS:"PRODUCT_GROUPS",ERROR_CODES:"ERROR_CODES"},n={BILLING_HISTORY:"BILLING_HISTORY",BILLING_FORMS:"BILLING_FORMS",ORDER_LINES:"ORDER_LINES",PROMOTIONS:"PROMOTIONS",TAX_DOCUMENTS:"TAX_DOCUMENTS",DOCUMENTS:"DOCUMENTS",PREPAID_CAMPAIGN_SPEND:"PREPAID_CAMPAIGN_SPEND_SUMMARY"},r={GOOGLE_TAG_MANAGER:"Google Tag Manager",SHOPIFY:"Shopify",WOO_COMMERCE:"WooCommerce",WORDPRESS:"WordPress",SQUARESPACE:"Squarespace",WEEBLY:"Weebly",TEALIUM:"Tealium",MAGENTO:"Magento",ECWID:"Ecwid",BIG_COMMERCE:"BigCommerce",PREMMERCE:"Premmerce",SEGMENT:"Segment",BRANCH:"Branch",HIGHTOUCH:"Hightouch",EULERIAN:"Eulerian",ADOBE_CDP:"Adobe Real-Time CDP",ADOBE_COMMERCE:"Adobe Commerce",SALESFORCE_COMMERCE_CLOUD:"Salesforce Commerce Cloud"},s={GTM:"GTM",SHOPIFY:"SHOPIFY",WORDPRESS:"WORDPRESS",WOOCOMMERCE:"WOOCOMMERCE",TEALIUM:"TEALIUM"},o={PINTEREST_TAG:"PINTEREST_TAG",PINTEREST_TAG_MANUAL_SETUP_FLOW:"PINTEREST_TAG_MANUAL_SETUP_FLOW",PINTEREST_TEST_EVENTS:"PINTEREST_TEST_EVENTS",PINTEREST_TAG_EVENTS:"PINTEREST_TAG_EVENTS",PINTEREST_TAG_HEALTH:"PINTEREST_TAG_HEALTH",CONVERSION_HEALTH:"CONVERSION_HEALTH",CONVERSION_UPLOAD:"CONVERSION_UPLOAD",UPLOAD_HISTORY:"UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD:"PCA_UPLOAD",CONVERSIONS_API:"CONVERSIONS_API",CONVERSIONS_API_ACCESS_TOKEN:"CONVERSIONS_API_ACCESS_TOKEN",CONVERSIONS_API_DEDUPLICATION:"CONVERSIONS_API_DEDUPLICATION",CONVERSIONS_API_PARTNER_SETUP_FLOW:"CONVERSIONS_API_PARTNER_SETUP_FLOW",CONVERSIONS_API_MANUAL_SETUP_FLOW:"CONVERSIONS_API_MANUAL_SETUP_FLOW",PINTEREST_EVENTS_OVERVIEW:"PINTEREST_EVENTS_OVERVIEW",PINTEREST_EVENT_HISTORY:"PINTEREST_EVENT_HISTORY",PAYLOAD_HELPER:"PAYLOAD_HELPER",CONVERSIONS:"CONVERSIONS",PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP:"PINTEREST_EVENTS_OVERVIEW_BEFORE_SETUP",PINTEREST_SETUP_API:"PINTEREST_SETUP_API"},d={PINTEREST_TAG_DASHBOARD:"PINTEREST_TAG_DASHBOARD",PINTEREST_TAG_LANDING:"PINTEREST_TAG_LANDING",PINTEREST_TAG_INSTRUCTIONS:"PINTEREST_TAG_INSTRUCTIONS",CONVERSION_UPLOAD_LANDING:"CONVERSION_UPLOAD_LANDING",CONVERSION_UPLOAD_VALIDATION:"CONVERSION_UPLOAD_VALIDATION",CONVERSION_UPLOAD_HISTORY:"CONVERSION_UPLOAD_HISTORY",PCA_UPLOAD_HISTORY:"PCA_UPLOAD_HISTORY",PCA_UPLOAD_LANDING:"PCA_UPLOAD_LANDING",PCA_UPLOAD_VALIDATION:"PCA_UPLOAD_VALIDATION"},u={UNREAD:"UNREAD",READ:"READ",ACCEPTED:"ACCEPTED",REJECTED:"REJECTED",DISMISSED:"DISMISSED",INVALID:"INVALID",MUTED:"MUTED",SNOOZED:"SNOOZED",PMP_REPORTED:"PMP_REPORTED",EMAILED:"EMAILED",BULK_DOWNLOADED:"BULK_DOWNLOADED",FILTERED:"FILTERED",PUSHED:"PUSHED"},c={DESTINATION:"destination",EXPIRY:"expiry",SOURCE:"attributionsrc",SOURCE_EVENT_ID:"source_event_id",SOURCE_EVENT_TYPE:"source_event_type",PRIORITY:"priority",CLICK_PRIORITY:"2",VIEW_PRIORITY:"1",CAMPAIGN_ID:"campaign_id",ADVERTISER_ID:"advertiser_id"},p="604800",m="86400",h={ATTRIBUTION_SOURCE_ID:"attributionsourceid",ATTRIBUTE_DESTINATION:"attributiondestination",ATTRIBUTE_ON:"attributeon"},g="click",_="view"},337815:(e,t,i)=>{"use strict";i.d(t,{YS:()=>r,eF:()=>s,m_:()=>n});var l=i(619937),a=i(67347);function n(e,t,i,a,n){let r=new URLSearchParams,s=null!=e?e:"0";return r.append(l.NR.SOURCE_EVENT_ID,s),r.append(l.NR.DESTINATION,function(e){let t;try{t=decodeURIComponent(e)}catch(i){t=e}t.startsWith("http")?t.startsWith("http://")&&(t=t.replace("http://","https://")):t="https://"+t;try{return new URL(t).origin}catch(l){let i=t.match(/^(https?:\/\/[^\/]+)(\/|$)/);if(i&&i.length>1)return i[1];return e}}(t)||""),r.append(l.NR.EXPIRY,i?l.uV:l.ug),r.append(l.NR.PRIORITY,i?l.NR.CLICK_PRIORITY:l.NR.VIEW_PRIORITY),n&&r.append(l.NR.ADVERTISER_ID,n),a&&r.append(l.NR.CAMPAIGN_ID,a),r.append(l.NR.SOURCE_EVENT_TYPE,i?l.bC:l.Cu),"/attribution_source/?"+r.toString()}async function r(e,t,i,l,r,s,o){let{appType:d,osType:u}=s||{};if(["Pin","pinImpressions"].includes(e)&&t&&l){(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"start",appType:d,osType:u}});try{var c;if(!(null!==(c=window.document.featurePolicy)&&void 0!==c&&c.allowsFeature("attribution-reporting"))){(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"skipped",message:"attribution-reporting is not enabled",appType:d,osType:u}});return}let e=n(i,l||"",!1,r,o),t=await window.fetch(e,{keepalive:!0,attributionReporting:{eventSourceEligible:!0,triggerEligible:!1}});if(!t.ok)throw Error("server request failed.");(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"success",appType:d,osType:u}})}catch(e){(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"failed",error:e.name,appType:d,osType:u}})}}else(0,a.nP)("webapp.arapi.view.funnel",{sampleRate:.1,tags:{status:"missing_param",appType:d,osType:u}})}function s(e){if(e){let t=e.toLowerCase();if(t.includes("windows"))return"windows xp"===t?1:"windows vista"===t?2:"windows 7"===t?3:"windows 8"===t?4:12;if(t.includes("mac os"))return 5;if(t.includes("android"))return 7;if(t.includes("ios"))return 6;if(t.includes("ubuntu"))return 8;if(t.includes("chromium os"))return 13}return 0}},782534:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r,k:()=>l.k});var l=i(451820),a=i(780280),n=i(785893);let r=({dateFormatType:e,useUTC:t=!0,value:i})=>(0,n.jsx)(a.LC,{children:a=>(0,l.Z)(a.locale,i,e,t)})},451820:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n,k:()=>l});let l={LONG:"long",YEAR:"year",WEEKDAY_DATE:"weekday_date",WEEKDAY_DATE_TIME_TIMEZONE:"weekday_date_time_timezone",SHORT_WEEKDAY_DATE:"short_weekday_date",LONG_MONTH_YEAR:"long_month_year",NUMERIC:"numeric",MONTH_DAY:"month_day",SHORT_MONTH:"short_month",SHORT_MONTH_DAY:"short_month_day",DAY:"day",YEAR_SHORT_MONTH_DAY:"year_short_month_day",YEAR_SHORT_MONTH_DAY_HOUR:"year_short_month_day_hour",TIME:"time",TIME_TIMEZONE:"time_timezone",HOUR:"hour",TWO_DIGIT:"two_digit",TWO_DIGIT_YEAR:"two_digit_year"},a=function(e){switch(e){case l.YEAR:return{year:"numeric"};case l.LONG:return{year:"numeric",month:"long",day:"numeric"};case l.NUMERIC:return{year:"numeric",month:"numeric",day:"numeric"};case l.TWO_DIGIT:return{year:"numeric",month:"2-digit",day:"2-digit"};case l.TWO_DIGIT_YEAR:return{year:"2-digit",month:"2-digit",day:"2-digit"};case l.WEEKDAY_DATE:return{weekday:"long",month:"long",day:"numeric",year:"numeric"};case l.SHORT_WEEKDAY_DATE:return{weekday:"short",month:"numeric",day:"numeric"};case l.WEEKDAY_DATE_TIME_TIMEZONE:return{weekday:"short",month:"numeric",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"};case l.MONTH_DAY:return{month:"long",day:"numeric"};case l.SHORT_MONTH:return{month:"short"};case l.SHORT_MONTH_DAY:return{month:"short",day:"numeric"};case l.DAY:return{day:"numeric"};case l.LONG_MONTH_YEAR:return{month:"long",year:"numeric"};case l.YEAR_SHORT_MONTH_DAY:return{year:"numeric",month:"short",day:"numeric"};case l.YEAR_SHORT_MONTH_DAY_HOUR:return{month:"short",year:"numeric",day:"numeric",hour:"numeric"};case l.TIME:return{hour:"numeric",minute:"2-digit"};case l.TIME_TIMEZONE:return{hour:"numeric",minute:"2-digit",timeZoneName:"short"};case l.HOUR:return{hour:"numeric"};default:throw Error('invalid dateFormatType "'+e+'"')}};function n(e,t,i,l=!0){let n=a(i);l&&(n.timeZone="UTC");let r=new Intl.DateTimeFormat(e,n);return r.format(t)}},123159:(e,t,i)=>{"use strict";i.d(t,{F:()=>p,M:()=>c});var l=i(667294),a=i(702664),n=i(14890),r=i(425288),s=i(332611),o=i(957191),d=i(785893);let{Provider:u,useHook:c}=(0,r.Z)("ExperienceContext");function p({children:e}){let[t,i]=(0,l.useReducer)((e,t)=>{if("MOUNT_PLACEMENT"===t.type)return{...e,mountedPlacements:{...e.mountedPlacements,[t.payload]:!0}};if("UNMOUNT_PLACEMENT"===t.type){let i={...e};return delete i.mountedPlacements[t.payload],delete i.registerdAfterActionPlacements[t.payload],i}return"REGISTER_AFTER_ACTION_PLACEMENT"===t.type?{...e,registerdAfterActionPlacements:{...e.registerdAfterActionPlacements,[t.payload]:!0}}:e},{mountedPlacements:{},registerdAfterActionPlacements:{}}),{mountedPlacements:r,registerdAfterActionPlacements:c}=t,p=(0,a.useDispatch)(),m=(0,a.useSelector)(e=>e.experiences),h=(0,s.be)(),g=(0,s.Am)(),_=(0,s.Ig)(),y=(0,l.useMemo)(()=>{let e=(0,n.bindActionCreators)({completeExperience:h,dismissExperience:g,fetchAllExperiences:s.fO,fetchAllExperiencesMulti:o.NW,fetchExperienceForPlacements:s.pz,mountPlacement:s.N,triggerExperimentsForPlacement:s.kd,viewExperience:_},p);return{...e,mountPlacement:(t,...l)=>{e.mountPlacement(t,...l),i({type:"MOUNT_PLACEMENT",payload:t})},unmountPlacement:e=>{i({type:"UNMOUNT_PLACEMENT",payload:e})},registerAfterActionPlacement:e=>{i({type:"REGISTER_AFTER_ACTION_PLACEMENT",payload:e})}}},[h,g,p,i,_]),v=(0,l.useMemo)(()=>({experiences:m,mountedPlacements:r,registerdAfterActionPlacements:c,...y}),[m,r,c,y]);return(0,d.jsx)(u,{value:v,children:e})}},497529:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var l=i(667294);i(332611);var a=i(123159),n=i(764990);i(957191);var r=i(780280);function s(e){let{mountedPlacements:t,completeExperience:i,dismissExperience:s,experiences:o,fetchAllExperiences:d,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:p,viewExperience:m}=(0,a.M)(),{isBot:h}=(0,r.B)(),g=e&&!h?(0,n.MQ)(o,t,e):null;return(0,l.useMemo)(()=>({completeExperience:i,dismissExperience:s,experienceForPlacement:g,fetchAllExperiences:d,fetchAllExperiencesMulti:u,fetchExperienceForPlacements:c,triggerExperimentsForPlacement:p,viewExperience:m}),[i,s,g,d,u,c,p,m])}},984225:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(785893);let a=(0,l.jsx)("svg",{fill:"none",height:"5",viewBox:"0 0 37 5",width:"37",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("rect",{fill:"#E9E9E9",height:"5",rx:"2.5",width:"37"})}),n=a},301723:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var l=i(667294),a=i(883119);let n=(0,l.createContext)();var r=i(785893);function s(e){(0,l.useContext)(n);let{alt:t,color:i,children:s,crossOrigin:o,decoding:d,elementTiming:u,fetchPriority:c,fit:p,loading:m,naturalHeight:h,naturalWidth:g,onError:_,onLoad:y,role:v,sizes:f,src:x,srcSet:S}=e;return(0,r.jsx)(a.Ee,{alt:t,color:i,crossOrigin:o,decoding:d,elementTiming:u,fetchPriority:c,fit:p,loading:m,naturalHeight:h,naturalWidth:g,onError:_,onLoad:y,role:v,sizes:f,src:x,srcSet:S,children:s})}},18514:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>g});var l=i(667294),a=i(883119),n=i(407043),r=i(319915),s=i(463076),o=i(551983),d=i(444445),u=i(391254),c=i(773285),p=i(780280),m=i(67347),h=i(785893);function g({cacheKey:e,columnWidth:t,experimentalTwoColItems:i=!1,flexible:g,gutterWidth:_=d.ZZ,isFetching:y,isGridCentered:v=!0,renderItem:f,items:x,layout:S,loadItems:b,masonryRef:w,minCols:P=d.yc,paddingStyle:I="simplified",scrollContainerRef:T,serverRender:k=!0,virtualize:E=!0}){var j,A;let F;let{isRTL:C}=(0,p.B)(),{logContextEvent:R}=(0,n.v)(),{checkExperiment:D}=(0,c.F)(),O=D("web_masonry_virtual_buffer_factor").group,L=null!==(j=({enabled_0_3:"0.3",enabled_0_5:"0.5",enabled_0_9:"0.9",enabled_1_1:"1.1",enabled_1_3:"1.3"})[O])&&void 0!==j?j:.7,N="simplified"===I,Z=null!==(A=N?d.oX:_)&&void 0!==A?A:d.ZZ,M=N?16:6,K=(0,l.useRef)(!0);return(0,l.useEffect)(()=>{K.current&&(K.current=!1)},[]),v&&K.current&&(F="gridCentered"),(0,h.jsxs)("div",{className:F,children:[k&&K&&(0,h.jsx)(u.Z,{unsafeCSS:g?function({isRTL:e,maxItemWidth:t=300,maxColumns:i=16,minColumns:l=2}){let a=`
.gridCentered {
  margin-left: auto;
  margin-right: auto;
  max-width: ${i*t}
}

.gridCentered .static {
  position: absolute !important;
  visibility: hidden !important;
}

@media (min-width: ${i*t}px) {
  .gridCentered .static:nth-child(-n+${i}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }

  .gridCentered .static:nth-child(-n+${i}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }

  .gridCentered .static {
    width: ${t}px !important;
  }
}
`;for(let n=l;n<i+1;n+=1){let i=n===l?0:(n-1)*t+1;a+=`
@media (min-width: ${i}px) and (max-width: ${n*t}px) {
  .gridCentered .static:nth-child(-n+${n}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }

  .gridCentered .static {
    width: calc(100% / ${n}) !important;
  }
}
`}return a}({isRTL:C,maxItemWidth:(t||d.yF)+Z,maxColumns:x.length||d.g5,minColumns:P||d.yc}):(0,s.Z)({isRTL:C,itemWidth:(t||d.yF)+Z,maxColumns:x.length||d.g5,minColumns:P||d.yc})}),(0,h.jsx)(o.Z,{_logTwoColWhitespace:e=>{(0,m.S0)("webapp.masonry.twoColWhitespace",e,{sampleRate:1,tags:{columnWidth:t,minCols:P}}),R({event_type:14705,component:14468,aux_data:{whitespace_px:e}})},_twoColItems:i,cacheKey:e,columnWidth:(null!=t?t:d.yF)+Z,gutterWidth:0,items:x,layout:g?k?"serverRenderedFlexible":"flexible":null!=S?S:"basic",loadItems:()=>{!y&&b&&b()},masonryRef:w,minCols:P,renderItem:e=>(0,h.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{paddingBottom:M,paddingLeft:Z/2,paddingRight:Z/2}},children:(0,h.jsx)(r.Z,{name:"MasonryItem",children:f(e)})}),scrollContainerRef:T,virtualBufferFactor:L,virtualize:E})]})}},463076:(e,t,i)=>{"use strict";function l({isRTL:e,itemWidth:t=236,maxColumns:i=16,minColumns:l=2}){let a=`
.gridCentered {
  margin-left: auto;
  margin-right: auto;
}
.gridCentered .static {
  position: absolute;
  visibility: hidden;
}
`;for(let n=l;n<i+1;n+=1){let i=n===l?0:n*t;a+=`
@media (min-width: ${i}px) and (max-width: ${(n+1)*t-1}px) {
  .gridCentered {
    width: ${n*t}px;
  }
  .gridCentered .static:nth-child(-n+${n}) {
    position: static !important;
    visibility: visible !important;
    float: ${e?"right":"left"};
    display: block;
  }
}
`}return a}i.d(t,{Z:()=>l})},357998:(e,t,i)=>{"use strict";i.d(t,{Q:()=>r});var l=i(422578),a=i(273213),n=i(681669);function r(e,t,{useLegacyAdapter:i}){if(null==t)return{data:null,childDataKey__DEPRECATED:null};let r=(0,a.B)(t);if("deprecated"===r.type){let{data:t}=r;return null==t?{data:null,childDataKey__DEPRECATED:r}:{data:(0,n.V4)(e,i)(t),childDataKey__DEPRECATED:r}}let s=(0,l.useFragment)(e,r.data);return{data:s,childDataKey__DEPRECATED:{type:"graphqlRef",data:s}}}},694379:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(892819),a=i(780280),n=i(785893);let r=({currency:e,maximumFractionDigits:t,minimumFractionDigits:i,shortform:r,shortformMaximumFractionDigits:s,formatStyle:o,uplimit:d,value:u})=>{let c=(0,l.Z)();return(0,n.jsx)(a.LC,{children:l=>c(l.locale||"en-US",u,{currency:e,maximum_fraction_digits:t,minimum_fraction_digits:i,shortform:r,shortform_maximum_fraction_digits:s,style:o,uplimit:d})})}},479216:(e,t,i)=>{"use strict";i.d(t,{MF:()=>n,PB:()=>r,Ul:()=>s,XD:()=>l});let l={AUD:"A$",BRL:"R$",CAD:"$",CZK:"K",DKK:"kr",EUR:"",GBP:"\xa3",HUF:"Ft",MXN:"$",NOK:"kr",NZD:"NZ$",RON:"lei",SEK:"kr",USD:"$",JPY:"\xa5",CHF:""},a=function(e){let t=1.1.toLocaleString(e).substring(1,2);return t},n=function(e,t){return","===a(t)&&e&&e.length>0&&!isNaN(e)?e.replace(".",","):e},r=function(e,t){return","===a(t)&&e?e.replace(",","."):e};function s(e,t,i,l=!1){let{minimumFractionDigits:a,maximumFractionDigits:n}=new Intl.NumberFormat(t,{style:"currency",currency:i}).resolvedOptions(),r=void 0===a?2:a,s=void 0===n?2:n;return e.toLocaleString(t,{maximumFractionDigits:l&&s>0?3:s,minimumFractionDigits:l&&r>0?3:r})}},529518:(e,t,i)=>{"use strict";function l(e,t){let i=e*Math.pow(10,t),l=Math.round((i-parseInt(i,10))*10)/10;return -.5===l&&(l=-.6),i=Math.round(parseInt(i,10)+l)/Math.pow(10,t)}function a(e){let t=parseFloat(e),i=l(t,2);return i?i.toFixed(2):e}function n(e,t=!1,i=""){let l=100,a=1e4;if(i){let{maximumFractionDigits:e}=new Intl.NumberFormat(void 0,{style:"currency",currency:i}).resolvedOptions();"number"==typeof e&&(a=1e6/(l=Math.pow(10,e)))}return t&&(l=1e3,a=1e3),Math.round(e*l)*a}function r(e,t=!1){if(Number.isNaN(e))return 0;let i=1e6;return t&&(i=1e6),e/i}function s(e){return e?a(r(e).toString()):""}i.d(t,{$X:()=>r,Hy:()=>s,c3:()=>p,cq:()=>a,q$:()=>l,qq:()=>c,y:()=>n});let o={fractionalCentFormatData:{},formatData:{}};function d(e){return e&&(e=e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")),e}function u(e,t=!1){let i=t?"fractionalCentFormatData":"formatData",l=o[i][e];if(!l){let a=2,n=2,r=-9999.99;t&&(a=3,n=3,r=-9999.999);let s=new Intl.NumberFormat(e,{minimumFractionDigits:a,maximumFractionDigits:n}),u=s.formatToParts(r),c=u.find(e=>"minusSign"===e.type),p=u.find(e=>"group"===e.type),m=u.find(e=>"decimal"===e.type),h=p?p.value:"",g=d(h),_=m?m.value:"",y="[^0-9"+g+d(_)+d(c?c.value:"")+"]";l={format:s,decimal:m?m.value:null,group:h,groupRegex:RegExp(g||"","g"),cleaner:RegExp(y,"g")},o[i][e]=l}return l}function c(e,t,i=!1){if("number"==typeof e)return e;if("string"!=typeof e)return NaN;let l=u(t,i),a=e.replace(l.cleaner,"");return l.decimal&&(a=a.replace(l.decimal,"!_!")),l.group&&(a=a.replace(l.groupRegex,"")),parseFloat(a=a.replace("!_!","."))}function p(e,t,i=!1){let l=u(t,i);return l.format.format(e)}},892819:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var l=i(898781),a=i(66699);let n=(e,t)=>{let i=t||0,l=10**i,a=+(i?e*l:e).toFixed(8),n=Math.floor(a),r=a-n,s=r>.49999999&&r<.50000001?n%2==0?n:n+1:Math.round(a);return i?s/l:s},r=({maximumFractionDigits:e,minimumFractionDigits:t,style:i,currency:l})=>{let a={maximumFractionDigits:e,minimumFractionDigits:t};return i?{...a,style:i,..."currency"===i?{currency:l,currencyDisplay:"symbol"}:{}}:a},s=e=>{try{0..toLocaleString([e])}catch(e){return!1}return!0},o=(e,t)=>{if(t){let{minimumFractionDigits:i,maximumFractionDigits:l}=new Intl.NumberFormat(e,{style:"currency",currency:t}).resolvedOptions();if(void 0!==i&&void 0!==l)return{minimumFractionDigits:i,maximumFractionDigits:l}}return{minimumFractionDigits:2,maximumFractionDigits:2}};function d(){let e=(0,l.ZP)();return(t,i,l)=>{let d=0,u=0,c=l&&l.style||void 0,p=l&&l.shortform||!1,m=l&&l.uplimit||void 0,h=l&&l.currency||void 0,g=!!m&&i>=m,_=m&&g?m:i;if("currency"===c){let{minimumFractionDigits:e,maximumFractionDigits:i}=o(t,h);d=void 0===l||void 0===l.maximum_fraction_digits?i:l.maximum_fraction_digits,u=void 0===l||void 0===l.minimum_fraction_digits?e:l.minimum_fraction_digits}else d=void 0===l||void 0===l.maximum_fraction_digits?0:l.maximum_fraction_digits,u=void 0===l||void 0===l.minimum_fraction_digits?0:l.minimum_fraction_digits;if(p&&_>999&&(d=void 0===l||void 0===l.shortform_maximum_fraction_digits?2:l.shortform_maximum_fraction_digits,u=0),d<u)return String(_);let y=_,v="",f=[{"100M":{value:1e8,localeKey:e._('', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for one hundred millions. This abbreviation is only used in Chinese, Japanese and Korean.')}},{"10k":{value:1e4,localeKey:e._('', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.', 'Abbreviation for ten thousand. This abbreviation is only used in Chinese, Japanese and Korean.')}}],x=[{b:{value:1e9,localeKey:e._('B', 'Abbreviation for one billion.', 'Abbreviation for one billion.')}},{m:{value:1e6,localeKey:e._('M', 'Abbreviation for one million.', 'Abbreviation for one million.')}},{k:{value:1e3,localeKey:e._('k', 'Abbreviation for one thousand.', 'Abbreviation for one thousand.')}}],S=/^zh|ja|ko/.test(t);if(p&&_>999){let e=S?f:x;for(let t=0;t<e.length;t+=1){let i=Object.keys(e[t])[0],l=e[t][i].value;if(_>=l){y=n(_/l*Math.pow(10,d))/Math.pow(10,d),v=e[t][i].localeKey;break}}}if(null==y)return"";let b=y.toLocaleString([s(t)&&"ar-SA"!==t?t:"en-US"],r({maximumFractionDigits:d,minimumFractionDigits:u,currency:h,style:c}));return v&&v.length>0?(0,a.Z)(e._('{{formattedNumber}}{{numberSuffix}}', 'i18n.usePrettyNumberFormat.prettyNumberFormat', 'String used to concatenate formatted number and localized number suffix'),{formattedNumber:b,numberSuffix:v})+(g?"+":""):b+(g?"+":"")}}},366428:(e,t,i)=>{"use strict";i.d(t,{F:()=>o,Z:()=>s});var l=i(667294),a=i(407043),n=i(124580);let r={ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},OneBar:{impressionType:"oneBarImpressions",idType:"onebarIdStr",eventType:9993},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},AdsPreview:{impressionType:"AdsPreviewImpression",idType:"AdsPreviewStr",eventType:8600}};function s({carouselData:e,closeupImpressionType:t,closeupNavigationType:i,componentType:s,contextLogData:o,clientTrackingParams:d,elementType:u,impressionAuxFields:c,inImpressionExp:p,impressionType:m,impressionsFramework:h,isPaused:g,loggingId:_,objectIdStr:y,slotIndex:v,trackCarousel:f,viewData:x,viewParameter:S,viewType:b}){let{logContextEvent:w}=(0,a.v)(),P=h||n.Z,I=(0,l.useRef)(null),T=l=>{var a,n,p,h,g,P,T;let k=r[m],E=k.idType,j={clientTrackingParams:d,endTime:l.endTime,[E]:_,slotIndex:v,time:l.startTime,renderDuration:l.endTime-l.startTime,type:t,...c,forcedExit:"removed"===l.forcedExit?0:void 0};"Pin"===m&&(j={...j,pinCellWidth:(null===(a=I.current)||void 0===a?void 0:a.getBoundingClientRect().width)||0,pinCellHeight:(null===(n=I.current)||void 0===n?void 0:n.getBoundingClientRect().height)||0,windowWidth:null===(p=window)||void 0===p?void 0:p.innerWidth,windowHeight:null===(h=window)||void 0===h?void 0:h.innerHeight});let A={component:s,object_id_str:y,view_type:b,view_data:x||{},view_parameter:S};f?e&&w({event_type:7352,event_data:{pinCarouselSlotImpressions:[{...j,carouselDataId:Number(e.id),carouselSlotId:(null===(g=e.carousel_slots)||void 0===g?void 0:g[null!==(P=e.index)&&void 0!==P?P:0])&&Number(e.carousel_slots[null!==(T=e.index)&&void 0!==T?T:0].id),slotIndex:e.index}]},...A,aux_data:{...o}}):w({clientTrackingParams:d,event_type:k.eventType,...A,element:u,event_data:{[k.impressionType]:"Story"===m?j:[j]},aux_data:{closeup_navigation_type:i,...o}})},k=(0,l.useCallback)(()=>{try{I.current instanceof HTMLElement&&P.start(I.current).onExitViewport(T).setDebugId(_||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}},[I.current]);(0,l.useEffect)(()=>(p&&!P.inExperiment&&P.setExperimentStatus(!0),g||k(),()=>{I.current instanceof HTMLElement&&P.stop(I.current)}),[k]);let E=(0,l.useRef)(g);return(0,l.useEffect)(()=>{E.current&&!g&&k(),E.current=g},[g,k]),I}let o=({children:e,...t})=>e({impressionTrackerRef:s(t)})},564194:(e,t,i)=>{"use strict";i.d(t,{Z:()=>p});var l=i(667294),a=i(973935),n=i(337815),r=i(407043),s=i(124580),o=i(785893);function d(e,t,i){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var l=i.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let u={Article:{impressionType:"articleImpressions",idType:"articleIdStr",eventType:3829},Pin:{impressionType:"pinImpressions",idType:"pinIdStr",eventType:18},Board:{impressionType:"boardImpressions",idType:"boardIdStr",eventType:3700},BoardMoreIdeasRep:{impressionType:"boardMoreIdeasFeedUpsellImpressions",idType:"boardIdStr",eventType:10054},Interest:{impressionType:"topicImpressions",idType:"topicIdStr",eventType:3703},Search:{impressionType:"searchImpressions",idType:"term",eventType:3803},Story:{impressionType:"storyImpression",idType:"idStr",eventType:170},ActivationCard:{impressionType:"activationCardImpressions",idType:"experienceIdStr",eventType:8547},User:{impressionType:"userImpressions",idType:"userIdStr",eventType:3704},News:{impressionType:"newsHubData",idType:"newsIdStr",eventType:4110},Guide:{impressionType:"guideImpressions",idType:"term",eventType:7573},TodayArticle:{impressionType:"todayArticleImpressions",idType:"todayArticleIdStr",eventType:8569},Banner:{impressionType:"bannerImpressions",idType:"userIdStr",eventType:9061},Comment:{impressionType:"commentImpressions",idType:"commentIdStr",eventType:9127}};class c extends l.Component{constructor(e){super(e),d(this,"trackImpression",()=>{try{let{isPromoted:e}=this.props;this.node=(0,a.findDOMNode)(this),this.node instanceof HTMLElement&&(!e||this.node.getElementsByTagName("img").length>0)&&this.impressionsFramework.start(this.node).onExitViewport(this.logImpression).setDebugId(this.props.loggingId||"unknown")}catch(e){window.console.error('Can only track impressions for type "HTMLElement"')}}),d(this,"logImpression",e=>{var t,i,l,a,r,s,o,d,c,p,m,h,g,_,y,v,f;let{carouselData:x,closeupImpressionType:S,closeupNavigationType:b,componentType:w,contextLogData:P,elementType:I,impressionAuxFields:T,impressionType:k,loggingId:E,objectIdStr:j,slotIndex:A,trackCarousel:F,viewData:C,viewParameter:R,viewType:D,logContextEvent:O}=this.props,L=u[k],N=L.idType,Z=e.forcedExit&&"removed"===e.forcedExit?0:void 0,M={endTime:e.endTime,[N]:E,slotIndex:A,time:e.startTime,renderDuration:e.endTime-e.startTime,type:S,...T,forcedExit:Z},K={};if("Pin"===k&&(M={...M,pinCellWidth:this.node.offsetWidth,pinCellHeight:this.node.offsetHeight,windowWidth:null===(t=window)||void 0===t?void 0:t.innerWidth,windowHeight:null===(i=window)||void 0===i?void 0:i.innerHeight},null!=T&&T.chromeAraViewExp&&null!==(l=this.props.children)&&void 0!==l&&null!==(a=l.props)&&void 0!==a&&null!==(r=a.pin)&&void 0!==r&&r.is_promoted)){let e=this.props.children.props.pin.attribution_source_id;(0,n.YS)(k,null!==(s=this.props.children.props.pin.is_promoted)&&void 0!==s?s:null,null!=e?e:null,null!==(o=this.props.children.props.pin.link)&&void 0!==o?o:null,null!==(d=this.props.children.props.pin.campaign_id)&&void 0!==d?d:null,null!==(c=T.araAuxData)&&void 0!==c?c:null,null!==(p=this.props.children.props.pin.advertiser_id)&&void 0!==p?p:null),K={is_arapi:!0,attribution_source_id:e||""}}F||O({event_type:L.eventType,component:w,element:I,event_data:{[L.impressionType]:"Story"===k?M:[M]},object_id_str:j,view_type:D,view_data:C||{},view_parameter:R,aux_data:{...P,...K,closeup_navigation_type:b}}),x&&F&&O({event_type:7352,component:w,event_data:{pinCarouselSlotImpressions:[{...M,..."canonical"===x.type?{carouselDataId:Number(null!==(m=x.carouselId)&&void 0!==m?m:0),slotIndex:x.index,carouselSlotId:x.carouselSlots[null!==(h=x.index)&&void 0!==h?h:0]&&Number(x.carouselSlots[null!==(g=x.index)&&void 0!==g?g:0].slotId)}:{carouselDataId:Number(null!==(_=x.id)&&void 0!==_?_:0),carouselSlotId:(null===(y=x.carousel_slots)||void 0===y?void 0:y[null!==(v=x.index)&&void 0!==v?v:0])&&Number(x.carousel_slots[null!==(f=x.index)&&void 0!==f?f:0].id),slotIndex:x.index}}]},object_id_str:j,view_type:D,view_data:C||{},view_parameter:R,aux_data:{...P,...K}})}),this.impressionsFramework=e.impressionsFramework||s.Z}componentDidMount(){this.props.inImpressionExp&&!this.impressionsFramework.inExperiment&&this.impressionsFramework.setExperimentStatus(!0),this.props.isPaused||this.trackImpression()}componentDidUpdate(e){e.isPaused&&!this.props.isPaused&&this.trackImpression()}componentWillUnmount(){let{isPromoted:e}=this.props;this.node instanceof HTMLElement&&(!e||this.node.getElementsByTagName("img").length>0)&&this.impressionsFramework.stop(this.node)}render(){return l.Children.only(this.props.children)}}function p(e){let{logContextEvent:t}=(0,r.v)();return(0,o.jsx)(c,{...e,logContextEvent:t})}},755742:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,F5:116,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},499659:(e,t,i)=>{"use strict";i.d(t,{Q6:()=>c,ZP:()=>o,qe:()=>d,yU:()=>u});var l=i(239745);let a=(e,t)=>e.length===t.length&&e.every((e,i)=>e===t[i]),n=e=>e;function r(e,t=a,i=n){return function(l){let a=[];return function(...n){let r=a.find(e=>t(e.args,i(n)));if(r)return r.result;let s=l(...n);return a.push({args:i(n),result:s}),e&&a.length>e&&a.shift(),s}}}let s=r(),o=s,d=r(1),u=r(void 0,a,e=>[JSON.stringify(e)]),c=r(0,(e,t)=>e.length===t.length&&e.every((e,i)=>(0,l.Z)(e,t[i])))},752802:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});let l=["564x","736x","orig","474x","236x"],a=({images:e={},resolutionPreferences:t=l})=>{for(let i of t)if(e[i]&&e[i].url)return e[i];return null}},248975:(e,t,i)=>{"use strict";function l({embedSrc:e,embedType:t,imagesUrls:i,preferredResolution:l,excludeOriginals:a}){if(!e&&!t&&!i)return"";if("gif"===t)return e||"";if(!i)return"";if(l){let e="474x"===l&&i["474x"]||"236x"===l&&i["236x"]||i["736x"];if(e)return e}let n=Object.keys(i).reduce((e,t)=>{try{let l=t.split("x")[0];if(Number.isNaN(Number(l)))return{...e,[t]:i[t]};return{...e,[l]:i[t]}}catch(t){return e}},{}),r=Object.keys(n);a&&"orig"===r[r.length-1]&&r.pop();let s=r.pop();return n[s]||""}i.d(t,{Z:()=>l})},223008:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var l,a=i(667294);i(167912);var n=i(916117);let r=void 0!==l?l:l=i(469656);function s({pinKey:e,maxWidth:t}){let{data:i}=(0,n.u)(r,e),l=(null==i?void 0:i.imageSpec_564x)||(null==i?void 0:i.imageSpec_736x)||(null==i?void 0:i.imageSpec_orig)||(null==i?void 0:i.imageSpec_474x)||(null==i?void 0:i.imageSpec_236x),s=(null==l?void 0:l.width)||1,o=(null==l?void 0:l.height)||1,d=(null==l?void 0:l.url)||"",u=function(e,t,i=564){return e>i&&(t*=i/e,e=i),{width:e,height:t}}(s,o,t),c=(0,a.useCallback)(()=>({width:u.width,height:u.height,url:d}),[u.height,u.width,d]);return{getNormalizedPinImage:c}}},269051:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s}),i(167912);var l,a=i(916117),n=i(898781);let r=void 0!==l?l:l=i(47737),s=e=>{let t;let i=(0,n.ZP)(),{data:l}=(0,a.u)(r,e),s=l.trackedLink||l.link||l.imageSpec_orig&&l.imageSpec_orig.url,{richMetadata:o,richSummary:d}=l,u=i._('Saved from ', 'Closeup pin annotation', 'Closeup pin annotation');if(o&&o.products&&o.products[0]&&o&&o.products[0].name&&o.products[0].offerSummary){var c,p;u=i._('Product sold by ', 'pin annotation', 'pin annotation'),t=null===(c=(null===(p=o.products)||void 0===p?void 0:p[0])||void 0)||void 0===c?void 0:c.offerSummary}return!t&&d&&d&&d.products&&d.products[0]&&d&&d.products[0].name&&d.products[0].offerSummary&&(u=i._('Product sold by ', 'pin annotation', 'pin annotation')),{pinLink:s,pinCreditPrefix:u,pinTitle:l.closeupUnifiedTitle,pinDescription:l.closeupUnifiedDescription,pinCategory:l.category}}},53199:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r}),i(167912);var l,a=i(916117);let n=void 0!==l?l:l=i(460863),r=e=>{let{data:t}=(0,a.u)(n,e),i=[["60x60",null==t?void 0:t.imageSpec_60x60],["136x136",null==t?void 0:t.imageSpec_136x136],["170x",null==t?void 0:t.imageSpec_170x],["236x",null==t?void 0:t.imageSpec_236x],["474x",null==t?void 0:t.imageSpec_474x],["564x",null==t?void 0:t.imageSpec_564x],["736x",null==t?void 0:t.imageSpec_736x],["600x315",null==t?void 0:t.imageSpec_600x315],["orig",null==t?void 0:t.imageSpec_orig]];return i.reduce((e,[t,i])=>i?{...e,[t]:i.url}:e,{})}},692627:(e,t,i)=>{"use strict";function l({hasPin:e,hasPinRichMetadata:t,hasPinRichMetadataProducts:i,hasPinRichMetadataArticle:l,hasPinRichMetadataRecipe:a,hasPinStoryPinData:n}){if(e){if(t)return i?144:l?141:a?145:139;if(n)return 157}return 140}i.d(t,{Z:()=>l})},523657:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var l=i(667294);i(883119);var a=i(301723),n=i(785893);let r=e=>document.querySelector(`img[src="${e}"]`)||null,s=(e,t,i)=>{let a=(0,l.useRef)(null),n=(0,l.useRef)(null);(0,l.useEffect)(()=>{if(e!==a.current||i&&i!==n.current){a.current=e;let i=r(e);null!=i&&i.complete&&t()}n.current=i},[e,t,i])};function o({alt:e,children:t,color:i,elementTiming:l,isActive:r=!1,naturalHeight:o,naturalWidth:d,onLoad:u,src:c,fit:p="none"}){return s(c,u,r),(0,n.jsx)(a.Z,{alt:e,color:i,elementTiming:l,fit:p,naturalHeight:o,naturalWidth:d,onLoad:u,src:c,children:t})}},932995:(e,t,i)=>{"use strict";function l(e,t,i){let l=[...e],a=l.splice(t,1)[0];return l.splice(i,0,a),l}i.d(t,{Z:()=>l})},418614:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d});var l=i(784590),a=i(19121),n=i(616550),r=i(780280),s=i(50286),o=i(826067);function d({getOptions:e,checkExperiments:t,disableFetch:i,...d}){let u=function(){let e=(0,a.Z)();return{country:e.country||void 0,id:e.id||void 0,isAuth:e.isAuth,isEmployee:!!e.isEmployee,isPartner:!!e.isPartner,username:e.username||void 0}}(),{args:c,fetchDisabled:p}=function({checkExperiments:e,disableFetch:t,viewer:i}){var l;let a=(0,n.TH)(),d=(0,n.$B)(),u=(0,r.B)(),c=function({advertiser:e,deviceType:t,location:{pathname:i,search:l},inviteCode:a,match:{params:n,path:r},viewer:s}){let d={inviteCode:a,matchPath:r,params:n,parsedSearch:(0,o.mB)(l),pathname:i,search:l},u={country:s.country||void 0,id:s.id||void 0,isAuth:s.isAuth,isEmployee:!!s.isEmployee,isPartner:!!s.isPartner,username:s.username||void 0};return{advertiser:e,deviceType:t,routeData:d,user:u}}({advertiser:u.advertiser,deviceType:(0,s.Mq)(u),location:a,match:d,viewer:i,inviteCode:null!==(l=u.inviteCode)&&void 0!==l?l:""}),p=!!t&&t(c),m=!!p||!e||e(u.experimentsClient);return{args:c,fetchDisabled:p||!m}}({checkExperiments:t,disableFetch:i,viewer:u}),m=e?e(c):void 0;return(0,l.Z)(p?null:{options:m,...d})}},909499:(e,t,i)=>{"use strict";i.d(t,{Hd:()=>d,_R:()=>s,gi:()=>n,lw:()=>l,oD:()=>a,wF:()=>o,zh:()=>r});let l={PINS:"pins",PINS_BUYABLE:"buyable_pins",PINS_MINE:"my_pins",PINS_VIDEO:"videos",BOARDS:"boards",USERS:"users",IDEA_PINS:"idea_pins",MY_CONTENT:"my_content"},a=e=>{let t=Object.values(l).find(t=>t===e);return null!=t?t:void 0},n=e=>{switch(e){case l.PINS:return 0;case l.PINS_MINE:return null;case l.PINS_BUYABLE:return 1;case l.PINS_VIDEO:return 2;case l.BOARDS:return 3;case l.USERS:return 4;default:return null}},r=e=>{switch(e){case 0:return l.PINS;case 1:return l.PINS_BUYABLE;case 2:return l.PINS_VIDEO;case 3:return l.BOARDS;case 4:return l.USERS;default:return null}},s=e=>{switch(e){case l.PINS_MINE:return 107;case l.PINS_BUYABLE:return 254;case l.PINS_VIDEO:return 3306;case l.BOARDS:return 44;case l.USERS:return 45;case l.MY_CONTENT:return 189;case l.PINS:default:return 43}},o=e=>{switch(e){case l.PINS:return 60;case l.PINS_MINE:case l.MY_CONTENT:return 63;case l.PINS_BUYABLE:return 3800;case l.PINS_VIDEO:return 64;case l.BOARDS:return 61;case l.USERS:return 62;default:return null}},d=(e,t)=>{if(t)switch(e){case l.USERS:return 1000392;case l.PINS_BUYABLE:return 1000391;case l.PINS:default:return 29}switch(e){case l.USERS:return 1000432;case l.PINS_BUYABLE:return 1000433;case l.PINS:default:return 1000269}}},223815:(e,t,i)=>{"use strict";i.d(t,{U:()=>r,Z:()=>s});var l=i(755742),a=i(785893);let n=()=>{},r=e=>{e.stopPropagation(),e.nativeEvent&&e.nativeEvent.stopImmediatePropagation&&e.nativeEvent.stopImmediatePropagation()};function s({allowClickAndDrag:e,allowEsc:t,allowMediaPlay:i,allowScroll:s,children:o}){let d=e=>{t&&e.keyCode===l.Z.ESCAPE||r(e)};return(0,a.jsx)("div",{onAbort:r,onAnimationEnd:r,onAnimationIteration:r,onAnimationStart:r,onBlur:n,onCanPlay:i?n:r,onCanPlayThrough:r,onChange:r,onClick:e?n:r,onCompositionEnd:r,onCompositionStart:r,onCompositionUpdate:r,onContextMenu:r,onCopy:r,onCut:r,onDoubleClick:r,onDurationChange:r,onEmptied:r,onEncrypted:r,onEnded:r,onError:r,onFocus:n,onInput:r,onInvalid:r,onKeyDown:d,onKeyPress:d,onKeyUp:d,onLoad:r,onLoadedData:r,onLoadedMetadata:r,onLoadStart:r,onMouseDown:r,onMouseEnter:r,onMouseLeave:r,onMouseMove:e?n:r,onMouseOut:r,onMouseOver:r,onMouseUp:e?n:r,onPaste:r,onPause:r,onPlay:r,onPlaying:r,onProgress:r,onRateChange:r,onScroll:s?n:r,onSeeked:r,onSeeking:r,onSelect:r,onStalled:r,onSubmit:r,onSuspend:r,onTimeUpdate:r,onTouchCancel:r,onTouchEnd:e?n:r,onTouchMove:e?n:r,onTouchStart:e?n:r,onTransitionEnd:r,onVolumeChange:r,onWaiting:r,onWheel:r,children:o})}},622096:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(238381);let a=(0,l.Z)({type:"session"}),n=a},994912:(e,t,i)=>{"use strict";function l(e){return e.toLowerCase().charAt(0).toUpperCase()+e.toLowerCase().slice(1)}i.d(t,{Z:()=>l})},985913:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(858142);let a=/\{\{\s*(\w+)\s*\}\}/g,n=(e,t)=>(0,l.Z)(a,e,t)},858791:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l=e=>e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")},858142:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l=(e,t,i)=>t?t.replace(e,(e,t)=>i&&Object.prototype.hasOwnProperty.call(i,t)?i[t]:""):""},66699:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(985913),a=i(858791);let n=(e,t)=>{let i={};return Object.keys(t).forEach(e=>{i[e]=t[e]?(0,a.Z)(t[e].toString()):""}),(0,l.Z)(e,i)}},70061:(e,t,i)=>{"use strict";function l(e){return e.replace(/[_.-](\w|$)/g,(e,t)=>t.toUpperCase())}i.d(t,{Z:()=>l})},52022:(e,t,i)=>{"use strict";i.d(t,{S:()=>s,Z:()=>o});var l=i(667294),a=i(616550),n=i(53987),r=i(867820);let s=e=>(0,n.L6)(e)?"pin":(0,n.am)(e)?"board":(0,n.Xn)(e)?"login":(0,n.C$)(e)?"home":(0,n.cD)(e)?"profile":(0,n.dr)(e)?"ideas":(0,n.gT)(e)?"ideas-root":(0,n.tZ)(e)?"videos":(0,n.Q0)(e)?"videos-category":(0,n.$Y)(e)?"article":(0,n.E0)(e)?"shopping-spotlight":(0,n.Zz)(e)?"today":(0,n.j8)(e)?"unauth-profile":(0,n.f1)(e)?"shopping-root":(0,n.OX)(e)?"shopping-category":"other";function o(){let e=(0,a.TH)();return(0,l.useCallback)(({action:t,item:i,within:l})=>{let a=s(e);(0,r.My)(`logged_out_product.interaction.${a}.${t}`,{item:i||"none",within:l||"none"})},[e])}},477802:(e,t,i)=>{"use strict";i.d(t,{Qy:()=>d,Wu:()=>c,ZP:()=>u});var l=i(616550),a=i(883119),n=i(780280),r=i(826067),s=i(19121),o=i(785893);let d=()=>{let e=(0,s.Z)(),{isInternalIP:t}=(0,n.B)(),i=(0,l.TH)();return(t||e.isAuth&&e.isEmployee)&&Object.keys((0,r.mB)(i.search)).some(e=>e.startsWith("deb_"))};function u({data:e}){return(0,o.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{border:"2px solid red"}},"data-test-id":"debug-info",overflow:"auto",children:(0,o.jsx)("pre",{children:JSON.stringify(e,null,2).replace(/\\n/g,"\n")})})}let c=e=>(0,o.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{marginTop:10}},width:236,children:(0,o.jsx)(u,{...e})})},745312:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o,n:()=>r});var l=i(883119),a=i(667294),n=i(785893);function r({items:e,itemWidth:t,itemGap:i,numRows:l=1,actionItemType:n}){let r;let[s,o]=function(){let[e,t]=(0,a.useState)(0),i=(0,a.useRef)(null),l=(0,a.useCallback)(()=>{i.current&&t(i.current.clientWidth)},[i]);return(0,a.useEffect)(()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[l]),(0,a.useEffect)(l),[e,i]}(),d=Math.floor((s+i)/(t+i))*l||l,u=e.slice(0,d),c=[];switch(n){case"nextFour":d>=e.length?c=[u.pop()]:(u.pop(),c=e.slice(d-1,d+3));break;case"one":r=d>e.length?e[Math.floor(e.length/2)]:u.pop()}return{containerRef:o,itemsToRender:u,actionItem:r,nextFourItems:c}}let s={center:{outer:"center",inner:"center"},left:{outer:"start",inner:"start"},right:{outer:"end",inner:"end"}};function o({children:e,itemGap:t,containerRef:i,numRows:a=1,rowAlignment:r="center"}){let o=s[r];return(0,n.jsx)(l.xu,{ref:i,width:"100%",children:(0,n.jsx)(l.kC,{alignItems:"center",justifyContent:o.outer,children:(0,n.jsx)(l.kC,{gap:{row:Math.floor(t/4),column:0},justifyContent:o.inner,wrap:a>1,children:e})})})}},343341:(e,t,i)=>{"use strict";i.d(t,{F9:()=>n,Zo:()=>a});var l=i(425288);let{Provider:a,useHook:n}=(0,l.Z)("toastManagerContext")},280446:(e,t,i)=>{"use strict";function l(e){if((e||"").includes("--")){let t=e.split("--"),i=t.pop();return{text:t.join("--"),pinId:i}}return{text:"",pinId:e}}i.d(t,{Z:()=>l})},311541:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(667294);function a(e,t){let i=(0,l.useRef)([]),[a,n]=(0,l.useState)(),[r,s]=(0,l.useReducer)(null!=a?a:()=>t,t),o=(0,l.useCallback)(t=>{a?s(t):(i.current.length||e().then(e=>{n(()=>e.default)}),i.current=[...i.current,t])},[e,a]);return(0,l.useEffect)(()=>{a&&(i.current.forEach(s),i.current=[])},[a]),[r,o]}},411465:(e,t,i)=>{"use strict";i.d(t,{G:()=>s,Z:()=>o});var l=i(667294),a=i(616550),n=i(785893);let r=(0,l.createContext)(!0);function s({children:e}){let t=(0,a.TH)(),[i,s]=(0,l.useState)(!0),o=(0,l.useRef)(t);return(0,l.useEffect)(()=>{o.current!==t&&(o.current=t,s(!1))},[t]),(0,n.jsx)(r.Provider,{value:i,children:e})}function o(){return(0,l.useContext)(r)}},458101:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(667294);let a=()=>{let e=(0,l.useRef)(!1);return(0,l.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}},307603:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(985057);function a({x:e,y:t,w:i,h:a},n){return(0,l.Z)({x:e,y:t,w:i,h:a})?{x:n?parseInt(e,10):parseFloat(e),y:n?parseInt(t,10):parseFloat(t),w:n?parseInt(i,10):parseFloat(i),h:n?parseInt(a,10):parseFloat(a)}:{x:0,y:0,w:1,h:1}}},255164:(e,t,i)=>{"use strict";function l(e){let t;switch(e){case 1:t=1;break;case 2:t=2;break;case 3:t=3;break;case 4:t=4;break;case 5:t=5;break;case 6:t=6}return t}i.d(t,{Z:()=>l})},975540:(e,t,i)=>{"use strict";function l({cropArea:{x:e,y:t,w:i,h:l},scaledWidth:a,scaledHeight:n}){return{x:e/a,y:t/n,w:i/a,h:l/n}}i.d(t,{Z:()=>l})},599611:(e,t,i)=>{"use strict";function l({cropArea:e,scaledWidth:t,scaledHeight:i}){let l=e.h||0,a=e.w||0,n=e.x||0,r=e.y||0;return{h:Math.floor(l*i),w:Math.floor(a*t),x:Math.floor(n*t),y:Math.floor(r*i)}}i.d(t,{Z:()=>l})},94047:(e,t,i)=>{"use strict";function l({cropArea:e,cropSource:t,requestParams:i,searchQuery:l,surfaceType:a,title:n,trafficSource:r}){let s=[];if(e){let{x:t,y:i,w:l,h:a}=e;t>=0&&i>=0&&l>=0&&a>=0&&s.push(`x=${t}`,`y=${i}`,`w=${l}`,`h=${a}`)}t&&s.push(`cropSource=${t}`),a&&s.push(`surfaceType=${a}`),n&&s.push(`full_feed_title=${encodeURIComponent(n)}`),l&&s.push(`q=${l}`),r&&"unknown"!==r&&s.push(`rs=${r}`),i&&s.push(`requestParams=${encodeURIComponent(i)}`);let o=s.length?`?${s.join("&")}`:"";return o}i.d(t,{Z:()=>l})},297852:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(94047);function a({cropArea:e,cropSource:t,isProductPage:i,pinId:a,requestParams:n,searchQuery:r,surfaceType:s,title:o,trafficSource:d}){let u=(0,l.Z)({cropArea:e,cropSource:t,requestParams:n,searchQuery:r,surfaceType:s,title:o,trafficSource:d}),c="";return i&&(c="products/"),`/pin/${a}/visual-search/${c}${u}`}},985057:(e,t,i)=>{"use strict";function l({x:e,y:t,w:i,h:l}){return[e,t,i,l].every(e=>""!==e&&null!=e&&Number.isFinite(Number(e)))}i.d(t,{Z:()=>l})},873476:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var l=i(667294),a=i(616550),n=i(826067),r=i(50286),s=i(829407);function o(){let e=(0,r.HG)(),{action:t}=(0,a.k6)(),{path:i}=(0,a.$B)(),o=(0,a.TH)(),{entry:d}=(0,n.mB)(o.search),u="/pin/:id/related-products/all"===i,c="/pin/:id/visual-search/products"===i,[p,m]=(0,l.useState)(()=>{if("PUSH"!==t)return null;if(e){if(u&&("flashlight"===d||"stela"===d))return"feed_module";if("shop"===d)return"shop_the_look_module"}else if(c)return"feed_module";return null});return(0,s.Z)(()=>{m(null)}),p}},487392:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(780280),a=i(784590),n=i(19121);function r(){var e;let t=(0,l.B)(),i=(0,n.Z)(),{advertiser:r}=t,s=(0,a.Z)(null!=r&&r.merchant_id?null:{name:"UserResource",options:{user_id:r?r.owner_user_id:i.isAuth&&i.id,field_set_key:"merchant_summary"}});return{merchantId:(null==r?void 0:r.merchant_id)||(null===(e=s.data)||void 0===e?void 0:e.ppa_merchant_id)||"",advertiserId:(null==r?void 0:r.id)||"",ownerUserId:(null==r?void 0:r.owner_user_id)||(i.isAuth?i.id:""),advertiser:r}}},306732:(e,t,i)=>{"use strict";i.d(t,{Be:()=>l,J_:()=>r,MD:()=>a,Rd:()=>s,ss:()=>n});let l={1:"All Products",2:"Best Deals",3:"Most Popular",4:"Top Sellers",5:"Back In Stock",6:"New Arrivals"},a={campaignId:"createNewCampaign",objectiveType:"CATALOG_SALES",absolutify:!0},n="US",r="activated",s="ads_create_source_param"},785352:(e,t,i)=>{"use strict";i.d(t,{I:()=>o});var l=i(667294),a=i(898781),n=i(784590),r=i(306732);let s=(e,t,i)=>{if(i===r.Be[Number(t)]){if(1===Number(t))return e._('All Products', 'catalogs.productGroup.name.allProducts', 'Product group name All Products');if(2===Number(t))return e._('Best Deals', 'catalogs.productGroup.name.bestDeals', 'Product group name Best Deals');if(3===Number(t))return e._('Most Popular', 'catalogs.productGroup.name.mostPopular', 'Product group name Most Popular');if(4===Number(t))return e._('Top Sellers', 'catalogs.productGroup.name.topSellers', 'Product group name Top Sellers');else if(5===Number(t))return e._('Back In Stock', 'catalogs.productGroup.name.inStock', 'Product group name In Stock');else if(6===Number(t))return e._('New Arrivals', 'catalogs.productGroup.name.newArrivals', 'Product group name New Arrivals')}return i};function o(e={},t=!1,i=!1){let r=(0,a.ZP)(),o=(0,n.Z)(t?null:{name:"ProductGroupsResource",options:e,enabledRouteRefresh:!0,noCache:i}),d=(0,l.useMemo)(()=>o.data&&o.isLoaded?o.data.map(e=>(e.name=s(r,e.type,e.name),e)):[],[r,o.data,o.isLoaded]);return{...o,data:d}}},869899:(e,t,i)=>{"use strict";i.d(t,{r:()=>x,K:()=>f});var l=i(667294),a=i(425288),n=i(773285),r=i(784590),s=i(19121),o=i(389643),d=i(339363),u=i(70061);let c=e=>{let t={};for(let i in e)Object.prototype.hasOwnProperty.call(e,i)&&("object"!=typeof e[i]||null===e[i]||Array.isArray(e[i])?t[(0,u.Z)(i)]=e[i]:t[(0,u.Z)(i)]=c(e[i]));return t},p=(e,t)=>{let i=[];for(let l in e)l!==t&&i.push({id:l,...c(e[l])});let l=i.sort(({user:{businessName:e}},{user:{businessName:t}})=>e.localeCompare(t)),a=new Map;for(let e of l)a.set(e.id,e);return a},m={profiles:new Map,headerVisible:!1,orbacVisibility:!1,activeProfile:void 0,disableProfileChanger:!1},h=(e,t)=>{switch(t.type){case"LOAD_PROFILES":return{...e,profiles:t.payload};case"SET_ACTIVE_PROFILE":return{...e,activeProfile:t.payload};case"TOGGLE_HEADER_VISIBILITY":return{...e,headerVisible:t.payload};case"TOGGLE_ORBAC_VISIBILITY":return{...e,orbacVisibility:t.payload};case"TOGGLE_DISABLE_PROFILE_CHANGER":return{...e,disableProfileChanger:t.payload};default:return e}},g=({dispatch:e,isEnabled:t,state:i})=>{let{orbacVisibility:a,disableProfileChanger:n,headerVisible:r}=i,s=(0,l.useCallback)(i=>{t&&e({type:"SET_ACTIVE_PROFILE",payload:i})},[t,e]),o=(0,l.useCallback)(i=>{t&&e({type:"TOGGLE_ORBAC_VISIBILITY",payload:null!=i?i:!a})},[t,e,a]),d=(0,l.useCallback)(i=>{t&&e({type:"TOGGLE_DISABLE_PROFILE_CHANGER",payload:null!=i?i:!n})},[t,e,n]),u=(0,l.useCallback)(i=>{t&&e({type:"TOGGLE_HEADER_VISIBILITY",payload:null!=i?i:!r})},[t,e,r]);return{changeProfile:s,toggleORBACVisibility:o,toggleDisableProfileChanger:d,toggleHeaderVisibility:u}},_=e=>{let[t,i]=(0,l.useReducer)(h,m),a=g({dispatch:i,isEnabled:e,state:t}),{activeProfile:n,orbacVisibility:r}=t;(0,l.useEffect)(()=>{let e=(0,d.qn)("orbacActiveProfile",!1);e&&i({type:"SET_ACTIVE_PROFILE",payload:e})},[]),(0,l.useEffect)(()=>{let e=(0,d.qn)("orbacVisibilty",!1);e&&i({type:"TOGGLE_ORBAC_VISIBILITY",payload:e})},[]),(0,l.useEffect)(()=>{(0,d.Nh)("orbacVisibility",r)},[r]),(0,l.useEffect)(()=>{(0,d.Nh)("orbacActiveProfile",n)},[n]);let s=(0,l.useCallback)((e,t)=>{i({type:"LOAD_PROFILES",payload:p(e,t)})},[i]);return{state:t,actions:a,receiveProfiles:s}};var y=i(785893);let{Provider:v,useMaybeHook:f}=(0,a.Z)("RoleBasedAccessControlContext"),x=({children:e})=>{let t;let{checkExperiment:i}=(0,n.F)(),a=(0,s.Z)(),d=!!(a.isAuth&&a.isPartner&&i("web_m10n_business_access_orbac_www").anyEnabled),{state:u,actions:c,receiveProfiles:p}=_(d),{activeProfile:m,headerVisible:h,profiles:g=[]}=u,f=g?Array.from(g.values()):[],x=(0,o.Z)(f),S=!!a.isAuth&&f.length>0&&x,b=a.isAuth?a.id:"",w=a.isAuth?a.username:"",{changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:T,toggleHeaderVisibility:k}=c;(0,l.useEffect)(()=>{if(d){if("string"==typeof x){P(x);return}m||P(b)}},[x,b,d,P,m]),(0,l.useEffect)(()=>{d&&(S&&!h&&k(!0),!S&&h&&k(!1))},[k,S,d,h,g]);let{data:E}=(0,r.Z)(d?{name:"ApiResource",options:{url:"/vx/business_access/profiles/",disable_auth_failure_redirect:!0}}:null),j=null==E?void 0:E.profiles;a&&a.isAuth&&u.activeProfile===a.id?t={id:a.id,permissions:["OWNER"],user:{username:w,businessName:a.fullName,imgUrl:a.imageSmallUrl}}:m&&u.profiles&&(t=u.profiles.get(m)),(0,l.useEffect)(()=>{j&&p(j,b)},[p,j,b]);let A=u.profiles?Array.from(u.profiles.values()):[];return(0,y.jsx)(v,{value:{profiles:A,headerVisible:u.headerVisible,activeProfile:t,changeProfile:P,toggleORBACVisibility:I,toggleDisableProfileChanger:T,toggleHeaderVisibility:k},children:e})}},717615:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(773285),a=i(869899),n=i(389643);let r=()=>{let{checkExperiment:e}=(0,l.F)(),t=(0,a.K)(),{activeProfile:i}=t||{},r=e("web_m10n_business_access_orbac_www").anyEnabled,s=(0,n.Z)((null==t?void 0:t.profiles)||[]),{anyEnabled:o}=e("useorbacroutematcher_in_useorbacactingas");return r&&(!o||s)&&i&&(i.viewerMeetsMfaRequirement||(i.permissions||[]).includes("OWNER"))?i:Object.freeze({})}},389643:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var l=i(616550),a=i(53987),n=i(773285),r=i(19121),s=i(350118);let o=e=>{var t,i,o,d;let u=(0,l.TH)(),c=(0,r.Z)(),p=(0,s.S6)(),{anyEnabled:m}=(0,n.F)().checkExperiment("web_m10n_business_access_orbac_www"),h=(0,l.$B)("/:username"),g=null==h?void 0:null===(t=h.params)||void 0===t?void 0:t.username,_=(0,l.$B)("/pin/:id"),y=null!=_&&null!==(i=_.params)&&void 0!==i&&!!i.id&&(null===(o=p(_.params.id))||void 0===o?void 0:null===(d=o.pinner)||void 0===d?void 0:d.id);if((0,a.ej)(u))return!1;if((0,a.RU)(u))return!0;if((0,a.mY)(u))return m;let v=e.concat(c.isAuth?{user:{username:c.username},id:c.id}:{}).find(e=>{let{user:t={},id:i}=e||{},{username:l}=t;return(!!l&&!!g||!!y&&!!i)&&(l===g||y===i)});return!!v&&v.id}},231947:(e,t,i)=>{"use strict";i.d(t,{D3:()=>d,DX:()=>s,KY:()=>u,Ms:()=>l,N1:()=>c,_P:()=>r,lJ:()=>n,nl:()=>a,q6:()=>o});let l=(e,t)=>{let i=e&&e.isAuth?e.username:"";return e&&t&&t.user&&t.user.username&&(i=t.user.username),i},a=(e,t)=>!!(t&&t.user&&e&&e.isAuth&&t.id!==e.id?t.user.eligibleForStlTool:e&&e.isAuth&&e.eligibleForStlTool),n=(e,t)=>e&&e.isAuth&&t&&t.id&&t.id!==e.id?t.id:"",r=(e,t,i)=>{var l;return i&&i.user&&t&&t.isAuth&&i.id!==t.id?i.user.merchantId:null===(l=e.advertiser)||void 0===l?void 0:l.merchant_id},s=(e,t,i)=>i&&i.user&&e.isAuth&&i.id!==e.id?i.user.scheduledPinCount||0:e.isAuth&&t&&t.scheduled_pin_count||0,o=(e,t,i)=>{let l=e&&e.isAuth&&i&&i.id&&i.id!==e.id&&i.id===t;return!!l},d=(e,t,i)=>{let l=o(e,t,i)||e&&e.isAuth&&t===e.id;return!!l},u=(e,t,i)=>{let l=t&&t.owner&&t.owner.id||"";return d(e,l,i)};function c(e,t,i){let l=t?t.id:"";return d(e,l,i)}},225692:(e,t,i)=>{"use strict";i.d(t,{X:()=>a,Z:()=>n});var l=i(667294);let a=120;function n(e,t=0,i=a){let[n,r]=(0,l.useState)(e?"active":"inactive");return(0,l.useEffect)(()=>{if(e){if(t){let e=setTimeout(()=>r("active"),t);return()=>{clearTimeout(e)}}r("active")}else{let e=setTimeout(()=>r("inactive"),i);return()=>{clearTimeout(e)}}},[e]),n}},841509:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(883119),a=i(785893);function n({children:e,additionalStyles:t={}}){return(0,a.jsx)(l.xu,{position:"absolute",top:!0,left:!0,right:!0,bottom:!0,dangerouslySetInlineStyle:{__style:{pointerEvents:"none",...t}},"data-test-id":"contentLayer",children:e})}},525199:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(883119),a=i(225692),n=i(785893);function r({children:e,fadeInDuration:t=0,fadeOutDuration:i=a.X,visibility:r}){return"none"!==r&&e?(0,n.jsx)(l.xu,{dangerouslySetInlineStyle:{__style:{hidden:{opacity:0,transition:i?`opacity ${i}ms ease`:void 0},visible:{opacity:1,transition:t?`opacity ${t}ms ease`:void 0}}[r]},children:e}):null}},833991:(e,t,i)=>{"use strict";i.d(t,{HW:()=>r,YW:()=>c,i3:()=>p,o2:()=>u});var l=i(667294),a=i(425288),n=i(785893);let r=660,s={educationId:null,paddingRight:0,zIndex:r};function o(e,t){switch(t.type){case"FOOTER_SET_EDUCATION_ID":let{educationId:i}=t.payload;return{...e,educationId:i};case"FOOTER_SET_PADDING_RIGHT":let{paddingRight:l}=t.payload;return{...e,paddingRight:l};case"FOOTER_SET_Z_INDEX":let{zIndex:a}=t.payload;return{...e,zIndex:a};default:return e}}let{Provider:d,Consumer:u,useHook:c}=(0,a.Z)("footerContext");function p({children:e}){let[t,i]=(0,l.useReducer)(o,s),a=(0,l.useCallback)(e=>i({type:"FOOTER_SET_PADDING_RIGHT",payload:{paddingRight:e}}),[]),r=(0,l.useCallback)(e=>i({type:"FOOTER_SET_EDUCATION_ID",payload:{educationId:e}}),[]),u=(0,l.useCallback)(e=>i({type:"FOOTER_SET_Z_INDEX",payload:{zIndex:e}}),[]),c=(0,l.useMemo)(()=>({...t,setEducationId:r,setPaddingRight:a,setZIndex:u}),[t,r,a,u]);return(0,n.jsx)(d,{value:c,children:e})}},427806:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(883119),a=i(785893);function n({text:e}){return(0,a.jsx)(l.xu,{display:"visuallyHidden",children:(0,a.jsx)(l.X6,{accessibilityLevel:1,children:e})})}},872482:(e,t,i)=>{"use strict";i.d(t,{D:()=>a,a:()=>n});var l=i(425288);let{Provider:a,useMaybeHook:n}=(0,l.Z)("unauthPageWrapperContext")},8742:(e,t,i)=>{"use strict";i.d(t,{CC:()=>c,VU:()=>m,ZP:()=>_,hW:()=>p,jz:()=>h}),i(167912);var l,a=i(240684),n=i(916117),r=i(50286),s=i(19121),o=i(202873),d=i(986901),u=i(785893);let c=(0,a.ZP)({resolved:{},chunkName:()=>"AuthDesktopPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(67631),i.e(60310),i.e(95044),i.e(38135),i.e(2984)]).then(i.bind(i,656226)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>656226}),p=(0,a.ZP)({resolved:{},chunkName:()=>"DefaultPinRep",isReady(e){let t=this.resolve(e);return!0===this.resolved[t]&&!!i.m[t]},importAsync:()=>Promise.all([i.e(97270),i.e(10966),i.e(18352),i.e(38135),i.e(39921)]).then(i.bind(i,369083)),requireAsync(e){let t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then(e=>(this.resolved[t]=!0,e))},requireSync(e){let t=this.resolve(e);return i(t)},resolve:()=>369083}),m=(0,d.Z)(()=>Promise.all([i.e(67631),i.e(60310),i.e(95044),i.e(38135),i.e(2984)]).then(i.bind(i,656226))),h=(0,d.Z)(()=>Promise.all([i.e(97270),i.e(10966),i.e(18352),i.e(38135),i.e(39921)]).then(i.bind(i,369083))),g=void 0!==l?l:l=i(875666);function _(e){let t=(0,r.HG)(),{lazyComponentEnabled:i}=(0,o.b)(),l=(0,s.Z)(),a=l&&l.isAuth&&t,{data:d}=(0,n.u)(g,e.duploQueryRef);if(a&&!e.duploQueryRef){let{disableReaction:t,disableRounding:l,disableAppUpsell:a,duploDedupeVisualAnnotations:n,duploDisablePinCardPadding:r,duploFeedItemProps:s,duploIsSquarePin:o,duploLazyLoadImage:d,duploOneTapSave:p,duploPinCardDetailsMargin:h,duploPriorityFetchImage:g,duploQueryRef:_,duploShouldAddNiiSearchParamToImageUrls:y,duploShouldAllowProductPriceIndicator:v,duploConversationPin:f,topLevelTrafficSource:x,topLevelTrafficSourceDepth:S,trafficSource:b,...w}=e;return i?(0,u.jsx)(m,{...w}):(0,u.jsx)(c,{...w})}let{attributionOption:_,blockClickEvents:y,borderStyle:v,disableHover:f,imageHeightModifier:x,imageOnlyOption:S,onError:b,onLoad:w,pin:P,pinImageCrop:I,pinImageFit:T,resolution:k,rounding:E,saveButtonOptions:j,authDesktopSelectionState:A,authDesktopSurface:F,pinOwner:C,...R}=e;return i?(0,u.jsx)(h,{...R,duploQueryRef:d}):(0,u.jsx)(p,{...R,duploQueryRef:d})}},350118:(e,t,i)=>{"use strict";i.d(t,{AF:()=>s,H0:()=>o,S6:()=>d,_S:()=>u});var l=i(702664),a=i(425288),n=i(785893);let{Provider:r,useHook:s,useMaybeHook:o}=(0,a.Z)("Pins");function d(){let e=s();return t=>e[t]}function u({children:e}){let t=(0,l.useSelector)(({pins:e})=>e,l.shallowEqual);return(0,n.jsx)(r,{value:t,children:e})}},284367:(e,t,i)=>{"use strict";i.d(t,{Z:()=>g});var l=i(667294),a=i(883119),n=i(920231),r=i(444445),s=i(317254),o=i(740990),d=i(50286),u=i(829407),c=i(679031),p=i(22145),m=i(698629),h=i(785893);function g({customLayoutType:e,emptyState:t,feedItems:i,feedKey:g,pagination:{hasNext:_,isLoadingNext:y,loadNext:v,refetch:f},pullToRefresh:x,renderFeedItem:S,serverRender:b}){let w=(0,d.HG)(),[P,I]=(0,l.useState)(!1),T="userSearch"===e?window.innerWidth-16:200,k=y&&0===i.length&&!P,E="desktopFlashlight"===e?0:r.qG;return(0,u.Z)(()=>(window.addEventListener("online",v),()=>window.removeEventListener("online",v))),(0,h.jsxs)(a.xu,{"data-test-id":"MobileFeed",children:[(0,h.jsx)(p.Z,{enabled:!!x,onPull:()=>{f(),I(!0)},refreshing:P}),(0,h.jsxs)(a.xu,{marginStart:E,marginEnd:E,"data-test-id":"grid",opacity:P?.5:1,children:[(0,h.jsx)(s.Z,{isAtEndOfFeed:!_,itemCount:i.length,children:i.length?(0,h.jsx)(a.xu,{"data-test-id":"feed",marginTop:(0,c.kk)({isDesktop:w}),children:(0,h.jsx)(o.Z.Consumer,{children:t=>(0,h.jsx)(l.Fragment,{children:(0,h.jsx)(c.c$,{children:(0,h.jsx)(n.Z,{cacheKey:g,id:b?g:void 0,items:i,scrollContainerRef:t,serverRender:b,columnWidth:w?r.yF:T,renderItem:({data:e,itemIdx:t})=>S(e,t),gutterWidth:w?4*r.jC:void 0,loadItems:v,minCols:"userSearch"===e?1:2})})})})}):y?(0,h.jsx)(c.gG,{}):null!=t?t:null}),k&&(0,h.jsx)(a.xu,{column:12,paddingY:2,children:(0,h.jsx)(m.Z,{partialViewportWidth:"desktopFlashlight"===e})})]})]})}},966676:(e,t,i)=>{"use strict";i.d(t,{Nb:()=>s,Of:()=>o,YO:()=>r,ZP:()=>c,x4:()=>u});var l=i(667294),a=i(499659),n=i(92261);let r=({showProductDetailPage:e,isLargerPane:t,showCloseupContentRight:i})=>e&&t?i?n.Uj:n.zT:1,s=(0,a.qe)(({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:l,viewportSize:a,maxWidth:n,descriptionPaneWidth:r})=>({paneWidth:e,pdpCarouselSlotToPaneRatio:t,showCloseupContentRight:i,showProductDetailPage:l,viewportSize:a,maxWidth:n,descriptionPaneWidth:r})),o={showCloseupContentRight:!0,showProductDetailPage:!1,viewportSize:"lg",paneWidth:n.Gg,pdpCarouselSlotToPaneRatio:1,maxWidth:n.u6,descriptionPaneWidth:n.u6-n.Gg},d=(0,l.createContext)(o);function u(){let e=(0,l.useContext)(d);if(!e)throw Error("useCloseupContext must be used within CloseupContextProvider");return e}let c=d},92261:(e,t,i)=>{"use strict";i.d(t,{$T:()=>_,CI:()=>n,Ch:()=>s,Gb:()=>o,Gg:()=>l,Ie:()=>p,KP:()=>m,Kn:()=>r,Uj:()=>d,bx:()=>h,d2:()=>c,g9:()=>g,iB:()=>y,u6:()=>a,zT:()=>u});let l=508,a=2*l,n=488,r=992,s=672,o=1176,d=.6,u=.84,c=40,p=72,m=740,h=912,g=32,_=24,y={ARTICLE:"https://schema.org/Article",BRAND:"https://schema.org/Brand",PRODUCT:"https://schema.org/Product",RECIPE:"https://schema.org/Recipe",OFFER:"https://schema.org/Offer",OUT_OF_STOCK:"https://schema.org/OutOfStock",PERSON:"https://schema.org/Person"}},398789:(e,t,i)=>{"use strict";i.d(t,{Z:()=>b});var l=i(667294),a=i(883119),n=i(898781),r=i(773285),s=i(523657),o=i(780280),d=i(700380),u=i(50286),c=i(411465),p=i(398061),m=i(616550),h=i(667679),g=i(622096),_=i(867820),y=i(52022),v=i(785893);function f({setShowClickthroughOverlay:e,isEligibleForPdp:t,isEligibleForDesktopSocialInviteOverlay:i,inviterFirstName:s,imageSignature:o,pinId:d}){let c=(0,n.ZP)(),p=(0,y.Z)(),f=(0,h.Z)(),{checkExperiment:x}=(0,r.F)(),S=(0,l.useRef)(),b=(0,u.ZP)(),w="desktop"===b,P=s&&i,I=w&&x("dweb_unauth_main_pin_visual_search_v2").group,T="enabled_2_no_upsell"===I||"enabled_rollout"===I||"enabled_1_nav_upsell_post_land"===I,k=P&&(c._('Sign up to join {{ name }} on Pinterest', 'pin.closeup.wash.desktop.shareNotification', 'Clickthrough overlay for desktop users that a sender ({{ name }}) shared a Pin to them, name: username')).replace("{{ name }}",s),E=T?c._('See something you like? Tap to search inside this image', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'):c._('Click to make the most out of this idea with a free account', 'web.unauth.plp.clickable_wash.header', 'Copy shown on hover to sign up for an account'),j=c._('Tap to make the most out of this idea with a free account', 'mweb.unauth.plp.clickable_wash.header', 'Pin clickable wash header text'),A=(0,m.k6)();return(0,v.jsx)(a.iP,{onMouseEnter:()=>{P&&(0,_.My)("dweb.main_pin.social.wash.view"),(0,_.My)("dweb.pin.wash.view")},onMouseLeave:()=>{P&&(0,_.My)("dweb.main_pin.social.wash.dismiss"),(0,_.My)("dweb.pin.wash.dismiss")},onTap:({event:e})=>{if(w){if(e.preventDefault(),p({action:"click",item:"pin-image"}),i&&s&&(0,_.My)("dweb.main_pin.social.wash.click"),T){let e=`/pin/${d}/visual-search/?`;o&&(e+=`imageSignature=${o}`),A.push(e),g.Z.setItem("VISUAL_SEARCH_SOURCE","MAIN_PIN_WASH")}else(0,_.My)("dweb_unauth_main_pin_image_click.signup_modal.show"),f({reason:"UPSELL_LOGIN_OR_SIGNUP",attributionLabel:"click_closeup",desktopOptions:{modalType:"signup",modalOptions:{source:"defaultSource",container:"pinWash"}}});t&&(0,_.My)("unauth.pdp.pin.img.click",{device:b})}},children:(0,v.jsxs)(a.xu,{zIndex:new a.Ry(2),children:[(0,v.jsx)(a.xu,{top:!0,bottom:!0,left:!0,right:!0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:i?"center":void 0,direction:"column",position:"absolute",ref:S,"data-test-id":"main-pin-hover-overlay",children:(0,v.jsx)(a.xu,{paddingY:10,display:"flex",alignItems:"center",maxWidth:T?260:240,direction:"column",children:(0,v.jsx)(a.xu,{marginTop:8,children:(0,v.jsx)(a.X6,{size:P?"500":"400",align:"center",color:"light",children:w?k||E:j})})})}),!w&&(0,v.jsx)(a.xu,{position:"absolute",top:!0,right:!0,marginTop:4,marginEnd:4,children:(0,v.jsx)(a.hU,{icon:"cancel",iconColor:"white",onClick:({event:t})=>{t.stopPropagation(),e&&(e(!1),(0,_.My)("main.pin.wash.cancel"))},accessibilityLabel:c._('Close pin clickable wash', 'mweb.unauth.plp.clickable_wash.close_button', 'Close button'),size:"md"})})]})})}var x=i(691720),S=i(872482);let b=e=>{var t;let i=(0,n.ZP)(),{alt:m,clickthroughOverlayOptions:h,color:g,isFlashlightPage:_,naturalHeight:y,naturalWidth:b,placeholder:w,pinImageResizePercent:P=100,pwtElementTimingId:I,pwtSurfaceContext:T,setShowClickthroughOverlay:k,showSpinner:E,src:j,stickyFooter:A,isEligibleForPdp:F,pinId:C,imageSignature:R}=e,D=(0,c.Z)(),{checkExperiment:O}=(0,r.F)(),L=!D,{isAuthenticated:N}=(0,o.B)(),Z=(0,u.ZP)(),M="desktop"===Z,K=N&&!M&&O("auth_mweb_inline_action_bar").anyEnabled,z=(0,l.useRef)(),[H,U]=(0,l.useState)(!L||!!j&&!!w&&w===j),B=(0,l.useRef)(""),G=()=>{T&&T.markConstraintComplete("PinPageMainImageRendered")};(0,l.useEffect)(()=>{let e=new Image;e.onload=()=>U(!0),e.src=j},[]);let $=(0,l.useRef)(null===(t=(0,S.a)())||void 0===t?void 0:t.setHasScrolledPastMainContent);(0,l.useEffect)(()=>{let e=(0,d.Z)(()=>{if(z.current){var t;let i=window.scrollY>z.current.offsetTop+z.current.offsetHeight;null===(t=$.current)||void 0===t||t.call($,i),i&&window.removeEventListener("scroll",e)}},10);window.addEventListener("scroll",e)},[]);let[V,W]=(0,l.useState)();(0,l.useEffect)(()=>{z.current&&W(z.current.scrollHeight)},[]);let Y=!_&&"tablet"===Z,q=L?(0,v.jsx)(s.Z,{alt:m,color:g,elementTiming:I,naturalHeight:y,naturalWidth:b,src:w,onLoad:G}):null;return(0,v.jsxs)(a.xu,{"data-test-id":"pin-closeup-image",dangerouslySetInlineStyle:{__style:{transition:100===P?"":"width 500ms ease-in-out"}},maxHeight:"100%",minHeight:100===P?V:void 0,maxWidth:"tablet"===Z?x.g6:void 0,overflow:A?void 0:"hidden",position:"relative",width:_||"phone"===Z?`${P}%`:M?508:x.Hg,rounding:_||"phone"===Z?0:6,ref:z,marginTop:"tablet"===Z&&K?12:0,children:[!N&&h&&"enabled_3_no_wash_upsell_post_land"!==O("dweb_unauth_main_pin_visual_search_v2").group&&(0,v.jsx)(p.Z,{isImagePinForUnauthOnTablet:!1,children:(0,v.jsx)(f,{setShowClickthroughOverlay:k,inviterFirstName:B.current,isEligibleForPdp:F,imageSignature:R||"",pinId:C||""})}),q&&(Y?(0,v.jsx)(a.xu,{rounding:6,overflow:"hidden",children:q}):q),(0,v.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:H?1:0,transition:H&&!M?"opacity .5s ease-in-out":void 0,backgroundColor:g}},left:!0,position:L?"absolute":"relative",right:!0,rounding:Y?6:5,overflow:Y?"hidden":void 0,top:!0,children:L?(0,v.jsx)(a.Ee,{alt:m,naturalHeight:y,naturalWidth:b,src:j}):(0,v.jsx)(s.Z,{alt:m,color:g,elementTiming:I,naturalHeight:y,naturalWidth:b,src:j,onLoad:G})}),E&&(0,v.jsx)(a.xu,{bottom:!0,dangerouslySetInlineStyle:{__style:{opacity:H?0:1,transition:H?"opacity .5s ease-in-out":void 0}},display:"flex",justifyContent:"center",left:!0,position:"absolute",right:!0,top:!0,children:!H&&(0,v.jsx)(a.kC,{alignItems:"center",justifyContent:"start",children:(0,v.jsx)(a.$j,{accessibilityLabel:i._('Loading image', 'Loading higher resolution image', 'Loading higher resolution image'),show:!0})})}),A]})}},435497:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var l=i(667294),a=i(883119),n=i(729884),r=i(407043),s=i(444445),o=i(564194),d=i(391254),u=i(773285),c=i(829407),p=i(785893);function m({index:e,length:t,showBadge:i}){return(0,p.jsx)(a.xu,{alignItems:"center",color:"selected",display:"flex",height:35,justifyContent:"center",marginEnd:5,marginTop:5,position:"absolute",right:!0,rounding:2,width:35,zIndex:new a.Ry(1),dangerouslySetInlineStyle:{__style:{opacity:i?.8:0,transition:"opacity .3s"}},children:(0,p.jsx)(a.xv,{color:"inverse",children:`${(null!=e?e:0)+1}/${t}`})})}let h=({index:e})=>{let[t,i]=(0,l.useState)(!0),a=(0,l.useRef)(),n=(0,l.useRef)();return(0,l.useEffect)(()=>(a.current=setTimeout(()=>{i(!1)},3e3),()=>{clearTimeout(a.current)}),[]),(0,l.useEffect)(()=>{if(!n.current){n.current=e;return}clearTimeout(a.current),i(!0)},[e]),{showBadge:t}};var g=i(455024),_=i(350118);let y=`
  .horizontal-scroll-container {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  ::-webkit-scrollbar {
    display: none;
  }`;function v(e){var t,i;let{children:v,componentType:f,containerRef:x,contextLogData:S,disableTransition:b,gap:w=0,height:P,id:I,impressionType:T,index:k,shouldBeDragCarousel:E,showCarouselBadge:j,styleOverrides:A,slideWidth:F,view:C,viewParameter:R,widthRatio:D=1}=e,{showBadge:O}=h({index:k}),{logContextEvent:L}=(0,r.v)(),N=(0,_.S6)()(I),Z=(0,l.useRef)(),M=(0,l.useRef)(),K=(0,l.useRef)(0),z=(0,l.useRef)(),{checkExperiment:H}=(0,u.F)();if((0,c.Z)(()=>{let e=M.current;if(!e)return;let t=()=>{let e=H("web_use_intersection_observer_for_getboundingclientrect").anyEnabled,t=K.current;if(e){let e=new IntersectionObserver(([i])=>{var l;let a=-(null!==(l=i.boundingClientRect.x)&&void 0!==l?l:0);Math.abs(t-a)>=10&&L({component:f,event_type:"right"==(t<a?"right":"left")?9315:9316,view_type:C,view_parameter:R}),K.current=a,z.current&&e.unobserve(z.current)});z.current&&e.observe(z.current)}else{var i,l;let e=-(null!==(i=null===(l=z.current)||void 0===l?void 0:l.getBoundingClientRect().x)&&void 0!==i?i:0);Math.abs(t-e)>=10&&L({component:f,event_type:"right"==(t<e?"right":"left")?9315:9316,view_type:C,view_parameter:R}),K.current=e}};return E&&e.addEventListener("touchend",t),()=>{E&&e.removeEventListener("touchend",t)}}),D>1||D<0)throw Error("widthRatio should be between 0 and 1 inclusive");let U=Math.floor(F*D),B=l.Children.toArray(v),G=B.length*U,$=(null===(t=x.current)||void 0===t?void 0:t.clientWidth)||G,V=null!==(i=null==A?void 0:A.justifyContent)&&void 0!==i?i:$>G?"center":"start";return(0,p.jsx)("div",{className:"BoardMoreIdeasRep"===T?"moreIdeasBoardRepCarousel":"",children:(0,p.jsxs)(a.xu,{display:"flex",justifyContent:V,alignItems:"center",overflow:"hidden","data-test-id":"carousel-pin",width:E?"100vw":void 0,children:[j&&(0,p.jsx)(m,{length:B.length,index:k,showBadge:O}),"BoardMoreIdeasRep"!==T&&(0,p.jsx)(n.P,{pinKey:null!=N?{type:"deprecated",data:N}:null,children:e=>{var t,i;return(0,p.jsx)(o.Z,{carouselData:e&&{...e,type:"canonical"},contextLogData:S,trackCarousel:!0,impressionType:"Pin",loggingId:I,slotIndex:k,viewParameter:null!=R?R:72,viewType:null!=C?C:1,children:(0,p.jsx)(a.xu,{height:null!==(t=null!=P?P:null===(i=Z.current)||void 0===i?void 0:i.clientHeight)&&void 0!==t?t:1,overflow:"hidden",position:"absolute",width:F})},`carousel-impression-key-${k}`)}}),E&&(0,p.jsx)(d.Z,{unsafeCSS:y}),(0,p.jsx)("div",{className:"horizontal-scroll-container",style:{overflowX:E?"scroll":"visible",paddingLeft:E?`${s.yt}px`:void 0,paddingRight:E?`${s.yt}px`:void 0,display:"flex",flexDirection:"row",position:"relative",scrollbarWidth:0,transition:E||b?void 0:"left .3s",left:!E&&(0,g.CU)({slotWidth:U,gap:w,numberOfSlides:B.length,index:k,containerWidth:$})},ref:M,children:B.map((e,t)=>{let i=t===B.length-1,l=Math.ceil(w/4),n=0;l>=-12&&l<=12&&(n=l);let r=(0,p.jsx)(a.xu,{marginEnd:i?0:n,"data-test-id":`carousel-img-${t}`,"data-carousel-indicator":"carousel-card",height:null!=P?P:void 0,ref:e=>{Z.current=e,0===t&&(z.current=e)},width:U,children:e},`carousel-slot-${I}-${t}`);if("BoardMoreIdeasRep"===T){let i=e.props,l={total_object_count:null==i?void 0:i.story.objects.length,storyType:null==i?void 0:i.story.story_type,boardIdStr:null==i?void 0:i.item.board_id,slotIndex:null==i?void 0:i.slotIndex,story_id:null==i?void 0:i.story.id};return(0,p.jsx)(o.Z,{componentType:f,contextLogData:l,impressionAuxFields:l,impressionType:null!=T?T:"Pin",loggingId:I,slotIndex:t,viewParameter:null!=R?R:72,viewType:null!=C?C:1,children:r},`carousel-slot-${I}-${t}`)}return r})})]})})}},356725:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>_});var l,a,n=i(702664);i(167912);var r=i(883119),s=i(729884),o=i(916117),d=i(357998),u=i(966676),c=i(721782),p=i(447948),m=i(350118),h=i(785893);let g=void 0!==l?l:l=i(603239);function _({carouselData:e,carouselIndex:t,componentType:l,contextLogData:_,handleCarouselSwipe:y,isCloseup:v,isEditMode:f,pinKey:x,viewParameter:S,viewType:b,variant:w}){var P;let I;let T=(0,m.S6)();if(null==x||"graphqlRef"===x.type)I=x;else{let e=x.data;if("string"==typeof e){let t=T(e);I=null!=t?{type:"deprecated",data:t}:null}else I={type:"deprecated",data:e}}let{data:k}=(0,o.u)(g,I),{childDataKey__DEPRECATED:E}=(0,d.Q)(void 0!==a?a:a=i(822423),k,{useLegacyAdapter:e=>({})}),j=(0,c.Z)(E,"CarouselEllipsis"),A=(0,s.Z)(E),F=e||A&&{carouselSlots:A.carouselSlots.map(({slotId:e,title:t})=>({id:e,title:t})),entityId:null!==(P=A.carouselId)&&void 0!==P?P:"",index:A.index},C=(0,n.useDispatch)();if(!F)return null;let R=(e,t,i)=>{var a,n,r;f||void 0===p.yR||(e.preventDefault(),e.stopPropagation(),C((0,p.yR)(null!==(r=null==k?void 0:k.entityId)&&void 0!==r?r:"",i))),void 0!==y&&y(i),j({pinId:null!==(a=null==k?void 0:k.entityId)&&void 0!==a?a:"",currentIndex:null!=t?t:0,nextIndex:i,carouselData:{carouselSlots:null===(n=F.carouselSlots)||void 0===n?void 0:n.map(e=>({id:e.id})),entityId:F.entityId},viewParameter:S,viewType:b,componentType:l,contextLogData:_,isEditMode:f})},{carouselSlots:D,index:O}=F,L="number"==typeof t?t:O,N="default"===w,Z=N?"white":"#555",M=N?"rgba(255, 255, 255, 0.5)":"lightGray";return(0,h.jsx)(u.ZP.Consumer,{children:({viewportSize:e})=>{var t;return"sm"===e?null:(0,h.jsx)(r.xu,{alignItems:"center","data-test-id":"carousel-ellipsis",display:"flex",justifyContent:v?"end":"center",paddingY:f?1:0,children:D&&[...Array(null!==(t=D.length)&&void 0!==t?t:0).keys()].map(e=>{var t,i;return(0,h.jsx)(r.xu,{paddingX:1,children:(0,h.jsx)(r.iP,{accessibilityLabel:null!==(i=(D[e]||{}).title)&&void 0!==i?i:"",fullWidth:!1,onTap:({event:t})=>R(t,L,e),rounding:"circle",children:(0,h.jsx)(r.xu,{"data-test-id":"ellipsis-size",height:8,width:8,dangerouslySetInlineStyle:{__style:{backgroundColor:e===L?Z:M}},rounding:"circle"})})},(null!==(t=null==k?void 0:k.entityId)&&void 0!==t?t:"")+e)})})}})}},239062:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>f});var l,a,n=i(702664);i(167912);var r=i(883119),s=i(729884),o=i(916117),d=i(357998),u=i(898781),c=i(356725),p=i(721782),m=i(447948),h=i(350118),g=i(785893);let _={cursor:"pointer",padding:"30px 16px",position:"relative",zIndex:1},y=(e,t,i,l,a,n)=>{n||void 0===l||(e.preventDefault(),e.stopPropagation(),l(t,i)),void 0!==a&&a(i)},v=void 0!==l?l:l=i(717246);function f({addEllipsis:e,alwaysShowNavigationArrows:t,carouselIndex:l,carouselData:f,ellipsisVariant:x,handleCarouselSwipe:S,isShowingLastSlide:b,pinKey:w,contextLogData:P,viewParameter:I,viewType:T,componentType:k,isEditMode:E,forwardNode:j,backNode:A,sliderStyleOverride:F,hideNavigationArrows:C}){var R,D;let O;let L=(0,u.ZP)(),N=(0,n.useDispatch)(),Z=(0,h.S6)();if(null==w||"graphqlRef"===w.type)O=w;else{let e=Z(w.data);O=null==e?null:{type:"deprecated",data:e}}let{data:M}=(0,o.u)(v,O),{childDataKey__DEPRECATED:K}=(0,d.Q)(void 0!==a?a:a=i(671704),M,{useLegacyAdapter:e=>({})}),z=(0,p.Z)(K,"CarouselSliders"),H=(0,s.Z)(K),U=f||H&&{carouselSlots:H.carouselSlots.map(({slotId:e,title:t})=>({id:e,title:t})),entityId:null!==(R=H.carouselId)&&void 0!==R?R:"",index:H.index};if(!U)return null;let B=(e,t)=>N((0,m.yR)(e,t)),{carouselSlots:G,index:$}=U,V=void 0!==l?l:null!=$?$:0,W=Math.max(0,V-1),Y=Math.min((null!=G?G:[]).length-1,V+1),q=0===V,X=b||V===(null!=G?G:[]).length-1,Q=(e,t)=>{var i,l,a;y(e,null!==(i=null==M?void 0:M.entityId)&&void 0!==i?i:"",t,B,S,E),z({pinId:null!==(l=null==M?void 0:M.entityId)&&void 0!==l?l:"",currentIndex:V,nextIndex:t,carouselData:{carouselSlots:null==G?void 0:G.map(({id:e})=>({id:e})),entityId:U.entityId},viewParameter:I,viewType:T,componentType:k,contextLogData:P,isEditMode:E,isEligibleForPdp:null!==(a=null==M?void 0:M.isEligibleForPdp)&&void 0!==a&&a})},J=A||(0,g.jsx)(r.JO,{color:"inverse",icon:"arrow-back",accessibilityLabel:L._('View Previous', 'Button to advance carousel to the previous image', 'Button to advance carousel to the previous image')}),ee=C?null:j||(0,g.jsx)(r.JO,{color:"inverse",icon:"arrow-forward",accessibilityLabel:L._('View Next', 'Button to advance carousel to the next image', 'Button to advance carousel to the next image')});return(0,g.jsxs)(r.xu,{display:"flex",justifyContent:C?"center":"between",position:"absolute",alignItems:"center",left:!0,right:!0,bottom:!0,top:!0,children:[!C&&(0,g.jsx)("div",{"data-test-id":"carousel-slider-left",role:"presentation",onClick:e=>{Q(e,W)},onKeyUp:e=>{Q(e,W)},style:{..._,...F,pointerEvents:q?"none":"auto"},children:(0,g.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{visibility:q&&!t?"hidden":"visible",opacity:q&&t?"50%":"100%"}},display:"flex",height:"100%",justifyContent:"center",width:"100%",children:J})}),e&&(0,g.jsx)(c.default,{pinKey:K,carouselIndex:l,carouselData:{carouselSlots:null===(D=U.carouselSlots)||void 0===D?void 0:D.map(({id:e,title:t})=>({id:e,title:t})),entityId:U.entityId,index:U.index},handleCarouselSwipe:S,variant:x||"default",viewParameter:I,viewType:T,componentType:k}),!C&&(0,g.jsx)("div",{"data-test-id":"carousel-slider-right",role:"presentation",onClick:e=>{Q(e,Y)},onKeyUp:e=>{Q(e,Y)},style:{..._,...F,pointerEvents:X?"none":"auto"},children:(0,g.jsx)(r.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:{visibility:X&&!t?"hidden":"visible",opacity:X&&t?"50%":"100%"}},display:"flex",height:"100%",justifyContent:"center",width:"100%",children:ee})})]})}},751191:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var l=i(667294),a=i(883119),n=i(898781),r=i(785893);let s=({iconType:e,showFab:t,backgroundColor:i,hoverColor:s,iconColor:o,size:d})=>{let u=(0,n.ZP)(),[c,p]=(0,l.useState)(!1);return(0,r.jsx)(a.zd,{rounding:6,children:(0,r.jsx)(a.xu,{opacity:c?1:.8,rounding:"circle",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),"data-test-id":"navigation-fab-container",children:(0,r.jsx)(a.xu,{width:d||48,height:d||48,color:c?s:i,display:"flex",justifyContent:"center",alignItems:"center",opacity:t?1:0,dangerouslySetInlineStyle:{__style:{transition:"opacity 0.3s linear"}},"data-test-id":"navigation-fab",children:"forward"===e?(0,r.jsx)(a.JO,{color:o,icon:"arrow-forward",accessibilityLabel:u._('View Next', 'Button to advance carousel to the next image', 'Button to advance carousel to the next image')}):(0,r.jsx)(a.JO,{color:o,icon:"arrow-back",accessibilityLabel:u._('View Previous', 'Button to advance carousel to the previous image', 'Button to advance carousel to the previous image')})})})})}},721782:(e,t,i)=>{"use strict";i.d(t,{Z:()=>d}),i(167912);var l,a=i(407043),n=i(357998),r=i(999018),s=i(67347);let o=void 0!==l?l:l=i(270643);function d(e,t){let{logContextEvent:i}=(0,a.v)(),{childDataKey__DEPRECATED:l}=(0,n.Q)(o,e,{useLegacyAdapter:()=>({})});null!=e&&"deprecated"===e.type&&e.data&&"pin"!==e.data.type&&(0,s.nP)("web.graphql.debug.useLogSwipeError",{sampleRate:1,tags:{parent:t,rootType:e.data.type}});let d=(0,r.Z)(l);return function({pinId:e,currentIndex:t,nextIndex:l,carouselData:a,viewParameter:n,viewType:r,componentType:s,contextLogData:o,isEditMode:u,isEligibleForPdp:c}){if(!u){let{carouselSlots:u,entityId:p}=a;i({event_type:108,object_id_str:e,component:s,view_type:r,view_parameter:n,event_data:{pinCarouselSlotEventData:{carouselSlotId:(null==u?void 0:u[t])&&Number(u[t].id),carouselDataId:Number(p),carouselSlotIndex:t,toCarouselSlotIndex:l}},aux_data:{...o,...d({isPdpPlus:c})}})}}}},998651:(e,t,i)=>{"use strict";i.d(t,{L:()=>o,r:()=>s});var l=i(385740),a=i(595371),n=i(909499);let r=["search_articles_story","search_for_you_upsell","search_story_separator","search_story_landing_page_header","shop_tab_upsell","story_pins_search_upsell","structured_search_bubble","user_style_story_v2","guided_search_entry_points_story"];function s({query:e,rs:t,scope:i},r){let s=(0,l.BE)(),o=!(null!=s&&s.viewType)&&!(null!=s&&s.viewParameter),d=(0,n.wF)(i);if(!o&&d){let{viewType:i,viewParameter:l}=null!=s?s:{};r({event_type:d,view_type:i,view_parameter:l,aux_data:{query:e,rs:t||a.i.UNKNOWN}})}t===a.i.HASHTAG_CLOSEUP?r({event_type:101,component:13065,element:10273,view_type:142}):t===a.i.HASHTAG_PINREP&&r({event_type:101,component:0,element:10349,view_type:142})}let o=(e=[])=>{let t=!0;return e.reduce((e,i)=>{var l;return t&&i.story_type&&r.includes(i.story_type)&&(null===(l=i.display_options)||void 0===l?void 0:l.num_columns_requested)===0?e.searchFullWidthStories.push(i):(t=!1,e.filteredResults.push(i)),e},{searchFullWidthStories:[],filteredResults:[]})}},96939:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r});var l=i(883119),a=i(65675),n=i(785893);function r({coverImages:e,height:t,isHovered:i,onClick:r,onMouseEnter:s,onMouseLeave:o,textType:d,text:u,url:c,width:p}){let m=e&&(e["236x"]||e["280x280"]);return(0,n.jsx)(a.Z,{backgroundColor:"gray",coverImage:m,height:t,isHovered:i,onClick:r,onMouseEnter:s,onMouseLeave:o,url:c,width:p,children:(0,n.jsx)(l.xu,{alignItems:"center",display:"flex",height:t,justifyContent:"center",padding:3,position:"absolute",top:!0,width:p||"100%",children:"text"===d?(0,n.jsx)(l.xu,{alignItems:"center",display:"flex",height:48,padding:3,children:(0,n.jsx)(l.X6,{align:"center",size:"500",color:"light",children:u})}):(0,n.jsx)(l.xu,{alignItems:"center",color:"secondary",display:"flex",height:48,padding:3,rounding:"pill",children:(0,n.jsx)(l.xv,{align:"center",weight:"bold",children:u})})})})}},65675:(e,t,i)=>{"use strict";i.d(t,{A:()=>r,Z:()=>s});var l=i(667294),a=i(883119),n=i(785893);let r={bubbleOverlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},hoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.6)"},lightHoverOverlay:{backgroundColor:"rgba(0, 0, 0, 0.1)"}};function s({backgroundColor:e,children:t,coverImage:i,disableTabIndex:s,height:o,id:d,isHovered:u,onClick:c,onMouseDown:p,onMouseEnter:m,onMouseLeave:h,searchBoxRenderStopwatch:g,url:_,width:y}){var v,f;let[x,S]=(0,l.useState)(!1),b=()=>{m?m():S(!0)},w=()=>{h?h():S(!1)},P=u||x,I=P?r.hoverOverlay:r.bubbleOverlay;return(0,n.jsx)(a.Tg,{href:_,onBlur:w,onFocus:b,onMouseDown:p,onMouseEnter:b,onMouseLeave:w,onTap:()=>{null==c||c(d)},rounding:4,tabIndex:s?-1:void 0,children:(0,n.jsx)(a.zd,{rounding:4,width:y||"100%",height:o,children:null!=i&&i.url?(0,n.jsxs)(a.Ee,{alt:"",color:e,fit:"cover",naturalHeight:null!==(v=i.height)&&void 0!==v?v:1,naturalWidth:null!==(f=i.width)&&void 0!==f?f:1,onLoad:()=>{null==g||g.stop()},role:"presentation",src:i.url,children:[(0,n.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:I},height:"100%",width:"100%"}),"function"==typeof t?t({isHovered:P}):t]}):(0,n.jsx)(a.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:e}},height:"100%",width:"100%"})})})}},272984:(e,t,i)=>{"use strict";i.d(t,{Z:()=>ex});var l,a,n,r=i(167912),s=i(616550),o=i(883119),d=i(934494),u=i(898781),c=i(773285),p=i(784590),m=i(280446),h=i(667294),g=i(363957),_=i(362810),y=i(356997),v=i(916117),f=i(349700),x=i(867820),S=i(785893);let b=void 0!==l?l:l=i(405410),w=()=>{(0,x.NC)("click_best_pin_board",!0)},P=()=>{(0,x.NC)("click_best_pin_profile",!0)},I=({pin:e})=>{let{pinner:t}=e,{username:i,fullName:l}=null!=t?t:{},a=(null==t?void 0:t.imageMediumUrl)||(null==t?void 0:t.imageSmallUrl),n=`/${null!=i?i:""}/`;return(0,S.jsx)(o.Tg,{fullWidth:!1,href:n,onTap:P,rounding:"circle",children:(0,S.jsx)(y.qE,{name:null!=l?l:"",outline:!0,size:"sm",src:null!=a?a:""})})},T=({pin:e})=>{let t=(0,u.ZP)(),{board:i,pinner:l}=e,{name:a,privacy:n,url:r}=null!=i?i:{},s=(null==i?void 0:i.entityId)||"",{username:d,fullName:c}=null!=l?l:{},p=`/${null!=d?d:""}/`,m=(0,S.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(o.rU,{display:"inlineBlock",href:p,onClick:P,underline:"hover",children:c})},c);return"protected"===n?(0,f.nk)(t._('{{ pinnerName }} saved this Pin', 'Showing who saved this pin, but not which board (private board), on closeup', 'Showing who saved this pin, but not which board (private board), on closeup'),{pinnerName:m}):(0,f.nk)(t._('{{ pinnerName }} saved to {{ boardName }}', 'Showing who saved this pin to which board on closeup', 'Showing who saved this pin to which board on closeup'),{pinnerName:m,boardName:(0,S.jsx)(o.xv,{inline:!0,size:"200",weight:"bold",children:(0,S.jsx)(o.rU,{href:null!=r?r:"",onClick:w,children:a},"board")},s)})},k=({pinKey:e})=>{let{data:t}=(0,v.u)(b,e);return(0,S.jsxs)(o.xu,{alignItems:"center","data-test-id":"pin-attribution",direction:"row",display:"flex",marginTop:3,children:[(0,S.jsx)(I,{pin:t}),(0,S.jsx)(o.xu,{marginEnd:2}),(0,S.jsx)(o.xv,{size:"200",children:(0,S.jsx)(T,{pin:t})})]})};var E=i(112690);function j({pageType:e,pinCreditPrefix:t,pin:i,pinLink:l,viewParameter:a}){var n,r;let s=(0,u.ZP)(),d=(0,E.Z)();if("topic"!==e.page&&(!i.domain||"Uploaded by user"===i.domain))return null;let c="topic"!==e.page||e.isAuth?"100":"200",p="topic"===e.page&&!!i.nativeCreator,m=p?null===(n=i.nativeCreator)||void 0===n?void 0:n.fullName:i.domain;return(0,S.jsx)(o.xu,{display:"flex",flex:"none",justifyContent:"start",marginBottom:2,children:(0,S.jsx)(o.rU,{display:"inlineBlock",href:p?`/${(null===(r=i.nativeCreator)||void 0===r?void 0:r.username)||""}/`:l,onClick:()=>{"topic"===e.page?(0,x.NC)("click_topic_best_pin_link"):d({event_type:12,view_type:3,object_id_str:i.entityId,component:85,view_parameter:a})},rel:"nofollow",target:"blank",underline:"hover",children:(0,S.jsx)(o.xv,{size:c,children:(0,f.nk)(s._('{{ pinCreditPrefix }} {{ pinCredit }}', 'Tells the user where the pin is from in the form of "Saved from <website>"', 'Tells the user where the pin is from in the form of "Saved from <website>"'),{pinCreditPrefix:t,pinCredit:(0,S.jsx)(o.xv,{inline:!0,size:c,weight:"bold",children:(e.page,m)},p?"creatorProfile":"pinLinkDomain")})})})})}var A=i(782534),F=i(694379),C=i(248975),R=i(153209),D=i(992750),O=i(269051),L=i(53199),N=i(692627),Z=i(220306),M=i(910164),K=i(780280);let z=void 0!==a?a:a=i(327620),H=e=>{let t=null;e.lastRepinDate&&(t=new Date(e.lastRepinDate));let i=null;return(e.createdAt&&(i=new Date(e.createdAt)),t)?i?t>i?t:i:t:i},U=e=>{let t="";if(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished)return t;let i=H(e);if(i&&i.getFullYear()===new Date().getFullYear()){let l=new Set(["film_music_books","art","home_decor","food_drink","womens_fashion","travel","weddings","hair_beauty","holidays_events","mens_fashion","products","celebrities","technology"]),{category:a}=e;l.has(a)&&(t=i?(0,S.jsx)(A.Z,{dateFormatType:A.k.LONG_MONTH_YEAR,useUTC:!1,value:i}):"")}return t},B=e=>!!(e.richMetadata&&e.richMetadata.article&&e.richMetadata.article.datePublished),G=(e,t)=>{var i,l,a;let n=new Date(null!==(i=null===(l=(null!==(a=e.richMetadata)&&void 0!==a?a:{}).article)||void 0===l?void 0:l.datePublished)&&void 0!==i?i:Date.now()),r=n.getTime(),s=new Date().getTime();return null==t||s-r<=31536e6*t?(0,S.jsx)(A.Z,{dateFormatType:A.k.LONG_MONTH_YEAR,useUTC:!1,value:n}):""};function $(e){var t,i,l,a,n,r,s,d,u,c,p,m,h,g,_,y,f,x,b,w,P,I,T;let{pinKey:E,viewportSize:A,pageType:H}=e,{data:$}=(0,v.u)(z,E),{pinCreditPrefix:V,pinLink:W}=(0,O.Z)($),Y=(0,L.Z)($),{description:q}=(0,D.eK)({richMetadataDescription:null===(t=$.richMetadata)||void 0===t?void 0:t.description,richSummaryDisplayName:null===(i=$.richSummary)||void 0===i?void 0:i.displayName,closeupUnifiedDescription:$.closeupUnifiedDescription});"videos_category"===H.page&&(q=(0,D.kt)(q,(null===(T=$.nativeCreator)||void 0===T?void 0:T.username)||""));let X="wide"===A,Q=(0,D.Ly)({pinTitle:$.title,gridTitle:$.gridTitle,richSummaryDisplayName:null!==(l=null===(a=$.richSummary)||void 0===a?void 0:a.displayName)&&void 0!==l?l:"",richMetadataTitle:null!==(n=null===(r=$.richMetadata)||void 0===r?void 0:r.title)&&void 0!==n?n:"",storyPinDataId:$.storyPinDataId,storyPinDataMetadataPinTitle:null===(s=$.storyPinData)||void 0===s?void 0:null===(d=s.metadata)||void 0===d?void 0:d.pinTitle,pinJoinVisualAnnotation:null===(u=$.pinJoin)||void 0===u?void 0:u.visualAnnotation});($.gridTitle||"").trim()&&Q!==$.gridTitle&&(Q=(0,D.EU)($.gridTitle,200));let J=(0,R.r)(null===(c=$.richMetadata)||void 0===c?void 0:null===(p=c.recipe)||void 0===p?void 0:p.name,!!(null!==(m=$.richMetadata)&&void 0!==m&&null!==(h=m.recipe)&&void 0!==h&&h.categorizedIngredients),null!==(g=null===(_=$.richMetadata)||void 0===_?void 0:null===(y=_.recipe)||void 0===y?void 0:y.fromAggregatedData)&&void 0!==g&&g)?null===(f=$.richMetadata)||void 0===f?void 0:f.recipe:null,ee=B($)&&G($,2),et=U($)||ee,{isBot:ei,isSocialBot:el}=(0,K.B)();return(0,S.jsx)(o.xu,{alignContent:"between","data-test-id":"UnauthBestPinCardBodyContainer",direction:"column",display:"flex",flex:"grow",padding:8,position:"relative",width:"100%",children:(0,S.jsxs)(o.xu,{direction:"column",display:"flex",flex:"grow",position:"relative",children:[(0,S.jsx)(j,{pageType:H,pin:{entityId:$.entityId,domain:$.domain||"",nativeCreator:$.nativeCreator&&{fullName:$.nativeCreator.fullName,username:$.nativeCreator.username}},pinCreditPrefix:"topic"===H.page&&$.nativeCreator?"Created by":V,pinLink:null!=W?W:"",viewParameter:(0,N.Z)({hasPin:!0,hasPinRichMetadata:!!$.richMetadata,hasPinRichMetadataProducts:!!(null!==(x=$.richMetadata)&&void 0!==x&&x.products),hasPinRichMetadataArticle:!!(null!==(b=$.richMetadata)&&void 0!==b&&b.article),hasPinRichMetadataRecipe:!!(null!==(w=$.richMetadata)&&void 0!==w&&w.recipe),hasPinStoryPinData:!!$.storyPinData})}),(0,S.jsx)(o.kC,{direction:"row",justifyContent:"between",children:(0,S.jsx)(o.xu,{display:"flex",marginEnd:X?0:3,marginTop:X?3:0,overflow:"hidden",children:Q&&(0,S.jsx)("h2",{"data-test-id":"UnauthBestPinCardTitle",style:{fontWeight:"600",fontSize:"28px",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:Q})})}),et?(0,S.jsx)(o.xu,{marginTop:1,children:(0,S.jsx)(o.xv,{color:"subtle",children:et})}):null,q&&(0,S.jsx)(o.xu,{display:"flex",marginTop:3,overflow:"hidden",children:(0,S.jsxs)("h3",{style:{fontWeight:"normal",overflow:"hidden",display:"-webkit-box",WebkitLineClamp:3,WebkitBoxOrient:"vertical",fontSize:"14px"},children:[J&&(0,S.jsx)(M.Z,{recipeKey:J}),q]})}),J&&(0,S.jsx)(Z.Z,{marginOverrides:J?{outerMarginTop:32,ingredientMarginBottom:4}:null,recipeProps:{recipe:{categorizedIngredients:J.categorizedIngredients,name:J.name,image:(0,C.Z)({imagesUrls:Y,embedSrc:null===(P=$.embed)||void 0===P?void 0:P.src,embedType:null===(I=$.embed)||void 0===I?void 0:I.type,excludeOriginals:!ei&&!el})}}}),(0,S.jsxs)(o.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginTop:2,children:[(0,S.jsx)(k,{pinKey:$}),(0,S.jsx)(o.kC,{alignItems:"stretch",justifyContent:"end",children:!$.repinCount||$.repinCount<1?null:(0,S.jsxs)(o.kC,{alignItems:"center",justifyContent:"start",children:[(0,S.jsx)(o.JO,{accessibilityLabel:"Pin",color:"subtle",icon:"pin",size:12}),(0,S.jsx)(o.xv,{color:"default",inline:!0,size:"100",children:(0,S.jsx)(F.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:$.repinCount})})]})})]})]})})}var V=i(485019),W=i(352870),Y=i(53987),q=i(223008),X=i(430323),Q=i(501338),J=i(826067),ee=i(829407),et=i(975540),ei=i(599611),el=i(94047),ea=i(297852),en=i(8742),er=i(404508),es=i(284367);let eo=0,ed="";function eu(e){let{images:t,image_signature:i}=e,l=(null==t?void 0:t["564x"])&&t.orig,{url:a}=null!=l?l:{},{width:n=1,height:r}=null!=l?l:{};return"number"==typeof n&&"number"==typeof r&&n>564&&(r*=564/n,n=564),{width:n,height:r,url:a,imageSignature:i}}let ec=({data:e,index:t,viewParameter:i,productsURL:l})=>{switch(e.type){case"pin":return(0,S.jsx)(en.ZP,{duploQueryRef:null,viewParameter:i,viewType:72,slotIndex:t,pinId:e.id});case"story":return l&&(0,S.jsx)(_.Z,{story:e,dangerouslySetActionUrl:l,slotIndex:t});default:return null}},ep=({resourceOptions:e})=>{let t=(0,u.ZP)(),{data:i,isAtEnd:l,isFetching:a,fetchMore:n}=(0,p.Z)({name:"VisualLiveSearchResource",options:e}),r=(0,s.TH)(),d=`${r.pathname}products/${r.search}`;return(0,S.jsxs)(h.Fragment,{children:[i&&(0,S.jsx)(es.Z,{customLayoutType:"desktopFlashlight",feedItems:i.results||[],feedKey:"flashlight-dweb-unauth",pagination:{loadNext:n,hasNext:l,isLoadingNext:a,refetch:()=>void 0},renderFeedItem:(e,t)=>ec({data:e,index:t,viewParameter:3050,productsURL:d})}),(0,S.jsx)(o.$j,{accessibilityLabel:t._('Loading visual search results...', 'unauthDesktopVisualSearch.flashlightFeed.loading', 'Accessibility label for loading visual search results'),show:a})]})},em=({resourceOptions:e})=>{let t=(0,u.ZP)(),{data:i,isAtEnd:l,isFetching:a,fetchMore:n}=(0,p.Z)({name:"VisualLiveSearchProductFeedResource",options:e});return(0,S.jsxs)(h.Fragment,{children:[i&&(0,S.jsx)(es.Z,{customLayoutType:"desktopFlashlight",feedItems:i||[],feedKey:"flashlight-products-dweb-unauth",pagination:{loadNext:n,hasNext:l,isLoadingNext:a,refetch:()=>void 0},renderFeedItem:(e,t)=>ec({data:e,index:t,viewParameter:3334})}),(0,S.jsx)(o.$j,{accessibilityLabel:t._('Loading visual search product results...', 'unauthDesktopVisualSearch.flashlightProductFeed.loading', 'Accessibility label for loading visual search product results'),show:a})]})};function eh({pinResponse:e}){let t=(0,u.ZP)(),{isRTL:i}=(0,K.B)(),l=(0,E.Z)(),a=(0,s.k6)(),n=(0,s.TH)(),r=(0,s.$B)(),d=(0,h.useRef)(),{pin:c,isLoaded:p}=e,{pinId:_}=(0,m.Z)(r.params.id||""),y=(0,J.mB)(n.search),v=(0,g.Z)(n),f=function(e){let t=parseInt(e,10);switch(t){case 1:case 2:case 3:case 4:case 5:case 6:return t;default:return}}(y.cropSource),b=(0,Y.hd)(n),{getNormalizedPinImage:w}=(0,q.Z)({pinKey:null!=c?{type:"deprecated",data:c}:null});if((0,h.useEffect)(()=>{if(!v&&c){let{width:e,height:t}=w(),i=(0,ea.Z)({cropArea:{h:t-2*V.S,w:e-2*V.S,x:V.S,y:V.S},isProductPage:b,pinId:_,surfaceType:"flashlight"});a.replace(i)}},[w,a,v,b,c,_]),(0,ee.Z)(()=>{l({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:_}}),(0,x.My)("unauth.flashlight_page")}),(0,h.useEffect)(()=>(d.current&&ed===_&&(d.current.scrollTop=eo),()=>{d.current&&(eo=d.current.scrollTop,ed=_)})),!p)return(0,S.jsx)(X.Z,{view:72,objectId:"",children:(0,S.jsx)(o.xu,{position:"relative",dangerouslySetInlineStyle:{__style:{top:Q.Pw}},children:(0,S.jsx)(o.$j,{accessibilityLabel:t._('Loading visual search...', 'Accessibility label for loading visual search page', 'Accessibility label for loading visual search page'),show:!0})})});if(!c)return null;let{image_signature:P,description:I}=c,{width:T,height:k,url:j}=eu(c),A=function({initialCropArea:e,pin:t}){var i,l,a,n;let r;if(e)r={...e};else{let{visual_objects:e}=t,{width:i=1,height:l=1}=eu(t);if(e&&e.length){let{x:t,y:a,w:n,h:s}=e[0];r=(0,ei.Z)({cropArea:{x:t,y:a,w:n,h:s},scaledWidth:i,scaledHeight:l})}else{let[e,t]=[i/6,l/6],[a,n]=[i-2*e,l-2*t];r={x:e,y:t,w:a,h:n}}}return{x:Math.floor(null!==(i=r.x)&&void 0!==i?i:0),y:Math.floor(null!==(l=r.y)&&void 0!==l?l:0),w:Math.floor(null!==(a=r.w)&&void 0!==a?a:0),h:Math.floor(null!==(n=r.h)&&void 0!==n?n:0)}}({initialCropArea:v,pin:c}),F=n.state&&n.state.internalNavigation,C=T+20,R=(null!=C?C:1)+24,D={pin_id:_,image_signature:P,crop:(0,et.Z)({cropArea:A,scaledWidth:T,scaledHeight:k}),crop_source:f||5},O={__style:{top:140}};return(0,S.jsx)(X.Z,{view:72,objectId:"",children:(0,S.jsxs)(h.Fragment,{children:[(0,S.jsxs)(o.xu,{width:"100%",height:60,display:"flex",alignItems:"center",position:"fixed",dangerouslySetInlineStyle:{__style:{top:80}},zIndex:new o.Ry(4),color:"light",children:[(0,S.jsx)(o.xu,{position:"absolute",left:!0,children:(0,S.jsx)(er.Z,{})}),(0,S.jsx)(o.xu,{flex:"grow",children:(0,S.jsx)(o.X6,{align:"center",size:"400",children:b?t._('Shop similar items', 'unauthDesktopFlashlightPage.flashlightProductsFeed.header', 'Header explaining results of flashlight products search'):t._('Visually similar results', 'unauthDesktopFlashlightPage.flashlightFeed.header', 'Header explaining results of flashlight search')})})]}),b?(0,S.jsx)(o.xu,{dangerouslySetInlineStyle:O,position:"relative",children:(0,S.jsx)(em,{resourceOptions:D})}):(0,S.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,S.jsxs)(o.xu,{height:"calc(100% - 140px)",marginEnd:3,marginStart:3,width:C,overflow:"auto",position:"fixed",ref:d,zIndex:new o.Ry(4),dangerouslySetInlineStyle:O,children:[(0,S.jsx)(o.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:T,height:k}},children:(0,S.jsxs)(o.zd,{height:k,rounding:2,width:T,children:[(0,S.jsx)(o.Ee,{alt:null!=I?I:"",naturalHeight:null!=k?k:1,naturalWidth:null!=T?T:1,src:null!=j?j:""}),(0,S.jsx)(W.Z,{showAnimation:!F,imageSignature:P,imageSize:{h:k,w:T},initialCropArea:A,customCropper:function({origCrop:e,cropSource:t}){let i=window.location.pathname+window.location.search,l=(0,ea.Z)({cropArea:e,cropSource:null!=t?t:6,isProductPage:b,pinId:_,surfaceType:"flashlight"});(0,x.My)("unauth.flashlight_page.cropper_changed"),l!==i&&_&&a.replace({pathname:`/pin/${_}/visual-search/`,search:(0,el.Z)({cropArea:e,cropSource:null!=t?t:6,surfaceType:"flashlight"}),state:{internalNavigation:!0}})},pinKey:{type:"deprecated",data:c},viewParameter:3050,viewType:72})]})}),(0,S.jsx)(o.xu,{position:"relative","data-test-id":"closeupDescription",display:"flex",direction:"column",maxWidth:null!=T?T:1,margin:5,children:(0,S.jsx)($,{pinKey:{type:"deprecated",data:c},pageType:{isAuth:!1,page:"flashlight"},viewportSize:"narrow"})})]}),(0,S.jsx)(o.xu,{position:"relative",width:"100%",dangerouslySetInlineStyle:{__style:{...O.__style,...i?{marginRight:`${R}px`}:{marginLeft:`${R}px`}}},children:(0,S.jsx)(ep,{resourceOptions:D})})]})]})})}let eg=void 0!==n?n:n=i(676684);function e_(e){return null==e?void 0:e.map(e=>{var t,i,l,a,n,r,s,o;return{name:null!==(t=e.name)&&void 0!==t?t:"",offer_summary:{in_stock:null!==(i=null===(l=e.offerSummary)||void 0===l?void 0:l.inStock)&&void 0!==i&&i},additional_images:null!==(a=function(e){let t=[];return e.forEach(({additionalImagesSpec:e,spec:i})=>{var l;t.push(...null!==(l=function({additionalImagesSpec:e,spec:t}){return null==e?void 0:e.map(e=>{var i,l,a,n,r,s,o;return{canonical_images:{[t]:{height:null!==(i=null===(l=e.canonicalImage)||void 0===l?void 0:l.height)&&void 0!==i?i:0,url:null!==(a=null===(n=e.canonicalImage)||void 0===n?void 0:n.url)&&void 0!==a?a:"",width:null!==(r=null===(s=e.canonicalImage)||void 0===s?void 0:s.width)&&void 0!==r?r:0}},image_signature:null!==(o=e.imageSignature)&&void 0!==o?o:""}})}({additionalImagesSpec:e,spec:i}))&&void 0!==l?l:[])}),t}([{additionalImagesSpec:e.additionalImageOrig,spec:"orig"},{additionalImagesSpec:e.additionalImage736x,spec:"736x"},{additionalImagesSpec:e.additionalImage564x,spec:"564x"},{additionalImagesSpec:e.additionalImage474x,spec:"474x"},{additionalImagesSpec:e.additionalImage236x,spec:"236x"}]))&&void 0!==a?a:[],variant_set:n={variants:null!==(s=null==(o=null==(r=e.variantSet)?void 0:r.variants)?void 0:o.map(e=>{var t,i;return{additional_images:null!==(t=null==(i=e.additionalImages)?void 0:i.map(e=>{var t,i;return{canonical_images:null!==(t=e.canonicalImages)&&void 0!==t?t:{},image_signature:null!==(i=e.imageSignature)&&void 0!==i?i:""}}))&&void 0!==t?t:[]}}))&&void 0!==s?s:[]}}})}function ey(e){var t,i;return{username:null!==(t=null==e?void 0:e.username)&&void 0!==t?t:"",full_name:null!==(i=null==e?void 0:e.fullName)&&void 0!==i?i:"",image_medium_url:null==e?void 0:e.imageMediumUrl,image_small_url:null==e?void 0:e.imageSmallUrl}}function ev(e){var t,i,l;return{id:null!==(t=null==e?void 0:e.entityId)&&void 0!==t?t:"",username:null!==(i=null==e?void 0:e.username)&&void 0!==i?i:"",full_name:null!==(l=null==e?void 0:e.fullName)&&void 0!==l?l:"",image_medium_url:null==e?void 0:e.imageMediumUrl,image_small_url:null==e?void 0:e.imageSmallUrl,type:"user"}}let ef=(0,d.Z)({useGraphQLAdapter:function({pinId:e}){var t,i,l,a,n,s,o,d,u,c,p,m,h,g,_,y,v,f,x,S,b,w,P,I,T,k,E,j,A,F,C,R,D,O,L,N,Z,M,K,z,H;let U=(0,r.useLazyLoadQuery)(eg,{pinId:e}),B=null===(t=U.v3GetPinQuery)||void 0===t?void 0:t.data;if(!B)return null;let G={id:null!==(i=B.entityId)&&void 0!==i?i:"",is_eligible_for_related_products:null!==(l=B.isEligibleForRelatedProducts)&&void 0!==l&&l,description:null!==(a=B.description)&&void 0!==a?a:"",image_signature:null!==(n=B.imageSignature)&&void 0!==n?n:"",images:null!==(s=function(e){let t={};return e.forEach(e=>{let{image:i,spec:l}=e;if(i){var a,n,r,s,o;t[l]={width:null!==(a=i.width)&&void 0!==a?a:0,url:null!==(n=i.url)&&void 0!==n?n:"",type:null!==(r=i.type)&&void 0!==r?r:"",height:null!==(s=i.height)&&void 0!==s?s:0,dominant_color:null!==(o=i.dominantColor)&&void 0!==o?o:""}}}),t}([{image:B.imageOrig,spec:"orig"},{image:B.image736x,spec:"736x"},{image:B.image564x,spec:"564x"},{image:B.image474x,spec:"474x"},{image:B.image236x,spec:"236x"}]))&&void 0!==s?s:{},rich_metadata:{products:null!==(x=e_(null==(f=B.richMetadata)?void 0:f.products))&&void 0!==x?x:[],description:null!==(S=null==f?void 0:f.description)&&void 0!==S?S:"",title:null!==(b=null==f?void 0:f.title)&&void 0!==b?b:"",recipe:w={name:null!==(j=null==(E=null==f?void 0:f.recipe)?void 0:E.name)&&void 0!==j?j:"",from_aggregated_data:null!==(A=null==E?void 0:E.fromAggregatedData)&&void 0!==A&&A,categorized_ingredients:null==E?void 0:null===(F=E.categorizedIngredients)||void 0===F?void 0:F.map(e=>{var t;return{category:null!==(t=e.category)&&void 0!==t?t:""}})},article:{date_published:null!==(P=null==f?void 0:null===(I=f.article)||void 0===I?void 0:I.datePublished)&&void 0!==P?P:""},tutorial:{id:null!==(T=null==f?void 0:null===(k=f.tutorial)||void 0===k?void 0:k.name)&&void 0!==T?T:"",type:"makecardtutorialmetadata"}},rich_summary:{products:null!==(R=e_(null==(C=B.richSummary)?void 0:C.products))&&void 0!==R?R:[],display_name:null!==(D=null==C?void 0:C.displayName)&&void 0!==D?D:""},visual_objects:null!==(o=null==(O=B.visualObjects)?void 0:O.map(e=>{var t,i,l,a,n,r,s,o,d,u,c,p,m;return{detection:null!==(t=e.detection)&&void 0!==t&&t,h:null!==(i=e.h)&&void 0!==i?i:0,index:null!==(l=e.index)&&void 0!==l?l:0,is_stela:null!==(a=e.isStela)&&void 0!==a&&a,label:null!==(n=e.label)&&void 0!==n?n:"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:null!==(r=e.labelX)&&void 0!==r?r:0,label_y:null!==(s=e.labelY)&&void 0!==s?s:0,max_annotation_num_documents:null!==(o=e.maxAnnotationNumDocuments)&&void 0!==o?o:0,score:null!==(d=e.score)&&void 0!==d?d:0,show_on_closeup:null!==(u=e.showOnCloseup)&&void 0!==u&&u,w:null!==(c=e.x)&&void 0!==c?c:0,x:null!==(p=e.w)&&void 0!==p?p:0,y:null!==(m=e.y)&&void 0!==m?m:0}}))&&void 0!==o?o:[],closeup_unified_description:B.closeupUnifiedDescription,grid_title:null!==(d=B.gridTitle)&&void 0!==d?d:"",story_pin_data_id:B.storyPinDataId,repin_count:null!==(u=B.repinCount)&&void 0!==u?u:0,tracked_link:B.trackedLink,link:B.link,domain:null!==(c=B.domain)&&void 0!==c?c:"",closeup_attribution:ey(B.closeupAttribution),link_domain:{official_user:ey(null===(p=B.linkDomain)||void 0===p?void 0:p.officialUser)},native_creator:ev(B.nativeCreator),pinner:ev(B.pinner),origin_pinner:ev(B.originPinner),board:{id:null!==(N=null==(L=B.board)?void 0:L.entityId)&&void 0!==N?N:"",image_thumbnail_url:null!==(Z=null==L?void 0:L.imageThumbnailUrl)&&void 0!==Z?Z:"",name:null!==(M=null==L?void 0:L.name)&&void 0!==M?M:"",privacy:"protected"===(z=null==L?void 0:L.privacy)||"public"===z||"secret"===z?z:"secret",url:null!==(K=null==L?void 0:L.url)&&void 0!==K?K:"",type:"board"},pin_join:{annotations_with_links_array:null!==(m=null==(H=null===(h=B.pinJoin)||void 0===h?void 0:h.annotationsWithLinksArray)?void 0:H.map(e=>({name:e.name,url:e.url})))&&void 0!==m?m:[],visual_annotation:null!==(g=null===(_=B.pinJoin)||void 0===_?void 0:_.visualAnnotation)&&void 0!==g?g:[]},story_pin_data:{metadata:{pin_title:null===(y=B.storyPinData)||void 0===y?void 0:null===(v=y.metadata)||void 0===v?void 0:v.pinTitle}},type:"pin"};return{pin:G,isLoaded:!0}},useLegacyAdapter:function({pinId:e}){let{data:t,isLoaded:i}=(0,p.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0}});return{pin:t,isLoaded:i}}});function ex(){let{checkExperiment:e}=(0,c.F)(),t=(0,u.ZP)(),i=(0,s.$B)(),{pinId:l}=(0,m.Z)(i.params.id||"");return(0,S.jsx)(ef,{input:e("unauth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:l},suspense:{fallback:(0,S.jsx)(o.$j,{accessibilityLabel:t._('Loading Pin data', 'unauthDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:l}},children:({data:e})=>!!e&&(0,S.jsx)(eh,{pinResponse:e})})}},245376:(e,t,i)=>{"use strict";function l(e){return e&&5!==e?4===e?"stela":null:"related_products"}i.d(t,{Z:()=>l})},691720:(e,t,i)=>{"use strict";i.d(t,{D5:()=>s,Hg:()=>a,T_:()=>r,g6:()=>n,w6:()=>l});let l=(e,t)=>Array.from({length:t-e},(t,i)=>i+e),a=508,n=600;function r(e,t){if(!t.startsWith("en"))return e;let i=e.split(" ").map(e=>{let t=e===e.toUpperCase();return t?e:e.toLowerCase()});return i.join(" ")}let s=()=>{let e=new URL(window.location.href),t=e.hostname.replace("www.",""),i=e.pathname;return`${t}${i=i.replace(/\/\d+\//,"/").replace(/\/$/,"")}`}},594379:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>en,Bi:()=>ei,gv:()=>el});var l,a,n,r=i(167912),s=i(616550),o=i(883119),d=i(934494),u=i(898781),c=i(773285),p=i(418614),m=i(280446),h=i(667294),g=i(363957),_=i(862670),y=i(865686),v=i(288562),f=i(407043),x=i(485019),S=i(352870),b=i(916117),w=i(223008),P=i(780280),I=i(483205),T=i(430323),k=i(826067),E=i(829407),j=i(975540),A=i(297852),F=i(873476),C=i(18514),R=i(444445),D=i(317254),O=i(784590),L=i(8742),N=i(785893);let Z=({data:e,itemIdx:t})=>(0,N.jsx)(L.ZP,{pin:e,pinId:e.id,authDesktopSurface:"RelatedProductsFeed",duploQueryRef:null,slotIndex:t,viewParameter:3334,viewType:72});function M({resourceOptions:e}){let t=(0,u.ZP)(),i=(0,O.Z)({name:"VisualLiveSearchProductFeedResource",options:e}),{data:l,isAtEnd:a,isLoaded:n,isFetching:r,fetchMore:s}=i,d=(0,h.useRef)(null);if(!n)return(0,N.jsx)(o.kC,{alignItems:"stretch",alignSelf:"center",justifyContent:"center",children:(0,N.jsx)(o.$j,{accessibilityLabel:t._('Loading related products', 'Label for loading spinner', 'Label for loading spinner'),show:!0})});let c=Array.isArray(l)?l:null==l?void 0:l.results;return(0,N.jsx)(o.xu,{display:"flex",maxWidth:"100%",ref:d,justifyContent:"center",children:c&&(0,N.jsx)(D.Z,{isAtEndOfFeed:a,itemCount:c.length,children:(0,N.jsx)(C.default,{columnWidth:R.yF,isFetching:r,renderItem:e=>(0,N.jsx)(Z,{...e}),items:c,loadItems:()=>{r||a||s()},paddingStyle:"simplified",scrollContainerRef:d,virtualize:!1})})})}var K=i(361259),z=i(83053),H=i(647945),U=i(362810);let B=void 0!==l?l:l=i(378605);function G({resourceOptions:e,onSearchIdChange:t,hasSimplifiedPinGridExpLoaded:i,viewParameter:l}){let a=(0,u.ZP)(),n=(0,O.Z)({name:"VisualLiveSearchResource",options:e}),{image_signature:r}=e,{data:s,isFetching:d,fetchMore:c}=n,p=null==s?void 0:s.results,m=null==s?void 0:s.search_identifier;return(0,h.useEffect)(()=>{m&&t(m)},[t,m]),(0,N.jsxs)(o.xu,{children:[p&&m&&(0,N.jsx)(o.xu,{children:(0,N.jsx)(o.Rk,{columnWidth:R.yF,renderItem:({data:e,itemIdx:t})=>(function({data:e,itemIdx:t}){let i=`${window.location.pathname}products/${window.location.search}`;return"story"===e.type?(0,N.jsx)(U.Z,{story:e,dangerouslySetActionUrl:i,slotIndex:t}):"pin"===e.type?(0,N.jsx)(L.ZP,{pin:e,pinId:e.id,authDesktopSurface:"FlashlightResultGrid",auxData:{search_identifier:m,image_signature:r},duploQueryRef:null,slotIndex:t,viewData:{search_identifier:m},viewParameter:l,viewType:72}):null})({data:e,itemIdx:t}),gutterWidth:R.P2,items:p,loadItems:c,minCols:1,scrollContainer:()=>window})}),(0,N.jsx)(o.$j,{accessibilityLabel:a._('Loading search results...', 'FlashlightResultGrid.spinner', 'Accessibility label for loading visual search results'),show:d||!m||!i})]})}function $(e){let{pinKey:t,onSearchIdChange:i,resourceOptions:l,viewParameter:a}=e,{hasSimplifiedPinGridExpLoaded:n}=(0,K.$)(),{checkExperiment:r}=(0,c.F)(),{data:s}=(0,b.u)(B,t),{anyEnabled:o}=r("web_flashlight_unified_feed"),{visualSearchFlashlightUnifiedResource:d}=(0,H.Z)({resourceOptions:l,setFlashlightSearchId:i});return(0,N.jsx)(h.Fragment,{children:o?(0,N.jsx)(z.Z,{isProductOnlyFeed:!1,pinKey:s,surfaceType:"flashlight",viewParameter:a,viewType:72,visualSearchFlashlightUnifiedResource:d}):(0,N.jsx)(G,{hasSimplifiedPinGridExpLoaded:n,onSearchIdChange:i,resourceOptions:l,viewParameter:a})})}var V=i(427806),W=i(697335);let Y=0,q="",X=void 0!==a?a:a=i(568189);function Q({pinKey:e}){let t=(0,u.ZP)(),i=(0,s.k6)(),l=(0,P.B)(),{logContextEvent:a}=(0,f.v)(),{checkExperiment:n}=(0,c.F)(),{anyEnabled:r}=n("web_flashlight_unified_feed"),[d,p]=(0,h.useState)(""),{id:C}=(0,s.UO)(),{pinId:R}=(0,m.Z)(C||""),{data:D}=(0,b.u)(X,e),O=D.imageSignature||"",L=(0,F.Z)(),Z=(0,s.TH)(),K=(0,k.mB)(Z.search),{cropSource:z}=Object.keys(K).reduce((e,t)=>({...e,[t]:parseInt(K[t],10)}),{}),H=(0,g.Z)(Z),U=Z.pathname.includes("/products"),{getInitialCropArea:B}=(0,_.Z)({pinKey:D}),G=B({initialCropArea:H}),Q=(0,h.useRef)();(0,h.useEffect)(()=>(Q.current&&q===R&&(Q.current.scrollTop=Y),()=>{Q.current&&(Y=Q.current.scrollTop,q=R)}));let J=z||5,ee=U?"shopping":"flashlight",et=r&&4===J?3462:3050,{getNormalizedPinImage:ei}=(0,w.Z)({pinKey:D,maxWidth:I.RZ});(0,E.Z)(()=>{if(!H&&D){let{width:e,height:t}=ei(),l=(0,A.Z)({cropArea:{h:(null!=t?t:1)-2*x.S,w:(null!=e?e:1)-2*x.S,x:x.S,y:x.S},pinId:R,isProductPage:U,surfaceType:"flashlight"});i.replace(l)}r||a({event_type:13,view_type:72,view_parameter:3050,view_data:{pin_id:R}})});let{width:el,height:ea,url:en}=ei(),er={pin_id:R,image_signature:O,crop:(0,j.Z)({cropArea:G,scaledWidth:el,scaledHeight:ea}),crop_source:J,is_shopping:U,entry_source:ee,entrypoint:L},es=Z&&Z.state&&Z.state.internalNavigation,eo=!es,ed=l&&l.isRTL||!1,eu=el+20,ec=U?t._('Shop similar items', 'Header explaining results of flashlight products search', 'Header explaining results of flashlight products search'):t._('More Ideas', 'Header explaining results of flashlight search', 'Header explaining results of flashlight search');return D?(0,N.jsx)(T.Z,{view:72,objectId:d,children:(0,N.jsxs)(h.Fragment,{children:[(0,N.jsx)(V.Z,{text:t._('Visual Search Page', 'pin.flashlight.accessibilityhiddenheading', 'accessibility label for flashlight page')}),(0,N.jsx)(v.Z,{pinId:R,title:!r||r&&(5===J||6===J)?ec:"",variant:"flashlight",viewParameter:et,viewType:72}),(0,N.jsx)(W.c,{children:e=>{var t;return U?(0,N.jsxs)(o.xu,{dangerouslySetInlineStyle:{__style:{marginTop:60}},children:[(0,N.jsx)(M,{resourceOptions:er}),";"]}):(0,N.jsxs)(o.xu,{display:"flex",paddingX:12,children:[(0,N.jsx)(o.xu,{bottom:!0,overflow:"auto",position:"fixed",dangerouslySetInlineStyle:{__style:{width:eu,height:"inherit",top:e+60,marginBottom:10}},ref:Q,children:(0,N.jsx)(o.xu,{"data-test-id":"flashlight-enabled-image",dangerouslySetInlineStyle:{__style:{width:el,height:ea}},children:(0,N.jsxs)(o.zd,{height:ea,rounding:4,width:el,children:[(0,N.jsx)(o.Ee,{alt:null!==(t=D.description)&&void 0!==t?t:"",naturalHeight:ea,naturalWidth:el,src:en}),(0,N.jsx)(S.Z,{showAnimation:eo,imageSignature:O,imageSize:{h:ea,w:el},initialCropArea:G,pinKey:D,viewParameter:et})]})})}),(0,N.jsx)(o.xu,{dangerouslySetInlineStyle:{__style:(0,y.Z)({top:60,cropperWidth:eu,isRTL:ed,isFlashlightPage:!0})},position:"relative",width:"100%",children:(0,N.jsx)($,{resourceOptions:er,onSearchIdChange:p,pinKey:D,viewParameter:et})})]})}})]})}):null}let J=void 0!==n?n:n=i(490644);function ee(e){var t,i,l;return{width:null!==(t=e.width)&&void 0!==t?t:0,url:null!==(i=e.url)&&void 0!==i?i:"",height:null!==(l=e.height)&&void 0!==l?l:0}}function et(e){return null==e?void 0:e.map(e=>{var t,i,l,a,n;return{additional_images:null!==(t=function(e){let t=[];return e.forEach(({additionalImages:e,spec:i})=>{var l;t.push(...null!==(l=function({additionalImages:e,spec:t}){let i=[];return null==e||e.forEach(e=>{if(e.canonicalImage){var l;i.push({canonical_images:{[t]:ee(e.canonicalImage)},image_signature:null!==(l=e.imageSignature)&&void 0!==l?l:""})}}),i}({additionalImages:e,spec:i}))&&void 0!==l?l:[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}]))&&void 0!==t?t:[],variant_set:i={variants:null!==(a=null==(n=null==(l=e.variantSet)?void 0:l.variants)?void 0:n.map(e=>{var t,i;return{additional_images:null!==(t=null==(i=e.additionalImages)?void 0:i.map(e=>{var t,i;return{canonical_images:null!==(t=e.canonicalImages)&&void 0!==t?t:{},image_signature:null!==(i=e.imageSignature)&&void 0!==i?i:""}}))&&void 0!==t?t:[]}}))&&void 0!==a?a:[]}}})}function ei(e){var t,i,l,a,n,o,d,u,c,p,h,g;let{id:_}=(0,s.UO)(),{pinId:y}=(0,m.Z)(_||""),v=function({pinId:e}){return{query:J,variables:{pinId:e}}}({pinId:y}),f=(0,r.useLazyLoadQuery)(J,v.variables),x=null===(t=f.v3GetPinQuery)||void 0===t?void 0:t.data;if(!x)return null;let S={id:null!==(i=x.entityId)&&void 0!==i?i:"",is_eligible_for_related_products:null!==(l=x.isEligibleForRelatedProducts)&&void 0!==l&&l,description:null!==(a=x.description)&&void 0!==a?a:"",image_signature:null!==(n=x.imageSignature)&&void 0!==n?n:"",visual_objects:null!==(o=null==(u=x.visualObjects)?void 0:u.map(e=>{var t,i,l,a,n,r,s,o,d,u,c,p,m,h;return{detection:null!==(t=e.detection)&&void 0!==t&&t,h:null!==(i=e.h)&&void 0!==i?i:0,index:null!==(l=e.index)&&void 0!==l?l:0,is_stela:null!==(a=e.isStela)&&void 0!==a&&a,label:null!==(n=e.label)&&void 0!==n?n:"",label_id:null==e.labelId?e.labelId:Number(e.labelId),label_x:null!==(r=e.labelX)&&void 0!==r?r:0,label_y:null!==(s=e.labelY)&&void 0!==s?s:0,max_annotation_num_documents:null!==(o=e.maxAnnotationNumDocuments)&&void 0!==o?o:0,score:null!==(d=e.score)&&void 0!==d?d:0,show_on_closeup:null!==(u=e.showOnCloseup)&&void 0!==u&&u,title:null!==(c=e.title)&&void 0!==c?c:"",w:null!==(p=e.x)&&void 0!==p?p:0,x:null!==(m=e.w)&&void 0!==m?m:0,y:null!==(h=e.y)&&void 0!==h?h:0}}))&&void 0!==o?o:[],images:null!==(d=function(e){let t={};return e.forEach(e=>{let{image:i,spec:l}=e;i&&(t[l]=ee(i))}),t}([{image:x.imageOrig,spec:"orig"},{image:x.image736x,spec:"736x"},{image:x.image564x,spec:"564x"},{image:x.image474x,spec:"474x"},{image:x.image236x,spec:"236x"}]))&&void 0!==d?d:{},rich_metadata:{products:null!==(p=et(null==(c=x.richMetadata)?void 0:c.products))&&void 0!==p?p:[]},rich_summary:{products:null!==(g=et(null==(h=x.richSummary)?void 0:h.products))&&void 0!==g?g:[]},type:"pin"};return S}function el(e){let{data:t,isLoaded:i}=(0,p.Z)({name:"PinResource",getOptions:({routeData:{params:{id:e}}})=>({id:e,field_set_key:"detailed",fetch_visual_search_objects:!0})});return i&&t?t:null}let ea=(0,d.Z)({useGraphQLAdapter:ei,useLegacyAdapter:el});function en(){let{checkExperiment:e}=(0,c.F)(),t=(0,u.ZP)();return(0,N.jsx)(ea,{input:e("auth_dweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,N.jsx)(o.$j,{accessibilityLabel:t._('Loading Pin data', 'authDesktopFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,N.jsx)(Q,{pinKey:{type:"deprecated",data:e}})})}},215425:(e,t,i)=>{"use strict";i.d(t,{Z:()=>c});var l=i(883119),a=i(377651),n=i(934494),r=i(898781),s=i(773285),o=i(594379),d=i(785893);let u=(0,n.Z)({useGraphQLAdapter:o.Bi,useLegacyAdapter:o.gv});function c(){let{checkExperiment:e}=(0,s.F)(),t=(0,r.ZP)();return(0,d.jsx)(u,{input:e("auth_dweb_graphql_closeup_shop_pinResource").anyEnabled?{enabled:!0,data:null,suspense:{fallback:(0,d.jsx)(l.$j,{accessibilityLabel:t._('Loading Pin data', 'RelatedProductsPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:null},children:({data:e})=>!!e&&(0,d.jsx)(a.Z,{pinKey:{type:"deprecated",data:e}})})}},23195:(e,t,i)=>{"use strict";i.d(t,{Z:()=>O});var l=i(702664),a=i(616550),n=i(558068),r=i(898781),s=i(773285),o=i(784590),d=i(501338),u=i(826067),c=i(280446),p=i(50286),m=i(19121),h=i(307603),g=i(255164),_=i(873476),y=i(883119),v=i(407043),f=i(766935),x=i(444445),S=i(313047),b=i(542554),w=i(829407),P=i(156637),I=i(743203),T=i(679031),k=i(8742),E=i(422946),j=i(404508),A=i(284367),F=i(785893);function C({fixedHeaderOverrideTop:e,handleBackClick:t,inUnifiedFeedExp:i,pageTitle:l,searchResourceOptions:a,visualSearchFlashlightUnifiedResource:n}){var r,s;let{logContextEvent:o}=(0,v.v)(),d=i?40:48,u=i?void 0:-x.D6,{data:c,fetchMore:p,isAtEnd:m,isFetching:h}=n||{},g=(null==c?void 0:c.results)||[],_=g.reduce((e,t)=>"pin"===t.type?[...e,t]:e,[]),C=JSON.stringify({is_product_only_feed:!0}),R={name:"VisualLiveSearchProductFeedResource",options:a};return(0,w.Z)(()=>{let e=(0,f.Z)(()=>{o({event_type:110,view_parameter:3462,view_type:427})},1e3);return i&&window.addEventListener("scroll",e),()=>{i&&window.removeEventListener("scroll",e)}}),(0,F.jsx)(P.Z,{auxData:i?{commerce_data:C}:void 0,viewParameter:3462,viewType:427,children:(0,F.jsxs)(b.default,{hasFixedHeader:!0,children:[(0,F.jsx)(S.FixedHeader,{overrideTop:e,height:i?60:void 0,children:(0,F.jsxs)(y.kC,{alignItems:"center",justifyContent:"between",children:[(0,F.jsx)(y.xu,{display:"flex",justifyContent:"center",alignItems:"center",width:d,height:d,marginStart:u,children:(0,F.jsx)(j.Z,{color:i?"darkGray":void 0,disableRedirect:!0,icon:"arrow-back",onTouch:t,viewType:427,viewParameter:3462,size:i?"sm":void 0})}),(0,F.jsx)(y.X6,{size:"300",accessibilityLevel:1,children:l}),(0,F.jsx)(y.xu,{width:d,marginEnd:u})]})}),i?(0,F.jsx)(A.Z,{feedKey:null!==(r=(0,E.J)("VisualSearchFlashlightUnifiedResource",a))&&void 0!==r?r:"",feedItems:_,pagination:{loadNext:p||(()=>void 0),hasNext:!m,isLoadingNext:h||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,F.jsx)(T.cn,{children:(0,F.jsx)(k.ZP,{auxData:{commerce_data:C},componentType:0,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:427,duploQueryRef:null,trafficSource:"shop_feed"})})}):(0,F.jsx)(I.ZP,{resourceConfig:R,feedItemProps:{viewParameter:3462,viewType:427},feedKey:null!==(s=(0,E.J)(R.name,R.options))&&void 0!==s?s:"",trafficSource:"shop_feed"})]})})}var R=i(350118);function D(e){let{searchResourceOptions:t}=e,i=(0,o.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,F.jsx)(C,{...e,visualSearchFlashlightUnifiedResource:i})}function O(){let{checkExperiment:e}=(0,s.F)(),t=(0,r.ZP)(),i=(0,p.ZP)(),y=(0,a.k6)(),{previous:v}=(0,n.Hv)(),f=(0,_.Z)(),x=(0,a.TH)(),{isAuth:S}=(0,m.Z)(),b=(0,a.$B)(),{pinId:w}=(0,c.Z)(b.params.id||""),{data:P}=(0,o.Z)({name:"PinResource",options:{id:w,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),I=(0,R.S6)()(w),T=(0,l.useSelector)(e=>e.flashlight.cropSource||5);if(!(null!=P?P:I))return null;let{anyEnabled:k}=e("mweb_flashlight_unified_feed"),{cropbox_dimensions:E,crop_source:j,x:A,y:O,w:L,h:N}=(0,u.mB)(x.search),[Z,M,K,z]=E?E.replace(/\{|\}/g,"").split(","):[],H=k?(0,h.Z)({x:Z,y:M,w:K,h:z}):(0,h.Z)({x:A,y:O,w:L,h:N}),U=k?(0,g.Z)(Number(j)):T,B=k?t._('Shop similar', 'mobileFlashlightPage.heading', 'Shop similar items from the visual search image'):t._('Shop similar items', 'mobileFlashlightPage.heading', 'Header explaining results of flashlight products search'),G={fixedHeaderOverrideTop:(0,d.ZP)(i,S),handleBackClick:()=>{if(0===v.length){y.replace(`/pin/${w}/visual-search/`);return}y.goBack()},inUnifiedFeedExp:k,pageTitle:B,searchResourceOptions:{pin_id:w,crop:H,crop_source:U,is_shopping:!0,entry_source:"shopping",entrypoint:f}};return k?(0,F.jsx)(D,{...G}):(0,F.jsx)(C,{...G})}},35066:(e,t,i)=>{"use strict";i.d(t,{S:()=>u,w:()=>c});var l=i(667294),a=i(425288),n=i(311541),r=i(632448),s=i(785893);let o=()=>i.e(6819).then(i.bind(i,6819)),{Provider:d,useHook:u}=(0,a.Z)("MerchantStorefrontSettings");function c({children:e}){let[t,i]=(0,n.Z)(o,r.Z),a=(0,l.useMemo)(()=>({merchantStorefrontSettings:t,updateLocaleStorefrontSetting:(e,t,l)=>{i({type:"UPDATE_LOCALE_STOREFRONT_SETTING",payload:{country:e,language:t,feedProfileId:l}})},updateStorefrontLastUpdated:e=>{i({type:"UPDATE_STOREFRONT_LAST_UPDATED",payload:e})}}),[i,t]);return(0,s.jsx)(d,{value:a,children:e})}},632448:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l={currentViewingLocale:{country:"",language:"",feedProfileId:""},lastUpdated:0}},239682:(e,t,i)=>{"use strict";function l(e,t,i){return{privacy_filter:t?"secret":"public",sort:i||"last_pinned_to",field_set_key:"profile_grid_item",username:e}}i.d(t,{Z:()=>l})},59644:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l=(e,t)=>`${e}:${t||""}`},240265:(e,t,i)=>{"use strict";i.d(t,{O:()=>s,Q:()=>o});var l=i(414327),a=i(59644),n=i(956800);let r=["alphabetical","last_pinned_to","oldest","newest","group_boards_at_top","custom"],s={name:"BoardsResource",key:"boardsResource",options:({boardOrder:e,filterStories:t,mixPublicSecret:i,username:l},a)=>({privacy_filter:"all",sort:e||"last_pinned_to",field_set_key:"profile_grid_item",filter_stories:t,username:l,page_size:25,group_by:i?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0,...a?{orbac_subject_id:a}:Object.freeze({})})},o=e=>r.reduce((t,i)=>{let r=[(0,n.N8)("profileBoards",(0,a.Z)(e,i))];return[!0,!1].forEach(t=>{[!0,!1].forEach(a=>{r.push((0,l.jB)(s.name,s.options({username:e,boardOrder:i,mixPublicSecret:t,filterStories:a})))})}),t.concat(r)},[])},151645:(e,t,i)=>{"use strict";function l({user:e,viewer:t}){return!!(t.isAuth&&(null==e?void 0:e.username)===t.username)}i.d(t,{Z:()=>l})},390598:(e,t,i)=>{"use strict";i.d(t,{PRODUCT_GROUP_COVER_IMAGE_DIMENSIONS:()=>o,Z:()=>d});var l=i(667294),a=i(883119),n=i(407043),r=i(970023),s=i(785893);let o={HEIGHT:362,WIDTH:362};function d({productGroup:e,preferredPreviewPinSizes:t=[],coverFit:i=!1}){var d,u,c,p,m;let h;let{logContextEvent:g}=(0,n.v)(),_=(null===(d=e.coverImages)||void 0===d?void 0:d[0])&&(0,r.cB)(e.coverImages[0]),{WIDTH:y,HEIGHT:v}=o,f=((null===(u=e.previewPins)||void 0===u?void 0:u[0])||{}).images,[x,S]=(0,l.useState)(!_);f&&x&&(h=t.concat("orig").map(e=>f[e]).find(e=>!!e));let b=x?null===(c=h)||void 0===c?void 0:c.height:v,w=x?null===(p=h)||void 0===p?void 0:p.width:y,P=x?null===(m=h)||void 0===m?void 0:m.url:_;return b&&w&&P?(0,s.jsx)(a.Ee,{alt:"",naturalHeight:b,naturalWidth:w,src:P,fit:i?"cover":"contain",onError:()=>{x||(g({event_type:10048,component:14004,aux_data:{product_group_cover_image_url:_}}),S(!0))}}):null}},970023:(e,t,i)=>{"use strict";i.d(t,{yh:()=>l,QE:()=>a,cB:()=>n}),i(214494),i(186656);let l="ALL_PRODUCTS",a=5e3,n=e=>{if(!e)return"";let t=["488x488","976x976","368x368","736x","474x","originals","orig",Object.keys(e)[0]];for(let l of t)if(e[l]){var i;return null!==(i=e[l].url)&&void 0!==i?i:""}return""}},436395:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(616550),a=i(784590);function n(){let{username:e}=(0,l.UO)();return(0,a.Z)(null==e?null:{name:"UserResource",options:{username:e,field_set_key:"profile"}})}},254176:(e,t,i)=>{"use strict";i.d(t,{Br:()=>m,Cr:()=>T,K8:()=>f,L1:()=>O,Tq:()=>y,YQ:()=>D,YV:()=>I,ZP:()=>k,aX:()=>E,eo:()=>g,fJ:()=>N,md:()=>h,oG:()=>_,oL:()=>j,of:()=>x,xH:()=>v,xQ:()=>S,xR:()=>R,xk:()=>w,yT:()=>p,zS:()=>L});var l=i(214494),a=i(27255),n=i(186656),r=i(248327),s=i(414327),o=i(239682),d=i(240265),u=i(956800),c=i(492583);function p(e){return{type:"BOARD_UPDATE_COMPLETE",payload:{board:e}}}function m(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}}function h(e,t){return{type:"BOARD_FOLLOW",payload:{boardId:e,value:t}}}function g({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:l}){return{type:"BOARD_DELETE",payload:{viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:l}}}let _=(e,t)=>i=>i((0,r.U)("BoardResource",{options:{board_id:e,field_set_key:t}}));function y(e,t,i){return(0,r.U)("BoardResource",{options:{board_id:e,field_set_key:t,...i?{orbac_subject_id:i}:{}}})}function v(e,t,i){return l=>(0,n.Z)({url:`/v3/boards/${e}/merge/${t}/`,method:"POST",data:i?{orbac_subject_id:i}:{}}).then(()=>Promise.all([l(g({boardId:e})),l(y(t,"pin_count")),l((0,u.N8)(c.Z.BOARD_SECTIONS,t))]))}function f(e){return t=>{e&&(0,d.Q)(e).forEach(e=>{t(e)})}}let x=e=>({type:"BOARD_DISMISS_SENSITIVITY_SCREEN",payload:{boardId:e}}),S=e=>_(e,"pin_count");function b(e,t){return{type:"BOARD_ARCHIVE",payload:{boardId:e,username:t}}}function w(e,t){return i=>(i(b(e)),l.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callUpdate())}function P(e){return{type:"BOARD_UNARCHIVE",payload:{boardId:e}}}function I(e,t){return i=>(i(P(e)),l.Z.create("BoardArchiveResource",{boardId:e,orbacSubjectId:t}).callDelete())}let T=(e,t)=>({type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}),k=e=>({type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}});function E(e,t,i){let n={name:e,privacy:a.Z.BoardPrivacy.PUBLIC,username:t,...i?{orbac_subject_id:i}:Object.freeze({})};return e=>l.Z.create("BoardResource",n).callCreate().then(i=>{let l=i.resource_response.data;return e(t&&(0,s.jB)("BoardsResource",(0,o.Z)(t,!1))),l})}function j(e={},t,i){return{type:"BOARD_CREATE_COMPLETE",payload:{options:e,board:t},error:i}}let A=(e,t)=>({type:"BOARD_INVITE_DENIED_BY_VIEWER",payload:{boardId:e,userId:t}}),F=(e,t,i)=>({type:"BOARD_COLLABORATOR_DELETE",payload:{boardId:e,userId:t,viewingUser:i}}),C=(e,t,i,l)=>({type:"BOARD_COLLABORATOR_ADD",payload:{boardId:e,viewingUser:t,status:i,collaboratingUsers:l}}),R=(e,t,i)=>async a=>{a(A(e,t));let n=await l.Z.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callDelete();return n.resource_response.error||i({event_type:29,object_id_str:e}),n},D=(e,t,i,a,n,r)=>async s=>{var o,d;let u="accepted"===t?"BoardCollaboratorResource":"BoardInviteResource";s(F(e,null!==(o=null==a?void 0:a.id)&&void 0!==o?o:"",i));try{let i=await l.Z.create(u,{board_id:e,field_set_key:"boardEdit",invited_user_id:null!==(d=null==a?void 0:a.id)&&void 0!==d?d:"",...r?{orbac_subject_id:r}:{}}).callDelete();i.resource_response.error||n({event_type:"accepted"===t?25:29,object_id_str:e})}catch(l){s(C(e,i,t,[a]))}},O=(e,t,i,a)=>n=>{let r=l.Z.create("BoardResource",{board_id:i}).callDelete();return n(g({viewingUserId:e,viewingUsername:t,boardId:i,boardPinCount:a})),r},L=(e,t)=>i=>l.Z.create("BoardArchiveResource",{boardId:e}).callUpdate().then(l=>(i((0,u.Qv)("archived-boards",[{id:e,type:"board"}])),i(b(e,t)),l)),N=(e,t)=>i=>l.Z.create("BoardArchiveResource",{boardId:e}).callDelete().then(l=>(i((0,u.Qv)(`profile-boards:${t}`,[{id:e,type:"board"}])),i(P(e)),l))},956800:(e,t,i)=>{"use strict";function l(e){return{type:"FEED_ITEM_REORDERED",payload:e}}function a(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}i.d(t,{EX:()=>r,N8:()=>a,Qv:()=>n,_f:()=>l,vX:()=>s});let n=(e,t,i=Object.freeze({}))=>({type:"APPEND_FEED_ITEMS",payload:{id:e,options:i,items:t}});function r(e){return{type:"FEED_ITEMS_REMOVED",payload:e}}function s(e){return{type:"FEED_ITEMS_ADDED",payload:e}}},447948:(e,t,i)=>{"use strict";function l(e,t){return{type:"CHANGE_CAROUSEL_SLOT_INDEX",payload:{id:e,index:t}}}function a(e,t){return{type:"SET_PIN_COMMENTS_DISABLED",payload:{id:e,pinCommentsDisabled:t}}}function n(e,t,i,l,a){return{type:"PIN_SAVE",payload:{id:e,boardId:t,title:i,url:l,localPinId:a}}}function r(e){return{type:"PIN_UNSAVE",payload:{id:e}}}function s(e){return{type:"PIN_SHOW_SUGGESTED_CREATOR_RECS",payload:{id:e,value:!0}}}function o({id:e,text:t,undoAction:i,undoActionOptions:l,undoText:a}){return{type:"PIN_SHOW_UNDO_AND_FEEDBACK",payload:{id:e,value:!0,text:t,undoAction:i,undoActionOptions:l,undoText:a}}}function d(e){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!1}}}function u(e,t){return{type:"PIN_SHOW_FEEDBACK",payload:{id:e,value:!0,text:t}}}function c(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!0}}}function p(e){return{type:"PIN_SHOW_FEEDBACK_OVERLAY",payload:{id:e,value:!1}}}function m(e){return{type:"PIN_SHOW_AD_REASONS_MODAL",payload:{id:e,value:!0}}}function h(e){return{payload:{id:e,value:!1},type:"PIN_SHOW_AD_REASONS_MODAL"}}i.d(t,{Gb:()=>r,I1:()=>d,Ib:()=>c,NA:()=>o,Ur:()=>n,Vw:()=>s,b9:()=>m,i0:()=>p,mO:()=>a,q1:()=>u,yR:()=>l,yj:()=>h})},492583:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});let l={AGGREGATED_COMMENTS:"aggregatedComments",AGGREGATED_COMMENT_REPLIES:"aggregated-comment-replies",BOARDFEED:"boardfeed",BOARDLESS_PINS:"boardless-pins",BOARD_SECTIONS:"board-sections",BOARD_SECTION_PINS:"board-section-pins",STORY_PINS_FEED:"story-pins-feed",PROFILE_PINS_FEED:"profile-pins-feed",PROFILE_BOARDS:"profileBoards",SEARCH_PINS:"searchPins",STORY_PIN_DATA:"storyPinData",TODAY_ARTICLE_INTEREST_FEED:"todayArticleInterestFeed",TODAY_TAB:"todayTabFeed",UNIFIED_COMMENTS:"unified-comments",TRIED_IT_FEED:"trieditfeed"}},422946:(e,t,i)=>{"use strict";i.d(t,{J:()=>y,Z:()=>w});var l=i(932995),a=i(338739),n=i(648284),r=i(998651),s=i(59644),o=i(483025),d=i(819063),u=i(492583);let c=new Set(["PinResource","RepinResource"]),p={ApiResource:e=>{if((null==e?void 0:e.url)==="/v3/orientation/nux_creator_recommendations/")return"nux-creator-recommendations";if((null==e?void 0:e.url)==="/v3/users/me/interests/"){var t;return`recommended-interests:${null===(t=e.data)||void 0===t?void 0:t.blend_type}`}return""},AggregatedActivityFeedResource:e=>`trieditfeed:${e.aggregated_pin_data_id}`,AggregatedCommentFeedResource:e=>`aggregated-comments:${e.objectId}`,AggregatedCommentReplyFeedResource:e=>`${u.Z.AGGREGATED_COMMENT_REPLIES}:${e.objectId}`,BoardlessPinsResource:e=>`boardless-pins:${e.userId}`,BestPinsFeedAltResource:e=>`idea-page-best-pins:${e.interest}`,BoardArchiveResource:()=>"archived-boards",BoardContentRecommendationResource:e=>`recommendation-feed:${e.id}`,BoardFeedResource:e=>`boardfeed:${e.board_id}`,BoardSectionsRepinResource:e=>`board-sections:${e.board_id}`,BoardSectionsResource:e=>`board-sections:${e.board_id}`,BoardSectionPinsResource:e=>`board-section-pins:${e.section_id}`,BoardsFeedResource:e=>`profile-boards:${e.username}`,BoardToolsFeedResource:e=>`board-tools:${e.boardId}`,ConversationsResource:()=>"conversations",DidItLikedByResource:e=>`triedit-likes:${e.didItDataId}`,DidItUserFeedResource:e=>`profile-tried:${e.username}`,HolidaySpotlightResource:e=>`holiday-spotlight:${e.storyType}`,InterestResource:e=>`klp-pins:${e.interest}`,MoreIdeasTabsBoardsResource:()=>"homefeed-more-ideas-tabs",NewsHubResource:()=>"notifications",NewsHubDetailsResource:e=>`newshubdetail:${e.news_id}`,NuxInterestsResource:()=>"nuxTopics",PinsFromBrandResource:e=>`brand-pins:${e.pin}`,ReactionsResource:e=>`reactions:${e.pin_id}`,RelatedArticlesResource:e=>`related-articles:${e.article_id}`,RelatedModulesResource:e=>`related-modules:${e.pin_id}`,RelatedPinFeedResource:e=>`related-pins:${e.pin}`,RelatedProductFeedResource:e=>"pin"===e.shop_source?`closeup-related-products:${e.pin}`:`related-products:${e.pin}`,RelatedStreamResource:e=>`related-story-pins:${e.pinId}`,SearchResource:e=>{let t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},BaseSearchResource:e=>{let t=`search:${e.scope}:${e.query}:${e.filters||""}:${e.appliedProductFilters}:${e.article||""}`;return e.auto_correction_disabled?`${t}:auto-correction-disabled`:t},SectionToolsFeedResource:e=>`section-tools:${e.sectionId}`,ShareSuggestionsTypeaheadResource:e=>`share-suggestions:${e.board||e.user}:${e.term}`,ShoppingFeedModularizedResource:e=>e.saved_products_only?`board-shop-saved:${e.board_id}`:`board-shop-related:${e.board_id}`,StoryFeedResource:e=>`story-feed:${e.feed_type}:${e.request_params}`,SuggestedCreatorFollowsResource:()=>"suggested-creator-follows",StoryPinTaggedProductsResource:()=>"story-pin-tagged-products",TodayArticleFeedResource:e=>`today-article:${e.id}`,IdeasHubTodayArticlesResource:e=>`today-article:${e.interest_id}`,TodayTabInterestFeedResource:e=>`today-article-interestfeed:${e.interest_id}`,TodayTabResource:()=>"today-tab",SeoTier1CandidateResource:()=>"tier1-feed",UnifiedCommentsResource:e=>`unified-comments:${e.aggregated_pin_id}`,UserActivityPinsResource:e=>`profile-pins-feed:${e.user_id}`,UserHomefeedResource:e=>e.pin_quiz?"pin-quiz":"homefeed",UserFollowingResource:e=>`user-following:${e.username}`,UserRecentActivityResource:e=>`user-recent-activity:${e.filter_type}`,UserStoryPinsFeedResource:e=>`story-pins-feed:${e.user_id}`,VideosFeedResource:()=>"videos-feed",VisualLiveSearchResource:e=>`visual-search:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualLiveSearchProductFeedResource:e=>`visual-search-products:${e.pin_id}:${e.crop.x}${e.crop.y}${e.crop.w}${e.crop.h}`,VisualSearchFlashlightUnifiedResource:e=>`related-products-unified:${e.pin_id}`,BoardFollowingResource:e=>`board-following:${e.username}`,InterestFollowingResource:e=>`topic-following:${e.username}`,UserPinsResource:e=>`profile-pins:${e.username}`,TopicFeedResource:e=>e.best_pins?`best-topic-pins:${e.interest}`:`topic-pins:${e.interest}`},m={AggregatedActivityFeedResource:({options:{aggregated_pin_data_id:e}})=>({type:u.Z.TRIED_IT_FEED,id:e}),AggregatedCommentFeedResource:({options:{objectId:e}})=>({type:u.Z.AGGREGATED_COMMENTS,id:e}),AggregatedCommentReplyFeedResource:({options:{isUnifiedComment:e,objectId:t}})=>({type:e?u.Z.AGGREGATED_COMMENT_REPLIES:u.Z.AGGREGATED_COMMENTS,id:t,reversed:!0}),BoardFeedResource:({options:{board_id:e}})=>({type:u.Z.BOARDFEED,id:e}),BoardlessPinsResource:({options:{userId:e}})=>({type:u.Z.BOARDLESS_PINS,id:e}),BoardSectionPinsResource:({options:{section_id:e}})=>({type:u.Z.BOARD_SECTION_PINS,id:e}),BoardSectionsResource:({options:{board_id:e}})=>({type:u.Z.BOARD_SECTIONS,id:e}),BoardsResource:({options:{username:e,sort:t}})=>({type:u.Z.PROFILE_BOARDS,id:(0,s.Z)(e,t)}),BaseSearchResource:({options:{auto_correction_disabled:e,appliedProductFilters:t,scope:i,filters:l,query_pin_sigs:a,query:s,user:o},response:d})=>{var c;return{type:u.Z.SEARCH_PINS,id:(0,n.Tb)({appliedProductFilters:t,autoCorrectionDisabled:e,filters:l,query:s,selectedPinImgSig:a,scope:i,user:o}),items:null!==(c=d.resource_response.data)&&void 0!==c&&c.results?(0,r.L)(d.resource_response.data.results).filteredResults:[]}},DidItCommentsResource:({options:{objectId:e}})=>({type:u.Z.AGGREGATED_COMMENTS,id:e,reversed:!0}),DidItUserFeedResource:({options:{username:e}})=>({type:u.Z.TRIED_IT_FEED,id:e}),IdeasHubTodayArticlesResource:({options:{interest_id:e}})=>({type:u.Z.TODAY_TAB,id:e}),RelatedArticlesResource:({options:{article_id:e}})=>({type:u.Z.TODAY_TAB,id:e}),StoryPinDraftsResource:({options:{userId:e}})=>({type:u.Z.STORY_PIN_DATA,id:e}),TodayTabInterestFeedResource:({options:{interest_id:e}})=>({type:u.Z.TODAY_ARTICLE_INTEREST_FEED,id:e}),TodayTabResource:()=>({type:u.Z.TODAY_TAB,id:"todayTab"}),UnifiedCommentsPreviewResource:({options:{aggregated_pin_id:e}})=>({type:u.Z.UNIFIED_COMMENTS,id:e}),UnifiedCommentsResource:({options:{aggregated_pin_id:e,is_reversed:t}})=>({type:u.Z.UNIFIED_COMMENTS,id:e,reversed:t}),UserActivityPinsResource:({options:{user_id:e}})=>({type:u.Z.PROFILE_PINS_FEED,id:e}),UserStoryPinsFeedResource:({response:e,options:{user_id:t}})=>({type:u.Z.STORY_PINS_FEED,id:t,items:e.resource_response.data||[]})},h=(e,{pinId:t,feedId:i})=>e[i]?{...e,[i]:e[i].filter(e=>!("pin"===e.type&&e.id===t))}:e,g=(e,{pinId:t,feedId:i})=>e[i]?{...e,[i]:[{type:"pin",id:t},...e[i]]}:e,_=(e,{pinId:t,oldFeedId:i,newFeedId:l})=>i===l?e:g(h(e,{pinId:t,feedId:i}),{pinId:t,feedId:l}),y=(e,t)=>e in p?p[e](t):null,v=(e,t)=>{switch(e.type){case"story":return{id:e.id,type:"story",story_type:e.story_type};case"module":return{id:e.id,type:"module",name:e.name};case"user":return{id:e.id,type:"user"};case"board":return t===u.Z.PROFILE_BOARDS?{id:e.id,type:"board",onProfile:!0,profileGroup:e.archived_by_me_at?"archived":e.privacy||"public"}:{id:e.id,type:"board",onProfile:!1};case"board_section":return{type:"boardsection",id:e.id};case"triedit":return{type:"triedit",id:e.id};case"aggregatedcomment":return{type:"aggregatedcomment",id:e.id};case"home_feed_tab":return{type:"home_feed_tab",id:e.id,name:e.name};case"storypindata":return{id:e.id,type:"storypindata"};case"todayarticle":return{type:"todayarticle",id:e.id};case"unifiedcommentspreview":return"userdiditdata"===e.unified_comment.type?{type:"triedit",id:e.unified_comment.id}:{type:"aggregatedcomment",id:e.unified_comment.id};default:return{type:"pin",id:e.id}}},f=(e,t)=>t?`board-section-pins:${t}`:`boardfeed:${e}`,x=(e,t,i)=>{let l=i||o.Z[e];if(l===d.LR)return t.result;if(l===d.sN)return t.result.map(e=>({id:e,schema:"board"}));if(l===d.Gn)return t.result.map(e=>({id:e,schema:"user"}));if(l===d.Ht)return t.result.map(e=>({id:e,schema:"invite"}));if(l===d.fE)return t.result.map(e=>({id:e,schema:"reaction"}));if("object"==typeof l){let e=Object.entries(l).find(([e,t])=>t===d.LR);if(e)return t.result[e[0]]}return null},S=(e,t)=>e.map(e=>{let{id:i,schema:l,type:a}=e;return"home_feed_tabs"===a?e:l?{id:i,type:l,trackingParams:"pin"===l?t.pins[i].tracking_params:void 0,user_id:void 0}:null}).filter(Boolean),b=(e,t,i)=>Object.keys(e).reduce((l,a)=>{let n=e[a]||[],r=n.filter(e=>!(e.type===t&&e.id===i));return n.length!==r.length&&(l[a]=r),l},{...e}),w=(e={},t)=>{switch(t.type){case a.zP:case a.aW:{let{payload:l}=t,{resource:n,options:r,normalizedResponse:s,schema:o}=l;if(s&&n in p){let i=x(n,s,o);if(i&&Array.isArray(i)){let l=p[n](r);if("ShoppingFeedModularizedResource"===n){let{board_id:t,saved_products_only:l}=null!=r?r:{},a=`board-shop-related:${t}`,n=`board-shop-saved:${t}`,o=`board-shop-saved-preview:${t}`,d=[...e[a]||[]],u=[...e[n]||[]],c=[...e[o]||[]],p=S(i,s.entities);return p.forEach(e=>{if(l)u.push(e);else{var i;s.entities.pins&&(null===(i=s.entities.pins[e.id])||void 0===i?void 0:i.board)===t?c.push(e):d.push(e)}}),{...e,[a]:d,[n]:u,[o]:c}}if("BoardToolsFeedResource"===n||"SectionToolsFeedResource"===n)return{...e,[l]:i};{let n=(t.type===a.aW&&e[l]||[]).concat(S(i,s.entities));return{...e,[l]:n}}}}else{var i;let{data:n}=l.response.resource_response;if(!(null!==(i=l.options)&&void 0!==i&&i.redux_normalize_feed))return e;let r=m[l.resource]({options:l.options,response:l.response});if(r){let{type:i,id:l,items:s,reversed:o}=r,d=(s||n||[]).map(e=>v(e,i));o&&(d=d.reverse());let u=`${i}:${l}`,c=e[u];if(c||t.type!==a.aW){let i=c||[],l=d;return t.type===a.aW&&(l=o?d.concat(i):i.concat(d)),{...e,[u]:l}}}}break}case"FEED_ITEM_REORDERED":{let{payload:{feedType:i,feedId:a,itemType:n,targetItemId:r,sourceItemId:s}}=t,o=`${i}:${a}`,d=e[o]||[],c=-1,p=-1;if([u.Z.BOARDFEED,u.Z.BOARD_SECTION_PINS,u.Z.BOARD_SECTIONS,"profileBoards"].includes(i)&&(c=d.findIndex(e=>e.type===n&&e.id===s),p=d.findIndex(e=>e.type===n&&e.id===r)),-1!==c&&-1!==p)return{...e,[o]:(0,l.Z)(d,c,p)};break}case"FEED_ITEMS_REMOVED":{let{payload:{feedType:i,feedId:l,inverseSelection:a,itemType:n,itemIds:r=[]}}=t,s=`${i}:${l}`,o=e[s]||[];if(o&&o.length>0&&(i===u.Z.BOARD_SECTION_PINS||i===u.Z.BOARDFEED)){let t=o.filter(e=>{let t=r.includes(e.id),i=e.type===n&&(a&&!t||!a&&t);return!i}),i=!!t.find(e=>"pin"===e.type);return{...e,[s]:i?t:[]}}if(o&&o.length>0&&i===u.Z.BOARD_SECTIONS){let t=o.filter(e=>{let t=r.includes(e.id);return!(e.type===n&&t)});return{...e,[s]:t}}if(o&&o.length>0&&(i===u.Z.AGGREGATED_COMMENTS||i===u.Z.BOARDLESS_PINS||i===u.Z.PROFILE_PINS_FEED||i===u.Z.STORY_PINS_FEED||i===u.Z.UNIFIED_COMMENTS||i===u.Z.TRIED_IT_FEED||i===u.Z.STORY_PIN_DATA)){let t=o.filter(e=>{let t=r.includes(e.id);return!(e.type===n&&t)});return{...e,[s]:t}}break}case"FEED_ITEMS_ADDED":{let{payload:{feedType:i,feedId:l,itemType:a,itemIds:n=[],prepend:r}}=t,s=`${i}:${l}`,o=e[s]||[];if(o&&(i===u.Z.BOARD_SECTION_PINS||i===u.Z.BOARDFEED||i===u.Z.BOARDLESS_PINS)){let t=n.map(e=>({id:e,type:a})),i=0;"story"===(o[0]||{}).type&&(i=1),"story"===(o[1]||{}).type&&(i=2);let l=[...o.slice(0,i),...t,...o.slice(i)];return{...e,[s]:l}}if(o&&i===u.Z.BOARD_SECTIONS){let t=[...n].reverse().map(e=>({id:e,type:"boardsection"})),i=o?[...t,...o]:[...t];return{...e,[s]:i}}if(i===u.Z.AGGREGATED_COMMENTS||i===u.Z.AGGREGATED_COMMENT_REPLIES||i===u.Z.PROFILE_PINS_FEED||i===u.Z.STORY_PINS_FEED||i===u.Z.UNIFIED_COMMENTS){let t=n.map(e=>({id:e,type:a})),i=o?[...r?t:o,...r?o:t]:t;return{...e,[s]:i}}if(i===u.Z.TRIED_IT_FEED){let t=n.map(e=>({id:e,type:a})),i=o?[...t,...o]:t;return{...e,[s]:i}}break}case"FEED_INVALIDATE":{let{payload:{feedType:i,feedId:l}}=t,a=`${i}:${l}`,n=e[a]||[];if(n)return{...e,[a]:null};break}case"APPEND_FEED_ITEMS":{let{payload:{id:i,items:l,options:a}}=t,n=e[i];if(!n)return{...e,[i]:l};{let t;return t=a.isPrepend?n[0]&&"story"===n[0].type?[].concat(n[0],l,n.slice(1)):l.concat(n):n.concat(l),{...e,[i]:t}}}case"PIN_DELETE":{let{payload:{pinId:i}}=t;return b(e,"pin",i)}case"BOARD_ARCHIVE":{let{payload:{boardId:i,username:l}}=t,a=`profile-boards:${null!=l?l:""}`;if(e[a])return{...e,[a]:e[a].filter(e=>e.id!==i)};break}case"BOARD_UNARCHIVE":{let{payload:{boardId:i}}=t,l="archived-boards";if(e[l])return{...e,[l]:e[l].filter(e=>e.id!==i)};break}case"BOARD_DELETE":{let{payload:{boardId:i}}=t;return b(e,"board",i)}case"BOARD_SECTION_DELETE":{let{payload:{boardSectionId:i}}=t;return b(e,"boardsection",i)}case"PINS_MOVE":{let{payload:{source:i,target:l,pinIds:a,userId:n}}=t,r=i.boardlessPins&&n&&`boardless-pins:${n}`||i.boardId&&f(i.boardId,i.sectionId),s=f(l.boardId,l.sectionId);return a.reduce((e,t)=>_(e,{pinId:t,oldFeedId:r,newFeedId:s}),e)}case"PINS_MOVE_ALL":{let{payload:{source:i,target:l,excludePinIds:a}}=t,n=f(i.boardId,i.sectionId),r=f(l.boardId,l.sectionId),s={...e,[n]:a.map(e=>({type:"pin",id:e}))};return delete s[r],s}case"PIN_EDIT":{let{payload:{pinId:i,boardId:l,sectionId:a="",source:{boardId:n,sectionId:r}}}=t,s=f(n,r),o=f(l,a);return _(e,{pinId:i,oldFeedId:s,newFeedId:o})}case a.AF:if(c.has(t.payload.resource)){let i;let l=t.payload.response.resource_response.data,{board:a}=l;if("quick_saves"===a.layout)i=`boardless-pins:${t.payload.options.user_id}`;else{let e=t.payload.options.section;i=e?`board-section-pins:${e}`:`boardfeed:${a.id}`}if(e[i]){let t={...e},a={id:l.id,type:"pin",trackingParams:null==l?void 0:l.tracking_params};return t[i]=[a].concat(e[i]),t}}if("BoardSectionResource"===t.payload.resource&&t.payload.normalizedResponse){let i=t.payload.normalizedResponse.result,l=t.payload.normalizedResponse.entities.boardsections[i].board,a=`board-sections:${l}`;if(e[a]){let t={...e};return t[a]=[{id:i,type:"boardsection"}].concat(e[a]),t}}if("AggregatedCommentResource"===t.payload.resource&&t.payload.normalizedResponse){let i=t.payload.normalizedResponse.result,l={id:i,type:"aggregatedcomment"},a={...e};for(let i of["aggregated-comments","unified-comments"]){let n=`${i}:${t.payload.options.objectId}`;e[n]&&(a={...a,[n]:[l].concat(a[n])})}return a}if("AggregatedCommentReplyResource"===t.payload.resource&&t.payload.normalizedResponse){let i=`${u.Z.AGGREGATED_COMMENT_REPLIES}:${t.payload.options.objectId}`;return{...e,[i]:[...e[i]||[],{id:t.payload.normalizedResponse.result,type:"aggregatedComment"}]}}if("ReactionsResource"===t.payload.resource&&t.payload.normalizedResponse){let{reaction_pin_id:i,reaction_type:l}=t.payload.options;if("reaction"===t.payload.options.action_type){let a=`reactions:${t.payload.options.pin_id}`,n={...e},r={id:`${i}:${t.payload.options.user_id}:${l}`,type:"reaction",trackingParams:void 0};return n[a]=[r].concat(e[a]),n}if("unreaction"===t.payload.options.action_type){let l=`${i}:${t.payload.options.user_id}`;return b(e,"reaction",l)}}break;case"COMPLETE_STORY":{let{payload:{storyId:i}}=t;return b(e,"story",i)}}return e}},761881:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});let l=(e,t)=>"string"==typeof e?e:e(t),a=e=>(t,i)=>t.feeds[l(e,i)],n=e=>a(e)},404508:(e,t,i)=>{"use strict";i.d(t,{Z:()=>_});var l=i(702664),a=i(616550),n=i(883119),r=i(112690),s=i(385740),o=i(898781),d=i(773285),u=i(957161),c=i(867820),p=i(52022),m=i(50286),h=i(709113),g=i(785893);function _({alignIconLeft:e,bgColor:t,color:i,disableRedirect:_=!1,fallbackUrl:y,icon:v="arrow-back",onTouch:f,padding:x,placement:S,shouldUseFallbackUrl:b,size:w="lg",viewParameter:P,viewType:I,fallbackUrlForExp:T}){let k=(0,o.ZP)(),E=(0,m.HG)(),{checkExperiment:j}=(0,d.F)(),A=(0,a.k6)(),F=(0,a.TH)(),C=(0,l.useSelector)(e=>e.session.isAuthenticated),R=(0,r.Z)(),D=(0,p.Z)(),O=!C&&T&&"/ideas"===y,{viewType:L,viewParameter:N}=(0,s.SU)(),[Z,M]=I?[I,P]:[L,N],K=()=>F.search&&F.search.includes("?nativeShouldDismiss=true"),z=()=>{let e=u.Z.getItem(h.pm);F.key||"/ideas"!==y?(0,c.My)(`pinner_conversion.back_button.${String(null==e?void 0:e[0].pageType)}`):(0,c.My)("pinner_conversion.back_button.no_history"),(0,c.My)(`web_back_button_click.${String(S)}.is_auth_${String(C)}`),D({action:"click",item:"back-button"}),Z&&R({view_type:Z,view_parameter:M,element:34,event_type:102}),f&&f(),_||((!F.key||F.state&&"redirect"===F.state.referrer||b)&&y?O?E&&j("web_unauth_backbutton_navigation").anyEnabled?(A.push(T||y),(0,c.My)("web.unauth.back_button.l1interest")):!E&&j("mweb_unauth_backbutton_navigation").anyEnabled?(A.push(T||y),(0,c.My)("mweb.unauth.back_button.l1interest")):A.push(y):A.push(y):F.pathname.includes("/password/reset/")&&K()?A.push("/login/?dismissWebview=true"):A.goBack())};return(0,g.jsx)(n.xu,{"data-test-id":"back-button",children:e?(0,g.jsx)(n.xu,{display:"flex",width:48,height:48,alignItems:"center",marginStart:"cancel"===v?-1:-2,children:(0,g.jsx)(n.hU,{accessibilityLabel:k._('Back', 'navigation button', 'navigation button'),bgColor:t,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"gray":i,icon:v,onClick:z,padding:"auto"!==x?x:2,size:w})}):(0,g.jsx)(n.hU,{accessibilityLabel:k._('Back', 'navigation button', 'navigation button'),bgColor:t,iconColor:!i&&(!t||["white","lightGray","transparent"].includes(t))?"gray":i,icon:v,onClick:z,padding:"auto"!==x?x:2,size:w})})}},144226:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(883119),a=i(785893);function n({children:e}){return(0,a.jsx)(l.xu,{paddingY:4,children:e})}},12755:(e,t,i)=>{"use strict";i.d(t,{VF:()=>a,pG:()=>l,vc:()=>n});let l=348,a=7,n=4},143649:(e,t,i)=>{"use strict";function l({cropSource:e,viewType:t}){return 2===t?"search":e&&5!==e?4===e?"stela":null:"related_products"}i.d(t,{Z:()=>l})},434788:(e,t,i)=>{"use strict";i.d(t,{Z:()=>eV});var l,a,n=i(616550),r=i(826067),s=i(50286),o=i(19121),d=i(167912),u=i(883119),c=i(934494),p=i(898781),m=i(773285),h=i(42447),g=i(784590),_=i(280446),y=i(667294),v=i(702664),f=i(792182),x=i(407043),S=i(916117),b=i(444445),w=i(558068),P=i(391254),I=i(542554),T=i(276602),k=i(217149),E=i(430323),j=i(501338),A=i(829407);function F(e,t){let i=0,l=!1,a=-1;return e.forEach((e,n)=>{let{x:r=0,y:s=0,h:o=0,w:d=0}=e,u=function(e,t){let{x:i,y:l,w:a,h:n}=e,{x:r,y:s,w:o,h:d}=t,u=Math.max(i,r),c=Math.min(i+a,r+o),p=Math.max(l,s),m=Math.min(l+n,s+d),h=u<c&&p<m?(c-u)*(m-p):0;return h/(a*n+o*d-h)}(t,{x:r,y:s,h:o,w:d});u>=.9&&u>i&&(i=u,l=!0,a=n)}),{isCropAreaOnDotArea:l,dotIndexToHide:a}}var C=i(255164),R=i(156637),D=i(743203),O=i(679031),L=i(643010),N=i(404508),Z=i(785893);function M({handleBackClick:e,viewParameter:t,viewType:i}){let l=(0,L.vs)();return(0,Z.jsx)(u.xu,{"data-test-id":"cancelButton",position:"fixed",left:!0,top:!0,margin:2,children:(0,Z.jsx)(N.Z,{color:l?"darkGray":"white",disableRedirect:!0,icon:"cancel",onTouch:e,padding:3,size:"lg",viewParameter:t,viewType:i})})}var K=i(112690),z=i(458101),H=i(585913),U=i(913574),B=i(49808),G=i(957435),$=i(398789);function V({pinDominantColor:e,url:t,closeupImageWidth:i,closeupImageHeight:l}){let a=(0,p.ZP)();return(0,Z.jsx)($.Z,{alt:a._('Pin image', 'flashlight.cropper.closeupImage', 'Pin closeup image'),color:e,isFlashlightPage:!0,naturalHeight:l,naturalWidth:i,placeholder:t,showSpinner:!1,src:t})}let W=e=>{let{alt:t,src:i,top:l,left:a}=e;return(0,Z.jsx)(u.xu,{position:"absolute",height:24,width:24,dangerouslySetInlineStyle:{__style:{top:l,left:a}},children:(0,Z.jsx)(u.Ee,{alt:t,color:"transparent",naturalHeight:24,naturalWidth:24,src:i})})},Y={backgroundColor:"#000000",opacity:"0.4"};function q({closeupImageUrl:e,closeupImageDims:t,cropArea:{x:i,y:l,w:a,h:n},disableBorder:r,disableHandles:s,handleBackClick:o,onTouchEnd:d,onTouchMove:c,onTouchStart:m,pinDominantColor:h,showBackButton:g,viewParameter:_}){let y=(0,p.ZP)(),{closeupImageWidth:v,closeupImageHeight:f}=t,x=Math.floor(f*l),S=Math.floor(v*i),b=Math.floor(f*n),w=Math.floor(v*a),P=S+w,I=x+b;return(0,Z.jsxs)(u.xu,{onTouchMove:c,onTouchStart:m,onTouchEnd:d,position:"relative","data-test-id":"cropper-container",children:[(0,Z.jsx)(V,{pinDominantColor:h,url:null!=e?e:"",closeupImageWidth:v,closeupImageHeight:f}),(0,Z.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:Y},height:x,left:!0,position:"absolute",top:!0,width:"100%"}),(0,Z.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:x}},left:!0,height:b,position:"absolute",width:S}),(0,Z.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:x,left:P}},height:b,position:"absolute",right:!0}),(0,Z.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{...Y,top:I}},bottom:!0,left:!0,position:"absolute",width:"100%"}),g&&(0,Z.jsx)(M,{handleBackClick:o,viewParameter:_,viewType:427}),!s&&(0,Z.jsxs)(u.xu,{"data-test-id":"CropperHandles",children:[(0,Z.jsx)(W,{alt:y._('Top left cropper handle', 'flashlight.cropper.topLeftHandle', 'top left handle for cropping image'),src:B,top:x-9,left:S-9}),(0,Z.jsx)(W,{alt:y._('Top right cropper handle', 'flashlight.cropper.topRightHandle', 'top right handle for cropping image'),src:G,top:x-9,left:P-15}),(0,Z.jsx)(W,{alt:y._('Bottom left cropper handle', 'flashlight.cropper.bottomLeftHandle', 'bottom left handle for cropping image'),src:H,top:I-15,left:S-9}),(0,Z.jsx)(W,{alt:y._('Bottom right cropper handle', 'flashlight.Cropper.BottomLeftHandle', 'bottom right handle for cropping image'),src:U,top:I-15,left:P-15})]}),(0,Z.jsx)(u.xu,{"data-test-id":"CroppedArea",position:"absolute",rounding:2,height:b+4,width:w+4,dangerouslySetInlineStyle:{__style:{top:x-2,left:S-2,border:r?void 0:"2px solid #ffffff"}}})]})}var X=i(599611);function Q({auxData:e,onClick:t,shouldLogDotRender:i,showNoHalo:l,style:a,viewParameter:n,x:r,y:s}){let o=(0,p.ZP)(),d=(0,K.Z)();return(0,A.Z)(()=>{i&&d({aux_data:e,element:1221,event_type:120,view_parameter:n,view_type:72})}),(0,Z.jsx)("div",{"data-test-id":"dot",onClick:t,onKeyPress:t,role:"button",style:{position:"absolute",top:s-16,left:r-16,outline:"none",...a},"aria-label":o._('Select a specific item on image', 'dot.accessibilityLabel', 'Accessibility label for <Dot /> component'),tabIndex:"0",children:(0,Z.jsx)(u.xu,{dangerouslySetInlineStyle:{__style:{backgroundColor:l?void 0:"rgba(0, 0, 0, 0.1)",width:32,height:32,border:"none",borderRadius:32,cursor:t?"pointer":"default"}},children:(0,Z.jsx)(u.xu,{color:"light",position:"absolute",padding:0,display:"flex",alignItems:"center",justifyContent:"center",dangerouslySetInlineStyle:{__style:{boxShadow:"none",width:16,height:16,border:"none",borderRadius:16,top:8,left:8}}})})})}var J=i(100183);let ee="flashlightDotPop",et=(0,J.Ll)([`
  ${ee} {
      0% {
          opacity: 0;
          transform: scale(0);
      }

      100% {
          opacity: 1;
          transform: scale(1);
      }
  }
`,`labelReveal {
    0% {
      transform: scale(0, 1)
    }

    100% {
      transform: scale(1, 1)
    }
  }
`]),ei=e=>{let t=parseFloat((.1*e).toFixed(2));return{animation:`${ee} 0.3s ease-out ${t}s both`}};function el({closeupImageTop:e,imageHeight:t,imageTop:i,imageWidth:l,onDotTap:a,pinId:n,pinImageSignature:r,setCropArea:s,shouldLogDotRender:o,showNoHalo:d,viewParameter:u,visualObjects:c,visualObjectToHide:p}){let m=(0,K.Z)();return(0,Z.jsxs)(y.Fragment,{children:[(0,Z.jsx)(P.Z,{unsafeCSS:et}),c.map((h,g)=>{if(g===p)return null;let{x:_=0,y=0,w:v=0,h:f=0}=h,x={x:_,y,h:f,w:v},S=(0,X.Z)({cropArea:{x:_,y,w:v,h:f},scaledWidth:l,scaledHeight:t}),b=Math.floor(S.x+S.w/2),w=Math.floor(S.y+i+S.h/2),P=ei(g),I={pin_id:n,image_signature:r,visual_objects:JSON.stringify([x]),commerce_data:JSON.stringify({entrypoint:"flashlight",pin_is_stela:"false"})};return(0,Z.jsx)(Q,{auxData:I,onClick:function(){m({aux_data:I,element:1221,event_type:102,view_parameter:u,view_type:72}),a({cropArea:x,cropSource:4,visualObjects:c}),null==s||s(x)},shouldLogDotRender:o,style:P,x:b,y:w-e,showNoHalo:d,viewParameter:u},JSON.stringify(x))})]})}var ea=i(691720);let en={OUTSIDE:0,INSIDE:1,LEFT_CROPPER:2,RIGHT_CROPPER:3,TOP_CROPPER:4,BOTTOM_CROPPER:5,TOP_LEFT_HANDLE:6,TOP_RIGHT_HANDLE:7,BOTTOM_LEFT_HANDLE:8,BOTTOM_RIGHT_HANDLE:9,NONE:10};function er({closeupImageUrl:e,closeupImageDims:t,cropArea:i,handleBackClick:l,handleChangeCloseupImageTop:a,handleCropperChange:n,headerHeight:r,inUnifiedFeedExp:s,pinDominantColor:o,pinId:d,pinImageSignature:c,showBackButton:p,viewParameter:m,visualObjects:h,visualObjectToHide:g}){let _=(0,K.Z)(),v=(0,y.useRef)(),[f,x]=(0,y.useState)(0),[S,b]=(0,y.useState)(0),[w,P]=(0,y.useState)(en.NONE),[I,T]=(0,y.useState)(i),{current:k}=(0,z.Z)(),{x:E,y:j,w:A,h:F}=I,{closeupImageTop:C,closeupImageMinTop:R,closeupImageWidth:D,closeupImageHeight:O,minCropperWidthRatio:L,minCropperHeightRatio:N}=t,M=r||0,H=(e,t)=>{let i=t-C,l=e-(v.current?v.current.getBoundingClientRect().left:0),a=O*j,n=O*(j+F),r=D*E,s=D*(A+E);if(i>a+12&&i<n-12&&l>r+12&&l<s-12)return en.INSIDE;if(l<=r+12&&l>=r-12&&i>=a+15&&i<=n-15)return en.LEFT_CROPPER;if(l<=s+12&&l>=s-12&&i>=a+15&&i<=n-15)return en.RIGHT_CROPPER;if(l<=s-15&&l>=r+15&&i>=a-12&&i<=a+12)return en.TOP_CROPPER;if(l<=s-15&&l>=r+15&&i>=n-12&&i<=n+12)return en.BOTTOM_CROPPER;if(l<=r-9+24&&l>=r-12&&i>=a-12&&i<=a+24-9)return en.TOP_LEFT_HANDLE;if(l<=s+12&&l>=s-15&&i>=a-12&&i<=a+24-9)return en.TOP_RIGHT_HANDLE;else if(l<=r-9+24&&l>=r-12&&i>=n-15&&i<=n+12)return en.BOTTOM_LEFT_HANDLE;else if(l<=s+12&&l>=s-15&&i>=n-15&&i<=n+12)return en.BOTTOM_RIGHT_HANDLE;else return en.OUTSIDE};return(0,Z.jsx)(u.kC,{width:"100vw",justifyContent:"center",children:(0,Z.jsxs)(u.xu,{overflow:"hidden",position:"fixed",dangerouslySetInlineStyle:{__style:{top:C,touchAction:"none"}},ref:v,maxWidth:ea.g6,width:"100%",children:[(0,Z.jsx)(q,{closeupImageUrl:e,closeupImageDims:t,cropArea:I,handleBackClick:l,onTouchEnd:()=>{if(![en.NONE,en.OUTSIDE].includes(w)){let e=w===en.INSIDE?7603:7604;_({event_type:e,view_parameter:m,view_type:72}),n({cropArea:I,cropSource:6,visualObjects:h})}},onTouchMove:e=>{let{clientX:t,clientY:i}=e.touches[0];if(x(t),b(i),w===en.NONE){let e=H(t,i);P(e)}if(null!=L&&null!=N&&null!=R){let e=i-S,l=t-f,n=l/D,r=e/O,s=Math.min(E+A-L,Math.max(0,E+n)),o=A+(E-s),d=Math.min(j+F-N,Math.max(0,j+r)),u=F+(j-d),c=Math.min(1-E,Math.max(L,A+n)),p=Math.min(1-j,Math.max(N,F+r));switch(w){case en.OUTSIDE:a(Math.floor(Math.max(R,Math.min(M,C+e))));break;case en.INSIDE:T(e=>({...e,x:Math.max(0,Math.min(1-A,E+n)),y:Math.max(0,Math.min(1-F,j+r))}));break;case en.LEFT_CROPPER:T(e=>({...e,x:s,w:o}));break;case en.RIGHT_CROPPER:T(e=>({...e,w:c}));break;case en.TOP_CROPPER:T(e=>({...e,y:d,h:u}));break;case en.BOTTOM_CROPPER:T(e=>({...e,h:p}));break;case en.TOP_LEFT_HANDLE:T({x:s,w:o,y:d,h:u});break;case en.TOP_RIGHT_HANDLE:T(e=>({...e,w:c,y:d,h:u}));break;case en.BOTTOM_LEFT_HANDLE:T(e=>({...e,h:p,x:s,w:o}));break;case en.BOTTOM_RIGHT_HANDLE:T(e=>({...e,h:p,w:c}))}}},onTouchStart:e=>{let{clientX:t,clientY:i}=e.touches[0];x(t),b(i),P(en.NONE)},pinDominantColor:o,showBackButton:p,viewParameter:m}),!!h.length&&0!==O&&0!==D&&(0,Z.jsx)(u.xu,{"data-test-id":"FlashlightDots",children:(0,Z.jsx)(el,{closeupImageTop:C,imageHeight:O,imageTop:C,imageWidth:D,onDotTap:n,pinId:d,pinImageSignature:c,setCropArea:T,shouldLogDotRender:!k,showNoHalo:s,viewParameter:m,visualObjects:h,visualObjectToHide:g})})]})})}var es=i(427806),eo=i(8742);let ed=e=>({type:"SET_FLASHLIGHT_CROP_SOURCE",payload:{cropSource:e}});var eu=i(884183),ec=i(422946),ep=i(761881),em=i(284367),eh=i(594736),eg=i(984225),e_=i(124580),ey=i(780280),ev=i(223815),ef=i(867820),ex=i(245376);function eS(e,t,i){var l;return(t="symbol"==typeof(l=function(e,t){if("object"!=typeof e||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var l=i.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?l:String(l))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}let eb={modal:{baseStyles:{transitionProperty:"transform, opacity",transitionTimingFunction:"ease-out",transformOrigin:"bottom",touchAction:"none"}}},ew={NONE:0,UP:1,DOWN:2};class eP extends y.Component{constructor(...e){super(...e),eS(this,"state",{currentDistanceFromTop:this.props.maxDistanceFromTop?this.props.maxDistanceFromTop:-1,headerHeight:this.props.headerHeight||0,isAtTop:!1,scrollDirection:ew.NONE,shouldAnimate:!1,startY:0,canScrollOnChildren:!1}),eS(this,"onTouchStart",e=>{let{clientY:t}=e.touches[0];this.setState({startY:t,shouldAnimate:!1,scrollDirection:ew.NONE})}),eS(this,"onTouchMove",e=>{let{clientY:t}=e.touches[0],{startY:i,currentDistanceFromTop:l}=this.state,{canMoveModal:a,maxDistanceFromTop:n}=this.props,r=t-i;a&&void 0!==n&&(r>0&&l>=0&&l<n&&window.scrollY<=0||r<0&&l<=n&&l>=0)&&this.setModalPosition(t)}),eS(this,"onTouchEnd",()=>{let{entryPoint:e,minDistanceFromTop:t,canMoveModal:i}=this.props;this.props.shouldSnapToEnds&&this.state.scrollDirection===ew.DOWN?(this.header&&e_.Z.removeObstruction("top",this.header),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:this.props.maxDistanceFromTop,shouldAnimate:!0,isAtTop:!1}),e&&(0,ef.My)(`mweb.${e}.snap_to_bottom`)):this.props.shouldSnapToEnds&&this.state.scrollDirection===ew.UP&&(this.state.isAtTop?this.setState({currentDistanceFromTop:0,shouldAnimate:!0}):this.setState({canScrollOnChildren:i,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),this.header&&e_.Z.addObstruction("top",this.header),e&&(0,ef.My)(`mweb.${e}.sliding_modal.snap_to_top`))}),eS(this,"handleHandleMove",e=>{let{clientY:t}=e.touches[0],{canMoveModal:i,maxDistanceFromTop:l,minDistanceFromTop:a}=this.props,{startY:n,currentDistanceFromTop:r}=this.state;i&&r<=(a||0)&&t-n>0&&(e.stopPropagation(),this.setState({canScrollOnChildren:!1,currentDistanceFromTop:l,isAtTop:!1,scrollDirection:ew.NONE,shouldAnimate:!0,startY:0}))}),eS(this,"handleHeaderTouch",()=>{let{maxDistanceFromTop:e,minDistanceFromTop:t,entryPoint:i,canMoveModal:l}=this.props,{currentDistanceFromTop:a,scrollDirection:n}=this.state;n===ew.NONE&&(a===e?(this.setState({canScrollOnChildren:l,currentDistanceFromTop:t||0,shouldAnimate:!0,isAtTop:!0}),(0,ef.My)(`mweb.${i}.sliding_modal.header_touch.snap_to_top`)):e&&(this.setState({canScrollOnChildren:!1,currentDistanceFromTop:e,shouldAnimate:!0,isAtTop:!1}),(0,ef.My)(`mweb.${i}.sliding_modal.header_touch.snap_to_bottom`)))}),eS(this,"handleCloseIconTouch",e=>{let{currentDistanceFromTop:t}=this.state,{onDismiss:i,logContextEvent:l,maxDistanceFromTop:a,viewParameter:n,viewType:r}=this.props;e.stopPropagation(),i&&(l({aux_data:{commerce_data:JSON.stringify({snapped_top:0===t})},element:75,event_type:102,view_parameter:n,view_type:r}),this.setState({currentDistanceFromTop:a,startY:0,scrollDirection:ew.NONE},()=>i(e)))}),eS(this,"getModalStyles",()=>{let{shouldSnapToEnds:e}=this.props,{currentDistanceFromTop:t,shouldAnimate:i,canScrollOnChildren:l}=this.state,{baseStyles:a}=eb.modal;return{...a,animation:"modalReveal 0.3s ease-out both",position:l?"absolute":"fixed",top:t>-1?t:void 0,bottom:0,width:"100vw",...e&&i?{transitionDuration:"500ms",transitionProperty:"transform, opacity, top"}:Object.freeze({})}}),eS(this,"setModalPosition",e=>{let{startY:t,currentDistanceFromTop:i}=this.state,{maxDistanceFromTop:l,snapToEndThreshold:a,entryPoint:n}=this.props;if(l){let r=e-t,s=Math.floor("CloseupShop"===n||"CloseUpMainPinDrawer"===n?Math.max(0,i+r):Math.min(l,Math.max(0,i+r))),o=ew.NONE;void 0!==a&&a>=0&&(r<0?o=s>Math.floor((1-a)*l)?ew.DOWN:ew.UP:r>0&&(o=s>Math.floor(a*l)?ew.DOWN:ew.UP)),this.setState({startY:e,currentDistanceFromTop:s,scrollDirection:o})}})}componentDidMount(){let{isOpen:e}=this.props;e&&e_.Z.pause()}componentDidUpdate(e,t){let{domainFilters:i,priceFilters:l,cropSource:a,isOpen:n,logContextEvent:r,maxDistanceFromTop:s,setHasDraggedDrawerToFullScreen:o,minDistanceFromTop:d,entryPoint:u}=this.props,{currentDistanceFromTop:c}=this.state;if(n&&!e.isOpen?e_.Z.pause():!n&&e.isOpen&&e_.Z.resume(),"CloseUpMainPinDrawer"===u&&s<e.maxDistanceFromTop&&c>s&&this.handleHeaderTouch(),t.currentDistanceFromTop!==(e.minDistanceFromTop||0)&&c===(d||0)&&o&&o(!0),i&&l&&(!(0,eh.ZP)(i,e.domainFilters)||!(0,eh.ZP)(l,e.priceFilters))){let e=(0,ex.Z)(a);r({event_type:13,view_parameter:"related_products"===e?3455:3456,view_type:72,element:11735})}}componentWillUnmount(){let{isOpen:e}=this.props;this.header&&e_.Z.removeObstruction("top",this.header),e&&e_.Z.resume()}render(){let{children:e,headerChildren:t,heading:i,inUnifiedFeedExp:l,isOpen:a,isRTL:n,mobileAccessibilityCloseIconLabel:r,mobileHideCloseIcon:s,noDivider:o,showHandle:d}=this.props,{headerHeight:c,canScrollOnChildren:p}=this.state,m=!p&&l?"32px 32px 0 0":"0";return a?(0,Z.jsx)(ev.Z,{children:(0,Z.jsx)(u.xu,{role:"dialog","aria-label":i,children:(0,Z.jsx)(u.xu,{color:"default",dangerouslySetInlineStyle:{__style:{...this.getModalStyles(),borderRadius:m}},onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,children:(0,Z.jsxs)(u.iP,{accessibilityLabel:this.props.i18n._('View all search results', 'SlidingModal.Header.a11yLabel', 'Accessibility label for header of search results in flashlight'),onTap:this.handleHeaderTouch,children:[(0,Z.jsxs)(u.Le,{top:c||0,children:[d&&(0,Z.jsx)(u.xu,{"data-test-id":"slidingModalHandle",display:"flex",justifyContent:"center",color:"default",dangerouslySetInlineStyle:{__style:{padding:"8px 0 24px 0",borderRadius:m}},onTouchMove:this.handleHandleMove,children:eg.Z}),!s&&(0,Z.jsxs)(u.xu,{ref:e=>{this.header=e},color:"default",rounding:2,children:[(0,Z.jsxs)(u.kC,{alignItems:"center",flex:"grow",justifyContent:"start",children:[(0,Z.jsx)(u.kC,{alignItems:"center",justifyContent:"start",children:(0,Z.jsx)(u.hU,{accessibilityLabel:r||"Close visual search results",icon:"arrow-back",iconColor:"gray",onClick:({event:e})=>this.handleCloseIconTouch(e),padding:5,size:"lg"})}),(0,Z.jsx)(u.xu,{alignItems:"center",dangerouslySetInlineStyle:{__style:function({filterIconShown:e,isRTL:t}){let i=t?"marginRight":"marginLeft",l=t?"marginLeft":"marginRight";return e?{[i]:38,[l]:50,marginTop:15,marginBottom:15}:{[i]:-10,[l]:50,marginTop:15,marginBottom:15}}({isRTL:n})},"data-test-id":"slidingModalHeader",display:"flex",flex:"grow",justifyContent:"center",children:(0,Z.jsx)(u.X6,{align:"center",size:"400",accessibilityLevel:2,children:i})})]}),t||null,!o&&(0,Z.jsx)(u.iz,{})]})]}),(0,Z.jsx)(u.xu,{overflow:p?"auto":"visible",children:e})]})})})}):null}}function eI(e){let t=(0,p.ZP)(),i=(0,K.Z)(),{isRTL:l}=(0,ey.B)();return(0,Z.jsx)(eP,{...e,i18n:t,isRTL:l,logContextEvent:i})}let eT=`
  html, body {
    overscroll-behavior: none;
  }
`;function ek(){return Math.min(ea.g6,window.innerWidth)}function eE(e,t){return Math.floor(ek()/t*e)}function ej(e,t){let i=0,l=0,a=0;if(e&&e.imageSpec_736x){var n,r,s,o;let t=e?e.imageSpec_736x:null;i=ek(),l=eE(null!==(n=null==t?void 0:t.height)&&void 0!==n?n:1,null!==(r=null==t?void 0:t.width)&&void 0!==r?r:1),a=function(e,t){let i=Math.floor(.6*window.innerHeight);return Math.min(i,eE(e,t))}(null!==(s=null==t?void 0:t.height)&&void 0!==s?s:1,null!==(o=null==t?void 0:t.width)&&void 0!==o?o:1)}return{closeupImageWidth:i,closeupImageHeight:l,closeupImageMinTop:a-l,closeupImageTop:t||0,minCropperWidthRatio:i?50/i:0,minCropperHeightRatio:l?50/l:0,modalTop:a}}function eA(e,t,i,l){let a=i?Number(i):.4,n=l?Number(l):.1;e>0&&t>0&&(i||(a=(t-2*t*.1)/e),l||(n=.1*t/e));let r={h:a,y:n};return r}let eF=(0,ep.Z)(e=>`visual-search:${e}`);function eC({cropArea:e,cropSource:t,headerHeight:i,inUnifiedFeedExp:l,pin:a,pinId:r,queryH:s,queryY:d,searchResourceOptions:c,setCropSource:h,setState:g,state:_,visualSearchFlashlightUnifiedResource:S}){var j,C,L,N,K,z;let H=(0,T.E)(),U=(0,p.ZP)(),{logContextEvent:B}=(0,x.v)(),G=(0,v.useDispatch)(),$=(0,n.k6)(),{previous:V}=(0,w.Hv)(),{checkExperiment:W}=(0,m.F)(),Y=(0,n.TH)(),{isAuth:q}=(0,o.Z)(),{width:X=0}=(0,f.Z)()||{},Q=(null!==(j=null==a?void 0:a.visualObjects)&&void 0!==j?j:[]).filter(e=>e.isStela),J=(null!==(C=null==a?void 0:a.visualObjects)&&void 0!==C?C:[]).filter(e=>!!e.label),ee=Q.length>0||J.length>0,et=ee&&(W("mweb_flashlight_show_more_stela_dots").anyEnabled?Q:J)||[],ei=et.map(e=>{let{isStela:t,title:i,label:l,labelId:a,labelX:n,labelY:r,maxAnnotationNumDocuments:s,score:o,showOnCloseup:d,x:u,y:c,h:p,w:m}=e;return{is_stela:null!=t&&t,title:null!=i?i:"",label:null!=l?l:"",label_id:null!=a?a:"",label_x:null!=n?n:0,label_y:null!=r?r:0,max_annotation_num_documents:null!=s?s:0,score:null!=o?o:0,show_on_closeup:null!=d&&d,x:null!=u?u:0,y:null!=c?c:0,h:null!=p?p:0,w:null!=m?m:0}}),[el,ea]=(0,y.useState)(F(ei,e)),{isCropAreaOnDotArea:en,dotIndexToHide:ep}=el,eh=e=>G((0,eu.By)(e)),eg=e=>G(ed(e)),e_=(0,v.useSelector)(e=>eF(e,r)),{data:ey,fetchMore:ev,isAtEnd:ef,isFetching:ex,isLoaded:eS}=S||{},eb=(null==ey?void 0:ey.results)||[],ew=eb.find(e=>"story"===e.type&&"unified_visual_feed_product_upsell"===e.story_type),eP=eb.filter(e=>"pin"===e.type),ek=null==ew?void 0:ew.action,{url:eE=`/pin/${r}`,title:eC=""}=ek||{},eR=U._('Shop similar', 'mobileFlashlight.productUpsellTitle', 'Shop similar products from the image.'),eD=U._('Image search', 'mobileFlashlight.organicFeedTitle', 'Search results from the image.'),eO=U._('Visual search', 'Visual search results', 'Visual search results'),eL=l&&(4===t||en)?3462:3050,eN=JSON.stringify({is_product_only_feed:!1}),{closeupImageWidth:eZ,modalTop:eM}=_.closeupImageDims,eK=null!==(L=null==a?void 0:null===(N=a.imageSpec_736x)||void 0===N?void 0:N.url)&&void 0!==L?L:"",ez=X-60<eZ&&l;function eH(){B({component:14339,element:179,event_type:102,view_parameter:eL,view_type:72})}function eU(){if(0===V.length){$.replace(`/pin/${r}/`);return}$.goBack()}let[eB,eG]=(0,y.useState)(0),[e$,eV]=(0,y.useState)(0),[eW,eY]=(0,y.useState)(!1),[eq,eX]=(0,y.useState)(!1),[eQ,eJ]=(0,y.useState)(void 0);function e0(){eX(!1),eY(!1),eJ(void 0)}function e1(e,t){"vertical"!==t&&e.stopPropagation()}let e2=!!a,e4=(0,y.useMemo)(()=>ej(a,i),[null==a?void 0:a.entityId,i]);return((0,y.useEffect)(()=>{if(e2){let{closeupImageHeight:e,modalTop:t=0}=e4,i=eA(e,t,Number(s),Number(d));g(e=>({...e,closeupImageDims:e4,...i}))}},[e2,e4]),(0,y.useEffect)(()=>{(e_&&e_.length>0||l&&eS)&&H&&H.markConstraintComplete("VisualSearchFeedLoaded")}),(0,A.Z)(()=>{eg(t)}),a&&0!==eM)?(0,Z.jsxs)(y.Fragment,{children:[(0,Z.jsx)(P.Z,{unsafeCSS:eT}),(0,Z.jsx)(R.Z,{auxData:l?{commerce_data:eN}:void 0,viewParameter:l?3462:3050,viewType:72,children:(0,Z.jsx)(E.Z,{view:72,children:(0,Z.jsxs)(I.default,{hasFixedHeader:!0,hasGutter:!1,children:[(0,Z.jsx)(es.Z,{text:U._('Visual Search Page', 'flashlight.accessibilityhiddenheading.fullpage', 'accessibility label for flashlight page')}),(0,Z.jsx)(u.xu,{width:"100vw",height:"100vh",color:"dark"}),(0,Z.jsx)(er,{closeupImageUrl:eK,closeupImageDims:_.closeupImageDims,cropArea:e,handleBackClick:eU,handleChangeCloseupImageTop:function(e){g(t=>({...t,closeupImageDims:{...t.closeupImageDims,closeupImageTop:e}}))},handleCropperChange:function({cropArea:e,cropSource:t,visualObjects:i}){eg(t),eh(r),ea(F(i,e)),h(t),g(t=>({...t,...e})),$.replace(`/pin/${r}/visual-search/?x=${e.x}&y=${e.y}&h=${e.h}&w=${e.w}&cropSource=${t}`)},headerHeight:i,inUnifiedFeedExp:l,pinDominantColor:a.dominantColor||"#efefef",pinId:r,pinImageSignature:a.imageSignature,showBackButton:ez,viewParameter:eL,visualObjects:ei,visualObjectToHide:ep}),!ez&&l&&(0,Z.jsx)(M,{handleBackClick:eU,viewParameter:eL,viewType:427}),(0,Z.jsxs)(eI,{canMoveModal:!0,cropSource:t,entryPoint:"flashlight",headerHeight:i,heading:eO,inUnifiedFeedExp:l,isOpen:!0,location:Y,maxDistanceFromTop:eM||0,minDistanceFromTop:q?60:i,mobileAccessibilityCloseIconLabel:U._('Close visual search results', 'close visual search results and go back to pin', 'close visual search results and go back to pin'),mobileHideCloseIcon:l,noBorder:!0,noDivider:!0,noMaskOnBackground:!0,onDismiss:eU,pinId:r,shouldSnapToEnds:!0,showHandle:l,snapToEndThreshold:.3,viewParameter:eL,viewType:72,children:[(0,Z.jsx)(u.$j,{accessibilityLabel:U._('Loading visual search results', 'mobileFlashlightPage.loadingSpinner', 'Spinner for loading the visual search result'),show:l&&!eS}),l&&eS&&(0,Z.jsxs)(y.Fragment,{children:[ew&&(0,Z.jsxs)(y.Fragment,{children:[(0,Z.jsxs)(u.xu,{alignItems:"center",direction:"row",display:"flex",justifyContent:"between",marginBottom:2,paddingX:4,children:[(0,Z.jsx)(u.Tg,{href:eE,onTap:({event:e})=>{e.stopPropagation(),eH()},tapStyle:"compress",children:(0,Z.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:eR})}),(0,Z.jsx)(u.I_,{accessibilityLabel:eC||U._('See more', 'headerModule.headerModuleActionButton.iconButton', 'An right arrow icon button to show more similar pins to the user in a new page'),bgColor:"transparent",dataTestId:"product-upsell-action-button",href:eE,icon:"arrow-forward",iconColor:"darkGray",onClick:eH,size:"sm"})]}),(0,Z.jsx)(u.xu,{onTouchStart:function(e){let{clientX:t,clientY:i}=e.touches[0];eG(t),eV(i),e0()},onTouchMove:function(e){let{clientX:t,clientY:i}=e.touches[0];Math.abs(i-e$)>10&&eY(!0),Math.abs(t-eB)>10&&eX(!0),eq&&eW?eJ(e=>e||"vertical"):eq?eJ(e=>e||"horizontal"):eW?eJ(e=>e||"vertical"):eJ(void 0),e1(e,eQ)},onTouchEnd:function(e){e1(e,eQ),e0()},dangerouslySetInlineStyle:{__style:{touchAction:"pan-x",overflowY:"hidden"}},children:(0,Z.jsx)(k.default,{component:14339,disableHeader:!0,story:ew,storyGraphqlRef:null,surface:"ShoppingDynamicHeightGrid",view:72,viewParameter:3462})})]}),(0,Z.jsx)(u.xu,{marginBottom:3,paddingX:4,children:(0,Z.jsx)(u.X6,{accessibilityLevel:2,size:"400",children:eD})}),(0,Z.jsx)(u.xu,{color:"default",paddingX:b.D6,dangerouslySetInlineStyle:{__style:{touchAction:"pan-y"}},children:(0,Z.jsx)(em.Z,{feedKey:null!==(K=(0,ec.J)("VisualSearchFlashlightUnifiedResource",c))&&void 0!==K?K:"",feedItems:eP,pagination:{loadNext:ev||(()=>void 0),hasNext:!ef,isLoadingNext:ex||!1,refetch:()=>void 0},renderFeedItem:(e,t)=>(0,Z.jsx)(O.cn,{children:(0,Z.jsx)(eo.ZP,{auxData:{commerce_data:eN},componentType:0,pinId:e.id,slotIndex:t,trackingParams:e.trackingParams||void 0,viewParameter:3462,viewType:72,duploQueryRef:null})})})})]}),!l&&(0,Z.jsx)(u.xu,{color:"default",paddingX:b.D6,children:(0,Z.jsx)(D.ZP,{resourceConfig:{name:"VisualLiveSearchResource",options:c},feedItemProps:{viewParameter:3050,viewType:72},feedKey:null!==(z=(0,ec.J)("VisualLiveSearchResource",c))&&void 0!==z?z:"",trafficSource:"flashlight"})})]})]})})})]}):null}function eR(e){let{searchResourceOptions:t}=e,i=(0,g.Z)({name:"VisualSearchFlashlightUnifiedResource",options:t});return(0,Z.jsx)(eC,{...e,visualSearchFlashlightUnifiedResource:i})}let eD=void 0!==l?l:l=i(781426);function eO({pinKey:e}){let{checkExperiment:t}=(0,m.F)(),{anyEnabled:i}=t("mweb_flashlight_unified_feed"),l=(0,n.$B)(),{pinId:a}=(0,_.Z)(l.params.id||""),d=(0,n.TH)(),u=(0,r.mB)(d.search),{cropSource:c,x:p,y:h,h:g,w:v}=u,{isAuth:f}=(0,o.Z)(),x=(0,s.ZP)(),b=!f&&(0,j.x9)(x)||void 0,{data:w}=(0,S.u)(eD,e),[P,I]=(0,y.useState)(()=>{let e=ej(w,b);e.closeupImageTop=0;let{closeupImageHeight:t,modalTop:i=0}=e,l=eA(t,i,Number(g),Number(h));return{closeupImageDims:e,x:p?Number(p):.1,w:v?Number(v):.8,y:l.y,h:l.h}}),[T,k]=(0,y.useState)(()=>{let e=(0,C.Z)(Number(c));return e||(p&&h&&g&&v?6:5)}),E={x:P.x,y:P.y,w:P.w,h:P.h},A={cropArea:E,cropSource:T,headerHeight:b,inUnifiedFeedExp:i,pin:w,pinId:a,queryH:g,queryY:h,searchResourceOptions:{pin_id:a,crop:E,crop_source:T,is_shopping:!1,entry_source:"flashlight",entrypoint:null},setCropSource:k,setState:I,state:P};return i?(0,Z.jsx)(eR,{...A}):(0,Z.jsx)(eC,{...A})}var eL=i(350118);let eN=void 0!==a?a:a=i(43027);function eZ(e){var t,i,l;return{width:null!==(t=e.width)&&void 0!==t?t:0,url:null!==(i=e.url)&&void 0!==i?i:"",height:null!==(l=e.height)&&void 0!==l?l:0}}function eM(e){return null==e?void 0:e.map(e=>{var t,i;return{id:null!==(t=e.itemId)&&void 0!==t?t:"",additional_images:null!==(i=function(e){let t=[];return e.forEach(({additionalImages:e,spec:i})=>{var l;t.push(...null!==(l=function({additionalImages:e,spec:t}){let i=[];return null==e||e.forEach(e=>{if(e.canonicalImage){var l;i.push({canonical_images:{[t]:eZ(e.canonicalImage)},image_signature:null!==(l=e.imageSignature)&&void 0!==l?l:""})}}),i}({additionalImages:e,spec:i}))&&void 0!==l?l:[])}),t}([{additionalImages:e.additionalImageOrig,spec:"orig"},{additionalImages:e.additionalImage736x,spec:"736x"},{additionalImages:e.additionalImage564x,spec:"564x"},{additionalImages:e.additionalImage474x,spec:"474x"},{additionalImages:e.additionalImage236x,spec:"236x"}]))&&void 0!==i?i:[]}})}function eK(e){let t={};return e.forEach(({image:e,spec:i})=>{e&&(t[i]=eZ(e))}),t}let ez=(0,c.Z)({useGraphQLAdapter:function({pinId:e}){var t,i,l,a,n,r,s,o,u,c,p,m,h,g,_;let y=(0,d.useLazyLoadQuery)(eN,{pinId:e}),v=null===(t=y.v3GetPinQuery)||void 0===t?void 0:t.data;if(!v)return null;let f={id:null!==(i=v.entityId)&&void 0!==i?i:"",dominant_color:null!==(l=v.dominantColor)&&void 0!==l?l:"",image_signature:null!==(a=v.imageSignature)&&void 0!==a?a:"",visual_objects:null!==(n=null==(s=v.visualObjects)?void 0:s.map(e=>{var t,i,l,a,n,r,s,o,d,u,c,p,m,h;return{detection:null!==(t=e.detection)&&void 0!==t&&t,h:null!==(i=e.h)&&void 0!==i?i:0,index:null!==(l=e.index)&&void 0!==l?l:0,is_stela:null!==(a=e.isStela)&&void 0!==a&&a,label:null!==(n=e.label)&&void 0!==n?n:"",label_id:null!==(r=e.labelId)&&void 0!==r?r:"",label_x:null!==(s=e.labelX)&&void 0!==s?s:0,label_y:null!==(o=e.labelY)&&void 0!==o?o:0,max_annotation_num_documents:null!==(d=e.maxAnnotationNumDocuments)&&void 0!==d?d:0,score:null!==(u=e.score)&&void 0!==u?u:0,show_on_closeup:null!==(c=e.showOnCloseup)&&void 0!==c&&c,w:null!==(p=e.x)&&void 0!==p?p:0,x:null!==(m=e.w)&&void 0!==m?m:0,y:null!==(h=e.y)&&void 0!==h?h:0}}))&&void 0!==n?n:[],images:null!==(r=eK([{image:v.imageOrig,spec:"orig"},{image:v.image736x,spec:"736x"},{image:v.image564x,spec:"564x"},{image:v.image474x,spec:"474x"},{image:v.image236x,spec:"236x"}]))&&void 0!==r?r:{},rich_metadata:{products:null!==(u=eM(null==(o=v.richMetadata)?void 0:o.products))&&void 0!==u?u:[]},rich_summary:{products:null!==(p=eM(null==(c=v.richSummary)?void 0:c.products))&&void 0!==p?p:[]},carousel_data:{carousel_slots:null!==(h=null==(_=null==(m=v.carouselData)?void 0:m.carouselSlots)?void 0:_.map(e=>{var t,i;return{image_signature:null!==(t=e.imageSignature)&&void 0!==t?t:"",images:null!==(i=eK([{image:e.imageOrig,spec:"orig"},{image:e.image736x,spec:"736x"},{image:e.image564x,spec:"564x"},{image:e.image474x,spec:"474x"},{image:e.image236x,spec:"236x"}]))&&void 0!==i?i:{}}}))&&void 0!==h?h:[],index:null!==(g=null==m?void 0:m.index)&&void 0!==g?g:0},type:"pin"};return{pin:f}},useLegacyAdapter:function({pinId:e}){let{data:t}=(0,g.Z)({name:"PinResource",options:{id:e,field_set_key:"detailed",fetch_visual_search_objects:!0,is_mobile_fork:!0}}),i=(0,eL.S6)()(e),l=null!=t?t:i;return l?{pin:l}:null}});function eH(){let{checkExperiment:e}=(0,m.F)(),t=(0,p.ZP)(),i=(0,n.$B)(),{pinId:l}=(0,_.Z)(i.params.id||"");return(0,Z.jsx)(ez,{input:e("auth_mweb_graphql_flashlight_pinResource").anyEnabled||e("unauth_mweb_graphql_flashlight_pinResource").anyEnabled?{enabled:!0,data:{pinId:l},suspense:{fallback:(0,Z.jsx)(u.$j,{accessibilityLabel:t._('Loading Pin data', 'mobileFlashlightPage.loadingPinData', 'accessibility label for pin loading spinner'),show:!0})}}:{enabled:!1,data:{pinId:l}},children:({data:e})=>!!e&&(0,Z.jsx)(h.Z,{constraints:["VisualSearchFeedLoaded"],surface:"flashlight",children:(0,Z.jsx)(eO,{pinKey:null!=e.pin?{type:"deprecated",data:e.pin}:null})})})}var eU=i(272984),eB=i(594379),eG=i(215425),e$=i(23195);let eV=function(){let e=(0,s.HG)(),t=(0,o.Z)(),i=(0,n.TH)(),{surfaceType:l}=(0,r.mB)(i.search);return e?t.isAuth?["stela","stl"].includes(l)?(0,Z.jsx)(eG.Z,{}):(0,Z.jsx)(eB.ZP,{}):(0,Z.jsx)(eU.Z,{}):i.pathname.includes("/products/")?(0,Z.jsx)(e$.Z,{}):(0,Z.jsx)(eH,{})}},585913:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_left-d4d98c77.svg"},913574:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_bottom_right-ccae4564.svg"},49808:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_left-68937c82.svg"},957435:e=>{"use strict";e.exports="https://s.pinimg.com/webapp/handle_top_right-4d7ae997.svg"},204942:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(383997);function a(e,t,i){return(t=(0,l.Z)(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}},601413:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});var l=i(204942);function a(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,l)}return i}function n(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?a(Object(i),!0).forEach(function(t){(0,l.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},383997:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var l=i(671002);function a(e){var t=function(e,t){if("object"!=(0,l.Z)(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var a=i.call(e,t||"default");if("object"!=(0,l.Z)(a))return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,l.Z)(t)?t:String(t)}},671002:(e,t,i)=>{"use strict";function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}i.d(t,{Z:()=>l})}},e=>{var t=t=>e(e.s=t);e.O(0,[97270,83119,16550,26067,17492,48327,16117,13254,8575,99961,90123,23019,28090,42506,60779,43203,16142,72732,15071,27671,26301,61621,31600],()=>t(269458)),e.O()}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/www/pin/[id]/visual-search-166f71d4dd03ba73.mjs.map